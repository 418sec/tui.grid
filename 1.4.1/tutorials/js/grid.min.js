/**
 * @fileoverview tui-grid
 * @author NHN Ent. FE Development Team
 * @version 1.4.0-d
 * @license MIT
 * @link https://github.com/nhnent/tui.grid
 */
!function e(t,i,n){function o(a,l){if(!i[a]){if(!t[a]){var r="function"==typeof require&&require;if(!l&&r)return r(a,!0);if(s)return s(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[a]={exports:{}};t[a][0].call(u.exports,function(e){var i=t[a][1][e];return o(i?i:e)},u,u.exports,e,t,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,i){"use strict";var n=Backbone.Router.extend({initialize:function(e){this.net=e.net},routes:{"read/:queryStr":"read"}});t.exports=n},{}],2:[function(e,t,i){"use strict";var n=e("../base/view"),o=e("./net-router"),s=e("../common/util"),a=e("../common/formUtil"),l=e("../common/gridEvent"),r=e("../common/constMap").renderState,d=200,u=n.extend({initialize:function(e){var t;t={initialRequest:!0,api:{readData:"",createData:"",updateData:"",deleteData:"",modifyData:"",downloadExcel:"",downloadExcelAll:""},perPage:500,enableAjaxHistory:!0},e=$.extend(!0,t,e),this.setOwnProperties({dataModel:e.dataModel,toolbarModel:e.toolbarModel,renderModel:e.renderModel,router:null,pagination:e.pagination,api:e.api,enableAjaxHistory:e.enableAjaxHistory,perPage:e.perPage,curPage:1,timeoutIdForDelay:null,requestedFormData:null,isLocked:!1,lastRequestedReadData:null}),this._initializeDataModelNetwork(),this._initializeRouter(),this._initializePagination(),this._showToolbarExcelBtns(),this.listenTo(this.dataModel,"sortChanged",this._onSortChanged,this),e.initialRequest&&(this.lastRequestedReadData||this._readDataAt(1,!1))},tagName:"form",events:{submit:"_onSubmit"},_initializePagination:function(){var e=this.pagination;e&&(e.setOption("itemPerPage",this.perPage),e.setOption("itemCount",1),e.on("beforeMove",$.proxy(this._onPageBeforeMove,this)))},_onRouterRead:function(e){var t=s.toQueryObject(e);this._requestReadData(t)},_initializeDataModelNetwork:function(){this.dataModel.url=this.api.readData,this.dataModel.sync=$.proxy(this._sync,this)},_initializeRouter:function(){this.enableAjaxHistory&&(this.router=new o({net:this}),this.listenTo(this.router,"route:read",this._onRouterRead),Backbone.History.started||Backbone.history.start())},_showToolbarExcelBtns:function(){var e=this.toolbarModel,t=this.api;e&&(t.downloadExcel&&e.set("isExcelButtonVisible",!0),t.downloadExcelAll&&e.set("isExcelAllButtonVisible",!0))},_onPageBeforeMove:function(e){var t=e.page;this.curPage!==t&&this._readDataAt(t,!0)},_onSubmit:function(e){e.preventDefault(),this._readDataAt(1,!1)},_setFormData:function(e){var t=_.clone(e);_.each(this.lastRequestedReadData,function(e,i){(_.isUndefined(t[i])||_.isNull(t[i]))&&e&&(t[i]="")}),a.setFormData(this.$el,t)},_sync:function(e,t,i){var n;"read"===e?(i=i||{},n=$.extend({},i),i.url||(n.url=_.result(t,"url")),this._ajax(n)):Backbone.sync(Backbone,e,t,i)},_lock:function(){var e=this.renderModel;this.timeoutIdForDelay=setTimeout(function(){e.set("state",r.LOADING)},d),this.isLocked=!0},_unlock:function(){null!==this.timeoutIdForDelay&&(clearTimeout(this.timeoutIdForDelay),this.timeoutIdForDelay=null),this.isLocked=!1},_getFormData:function(){return a.getFormData(this.$el)},_onReadSuccess:function(e,t){var i,n,o=this.pagination;e.setOriginalRowList(),o&&t.pagination&&(i=t.pagination.page,n=t.pagination.totalCount,o.setOption("itemPerPage",this.perPage),o.setOption("itemCount",n),o.movePageTo(i),this.curPage=i)},_onReadError:function(e,t,i){},reloadData:function(){this._requestReadData(this.lastRequestedReadData)},readData:function(e,t,i){i?(t||(t={}),t.perPage=this.perPage,this._changeSortOptions(t,this.dataModel.sortOptions)):t=_.assign({},this.lastRequestedReadData,t),t.page=e,this._requestReadData(t)},_requestReadData:function(e){var t=1;this._setFormData(e),this.isLocked||(this.renderModel.initializeVariables(),this._lock(),this.requestedFormData=_.clone(e),this.curPage=e.page||this.curPage,t=(this.curPage-1)*this.perPage+1,this.renderModel.set({startNumber:t}),this.lastRequestedReadData=_.clone(e),this.dataModel.fetch({requestType:"readData",data:e,type:"POST",success:$.proxy(this._onReadSuccess,this),error:$.proxy(this._onReadError,this),reset:!0}),this.dataModel.setSortOptionValues(e.sortColumn,e.sortAscending)),this.router&&this.router.navigate("read/"+s.toQueryString(e),{trigger:!1})},_onSortChanged:function(e){e.isRequireFetch&&this._readDataAt(1,!0,e)},_changeSortOptions:function(e,t){t&&("rowKey"===t.columnName?(delete e.sortColumn,delete e.sortAscending):(e.sortColumn=t.columnName,e.sortAscending=t.isAscending))},_readDataAt:function(e,t,i){var n;t=_.isUndefined(t)?!0:t,n=t?this.requestedFormData:this._getFormData(),n.page=e,n.perPage=this.perPage,this._changeSortOptions(n,i),this._requestReadData(n)},request:function(e,t){var i={url:this.api[e],type:null,hasDataParam:!0,isOnlyChecked:!0,isOnlyModified:!0,isSkipConfirm:!1},n=$.extend(i,t),o=this._getRequestParam(e,n);o&&this._ajax(o)},download:function(e){var t,i="download"+s.toUpperCaseFirstLetter(e),n=this.requestedFormData,o=this.api[i];"excel"===e?(n.page=this.curPage,n.perPage=this.perPage):n=_.omit(n,"page","perPage"),t=$.param(n),window.location=o+"?"+t},setPerPage:function(e){this.perPage=e,this._readDataAt(1)},_getDataParam:function(e,t){var i,n=this.dataModel,o={createData:["createList"],updateData:["updateList"],deleteData:["deleteList"],modifyData:["createList","updateList","deleteList"]},s=o[e],a={},l=0;return t=_.defaults(t||{},{hasDataParam:!0,isOnlyModified:!0,isOnlyChecked:!0}),t.hasDataParam&&(t.isOnlyModified?(i=n.getModifiedRowList({isOnlyChecked:t.isOnlyChecked}),_.each(i,function(e,t){_.contains(s,t)&&e.length&&(l+=e.length,a[t]=JSON.stringify(e))},this)):(a.rowList=n.getRowList(t.isOnlyChecked),l=a.rowList.length)),{data:a,count:l}},_getRequestParam:function(e,t){var i={url:this.api[e],type:null,hasDataParam:!0,isOnlyModified:!0,isOnlyChecked:!0},n=$.extend(i,t),o=this._getDataParam(e,n),s=null;return(n.isSkipConfirm||this._isConfirmed(e,o.count))&&(s={requestType:e,url:n.url,data:o.data,type:n.type}),s},_isConfirmed:function(e,t){var i=!1;return t>0?i=confirm(this._getConfirmMessage(e,t)):alert(this._getConfirmMessage(e,t)),i},_getConfirmMessage:function(e,t){var i,n={createData:"입력",updateData:"수정",deleteData:"삭제",modifyData:"반영"},o=n[e];return i=t>0?t+"건의 데이터를 "+o+"하시겠습니까?":o+"할 데이터가 없습니다."},_ajax:function(e){var t,i=new l(e.data);this.trigger("beforeRequest",i),i.isStopped()||(e=$.extend({requestType:""},e),t={url:e.url,data:e.data||{},type:e.type||"POST",dataType:e.dataType||"json",complete:$.proxy(this._onComplete,this,e.complete,e),success:$.proxy(this._onSuccess,this,e.success,e),error:$.proxy(this._onError,this,e.error,e)},e.url&&$.ajax(t))},_onComplete:function(e,t,i){this._unlock()},_onSuccess:function(e,t,i,n,o){var s=i&&i.message,a=new l({httpStatus:n,requestType:t.requestType,requestParameter:t.data,responseData:i});if(this.trigger("response",a),!a.isStopped())if(i&&i.result){if(this.trigger("successResponse",a),a.isStopped())return;_.isFunction(e)&&e(i.data||{},n,o)}else{if(this.trigger("failResponse",a),a.isStopped())return;s&&alert(s)}},_onError:function(e,t,i,n){var o=new l({httpStatus:n,requestType:t.requestType,requestParameter:t.data,responseData:null});this.renderModel.set("state",r.DONE),this.trigger("response",o),o.isStopped()||(this.trigger("errorResponse",o),o.isStopped()||i.readyState>1&&alert("데이터 요청 중에 에러가 발생하였습니다.\n\n다시 시도하여 주시기 바랍니다."))}});t.exports=u},{"../base/view":7,"../common/constMap":9,"../common/formUtil":10,"../common/gridEvent":11,"../common/util":12,"./net-router":1}],3:[function(e,t,i){"use strict";var n=e("./common"),o=Backbone.Collection.extend({clear:function(){return this.each(function(e){e.stopListening(),e=null}),this.reset([],{silent:!0}),this}});_.assign(o.prototype,n),t.exports=o},{"./common":4}],4:[function(e,t,i){"use strict";var n={setOwnProperties:function(e){_.each(e,function(e,t){this[t]=e},this)}};t.exports=n},{}],5:[function(e,t,i){"use strict";var n=e("./common"),o=Backbone.Model.extend({});_.assign(o.prototype,n),t.exports=o},{"./common":4}],6:[function(e,t,i){"use strict";var n=e("../common/constMap").attrName,o=tui.util.defineClass({init:function(e){this.controller=e.controller},events:{},selector:"",_getCellAddress:function(e){var t=e.closest("["+n.ROW_KEY+"]");return{rowKey:t.attr(n.ROW_KEY),columnName:t.attr(n.COLUMN_NAME)}},attachEventHandlers:function(e,t){_.each(this.events,function(i,n){var o=_.bind(this[i],this),s=t+" "+this.selector;e.on(n,s,o)},this)},generateHtml:function(){throw new Error("implement generateHtml() method")}});t.exports=o},{"../common/constMap":9}],7:[function(e,t,i){"use strict";var n=e("./common"),o=Backbone.View.extend({initialize:function(){this._children=[]},error:function(e){var t=function(){this.name="Grid Exception",this.message=e||"error"};return t.prototype=new Error,new t},_addChildren:function(e){_.isArray(e)||(e=[e]),[].push.apply(this._children,_.compact(e))},_renderChildren:function(){var e=_.map(this._children,function(e){return e.render().el});return e},_triggerChildrenAppended:function(){_.each(this._children,function(e){e.trigger("appended")})},destroy:function(){this.stopListening(),this._destroyChildren(),this.remove()},_destroyChildren:function(){if(this._children)for(;this._children.length>0;)this._children.pop().destroy()}});_.assign(o.prototype,n),t.exports=o},{"./common":4}],8:[function(e,t,i){"use strict";var n="tui-grid-",o={CONTAINER:"container",CLIPBOARD:"clipboard",NO_SCROLL_X:"no-scroll-x",NO_SCROLL_Y:"no-scroll-y",ICO_ARROW:"icon-arrow",ICO_ARROW_LEFT:"icon-arrow-left",ICO_ARROW_RIGHT:"icon-arrow-right",LAYER_STATE:"layer-state",LAYER_STATE_CONTENT:"layer-state-content",LAYER_STATE_LOADING:"layer-state-loading",LAYER_EDITING:"layer-editing",LAYER_FOCUS:"layer-focus",LAYER_FOCUS_BORDER:"layer-focus-border",LAYER_SELECTION:"layer-selection",LAYER_DATE_PICKER:"layer-datepicker",BORDER_LINE:"border-line",BORDER_TOP:"border-line-top",BORDER_LEFT:"border-line-left",BORDER_RIGHT:"border-line-right",BORDER_BOTTOM:"border-line-bottom",CONTENT_AREA:"content-area",LSIDE_AREA:"lside-area",RSIDE_AREA:"rside-area",HEAD_AREA:"head-area",BODY_AREA:"body-area",COLUMN_RESIZE_CONTAINER:"column-resize-container",COLUMN_RESIZE_HANDLE:"column-resize-handle",COLUMN_RESIZE_HANDLE_LAST:"column-resize-handle-last",BODY_CONTAINER:"body-container",BODY_TABLE_CONTAINER:"table-container",SCROLLBAR_HEAD:"scrollbar-head",SCROLLBAR_BORDER:"scrollbar-border",SCROLLBAR_RIGHT_BOTTOM:"scrollbar-right-bottom",SCROLLBAR_LEFT_BOTTOM:"scrollbar-left-bottom",PAGINATION:"pagination",PAGINATION_PRE:"pre",PAGINATION_PRE_OFF:"pre-off",PAGINATION_PRE_END:"pre-end",PAGINATION_PRE_END_OFF:"pre-end-off",PAGINATION_NEXT:"next",PAGINATION_NEXT_OFF:"next-off",PAGINATION_NEXT_END:"next-end",PAGINATION_NEXT_END_OFF:"next-end-off",TABLE:"table",CELL:"cell",CELL_HEAD:"cell-head",CELL_ROW_ODD:"cell-row-odd",CELL_ROW_EVEN:"cell-row-even",CELL_EDITABLE:"cell-editable",CELL_DUMMY:"cell-dummy",CELL_REQUIRED:"cell-required",CELL_DISABLED:"cell-disabled",CELL_SELECTED:"cell-selected",CELL_INVALID:"cell-invalid",CELL_ELLIPSIS:"cell-ellipsis",CELL_CURRENT_ROW:"cell-current-row",CELL_MAIN_BUTTON:"cell-main-button",CELL_CONTENT:"cell-content",CELL_CONTENT_BEFORE:"content-before",CELL_CONTENT_AFTER:"content-after",CELL_CONTENT_INPUT:"content-input",BTN_TEXT:"btn-text",BTN_SORT:"btn-sorting",BTN_SORT_UP:"btn-sorting-up",BTN_SORT_DOWN:"btn-sorting-down",BTN_EXCEL:"btn-excel-download",BTN_EXCEL_ICON:"btn-excel-icon",BTN_EXCEL_PAGE:"btn-excel-page",BTN_EXCEL_ALL:"btn-excel-all",TOOLBAR:"toolbar",TOOLBAR_BTN_HOLDER:"toolbar-btn-holder",HEIGHT_RESIZE_BAR:"height-resize-bar",HEIGHT_RESIZE_HANDLE:"height-resize-handle",CALENDAR:"calendar",CALENDAR_BTN_PREV_YEAR:"calendar-btn-prev-year",CALENDAR_BTN_NEXT_YEAR:"calendar-btn-next-year",CALENDAR_BTN_PREV_MONTH:"calendar-btn-prev-month",CALENDAR_BTN_NEXT_MONTH:"calendar-btn-next-month",CALENDAR_SELECTABLE:"calendar-selectable",CALENDAR_SELECTED:"calendar-selected"},i=_.mapObject(o,function(e){return n+e});i.PREFIX=n,t.exports=i},{}],9:[function(e,t,i){"use strict";var n={TAB:9,ENTER:13,CTRL:17,ESC:27,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,CHAR_A:65,CHAR_C:67,CHAR_F:70,CHAR_R:82,CHAR_V:86,LEFT_WINDOW_KEY:91,F5:116,BACKSPACE:8,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,DEL:46,UNDEFINED:229};t.exports={keyCode:n,keyName:_.invert(n),renderState:{LOADING:"LOADING",DONE:"DONE",EMPTY:"EMPTY"},dimension:{CELL_BORDER_WIDTH:1,TABLE_BORDER_WIDTH:1},attrName:{ROW_KEY:"data-row-key",COLUMN_NAME:"data-column-name",COLUMN_INDEX:"data-column-index",EDIT_TYPE:"data-edit-type",GRID_ID:"data-grid-id"},themeName:{DEFAULT:"default",STRIPED:"striped",CLEAN:"clean"},selectionType:{CELL:"CELL",ROW:"ROW",COLUMN:"COLUMN"}}},{}],10:[function(e,t,i){"use strict";var n={setInput:{_changeToStringInArray:function(e){return _.each(e,function(t,i){e[i]=String(t)}),e},radio:function(e,t){e.checked=e.value===t},checkbox:function(e,t){_.isArray(t)?e.checked=-1!==$.inArray(e.value,this._changeToStringInArray(t)):e.checked=e.value===t},"select-one":function(e,t){var i=tui.util.toArray(e.options);e.selectedIndex=_.findIndex(i,function(e){return e.value===t||e.text===t})},"select-multiple":function(e,t){var i=tui.util.toArray(e.options);_.isArray(t)?(t=this._changeToStringInArray(t),_.each(i,function(e){e.selected=-1!==$.inArray(e.value,t)||-1!==$.inArray(e.text,t)})):this["select-one"].apply(this,arguments)},defaultAction:function(e,t){e.value=t}},getFormData:function(e){var t={},i=e.serializeArray(),n=tui.util.isExisty;return _.each(i,function(e){var i=e.value||"",o=e.name;n(t[o])?t[o]=[].concat(t[o],i):t[o]=i}),t},getFormElement:function(e,t){var i;return e&&e.length&&(i=t?e.prop("elements")[String(t)]:e.prop("elements")),$(i)},setFormData:function(e,t){_.each(t,function(t,i){this.setFormElementValue(e,i,t)},this)},setFormElementValue:function(e,t,i){var n,o=this.getFormElement(e,t);o.length&&(_.isArray(i)||(i=String(i)),o=tui.util.isHTMLTag(o)?[o]:o,o=tui.util.toArray(o),_.each(o,function(e){n=this.setInput[e.type]?e.type:"defaultAction",this.setInput[n](e,i)},this))},setCursorToEnd:function(e){var t,i=e.value.length;if(e.focus(),e.setSelectionRange)try{e.setSelectionRange(i,i)}catch(n){}else if(e.createTextRange){t=e.createTextRange(),t.collapse(!0),t.moveEnd("character",i),t.moveStart("character",i);try{t.select()}catch(n){}}}};t.exports=n},{}],11:[function(e,t,i){"use strict";var n=tui.util.defineClass({init:function(e){this._stopped=!1,this.setData(e)},setData:function(e){_.extend(this,e)},stop:function(){this._stopped=!0},isStopped:function(){return this._stopped}});t.exports=n},{}],12:[function(e,t,i){"use strict";var n=e("./constMap").dimension.CELL_BORDER_WIDTH,o={uniqueId:0,getAttributesString:function(e){var t="";return _.each(e,function(e,i){t+=" "+i+'="'+e+'"'},this),t},sum:function(e){return _.reduce(e,function(e,t){return e+=t},0)},getMinMax:function(e){return{min:Math.min.apply(null,e),max:Math.max.apply(null,e)}},getHeight:function(e,t){return 0===e?e:e*(t+n)},getDisplayRowCount:function(e,t){return Math.ceil(e/(t+n))},getRowHeight:function(e,t){return 0===e?0:Math.floor((t-n)/e)},isMetaColumn:function(e){return _.contains(["_button","_number"],e)},isEqual:function(e,t){var i,n=function(e,t){var i=!1;return tui.util.forEach(e,function(e,n){return i=e===t[n]}),i};return typeof e!=typeof t?!1:_.isArray(e)&&e.length!==t.length?!1:_.isObject(e)?(i=!n(e,t)||!n(t,e),!i):e===t},isBlank:function(e){return _.isString(e)?!e.length:_.isUndefined(e)||_.isNull(e)},stripTags:function(e){var t;return e=e.replace(/[\n\r\t]/g,""),tui.util.hasEncodableString(e)&&(/<img/i.test(e)?(t=e.match(/<img[^>]*\ssrc=["']?([^>"']+)["']?[^>]*>/i),e=t?t[1]:""):e=e.replace(/<button.*?<\/button>/gi,""),e=$.trim(tui.util.decodeHTMLEntity(e.replace(/<\/?(?:h[1-5]|[a-z]+(?::[a-z]+)?)[^>]*>/gi,"")))),e},toString:function(e){return _.isUndefined(e)||_.isNull(e)?"":String(e)},getUniqueKey:function(){return this.uniqueId+=1,this.uniqueId},toQueryString:function(e){var t=[];return _.each(e,function(e,i){_.isString(e)||_.isNumber(e)||(e=JSON.stringify(e)),e=encodeURIComponent(e),e&&t.push(i+"="+e)}),t.join("&")},toQueryObject:function(e){var t=e.split("&"),i={};return _.each(t,function(e){var t,n,o=e.split("=");t=o[0],n=decodeURIComponent(o[1]);try{n=JSON.parse(n)}catch(s){}_.isNull(n)||(i[t]=n)}),i},convertValueType:function(e,t){return"string"===t?String(e):"number"===t?Number(e):"boolean"===t?Boolean(e):e},toUpperCaseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},clamp:function(e,t,i){var n;return t>i&&(n=t,t=i,i=n),Math.max(t,Math.min(e,i))},isBrowserIE7:function(){var e=tui.util.browser;return e.msie&&7===e.version},isOptionEnabled:function(e){return _.isObject(e)||e===!0},appendStyleElement:function(e,t){var i=document.createElement("style");i.type="text/css",i.id=e,i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(i)},enableDeprecatedOptions:function(e){var t=e.toolbar,i={hasControlPanel:!0,hasResizeHandler:!0,hasPagination:!0};return e=$.extend(!0,{},e),_.isObject(t)?_.defaults(t,i):t={},!o.isOptionEnabled(e.pagination)&&t.hasPagination&&(e.pagination=!0),!o.isOptionEnabled(e.resizeHandle)&&t.hasResizeHandler&&(e.resizeHandle=!0),_.isObject(e.toolbar)&&!t.hasControlPanel?e.toolbar=!1:o.isOptionEnabled(e.toolbar)&&(e.toolbar=!0),e}};t.exports=o},{"./constMap":9}],13:[function(e,t,i){"use strict";var n={pagination:null},o=tui.util.defineClass({init:function(e){this.optionsMap=$.extend(!0,n,e),this.instanceMap={}},getInstance:function(e){return this.instanceMap[e]},setInstance:function(e,t){this.instanceMap[e]=t},getOptions:function(e){return this.optionsMap[e]}});t.exports=o},{}],14:[function(e,t,i){"use strict";var n=e("./common/constMap").attrName,o=tui.util.defineClass({init:function(e){this.$el=e},getElement:function(e,t){return this.$el.find("tr["+n.ROW_KEY+"="+e+"]").find("td["+n.COLUMN_NAME+'="'+t+'"]')},getOffset:function(){return this.$el.offset()},getWidth:function(){return this.$el.width()},getParentHeight:function(){return this.$el.parent().height()},hasFocusedElement:function(){return!!this.$el.find(":focus").length}});t.exports=o},{"./common/constMap":9}],15:[function(e,t,i){"use strict";var n=e("./base/view"),o=e("./model/manager"),s=e("./view/factory"),a=e("./domState"),l=e("./publicEventEmitter"),r=e("./painter/manager"),d=e("./painter/controller"),u=e("./addon/net"),c=e("./componentHolder"),h=e("./common/util"),m=e("./theme/manager"),g=e("./common/constMap").themeName,f={};tui=window.tui=tui||{},tui.Grid=n.extend({initialize:function(e){var t=new a(this.$el);e=h.enableDeprecatedOptions(e),this.id=h.getUniqueKey(),this.modelManager=this._createModelManager(e,t),this.painterManager=this._createPainterManager(),this.componentHolder=this._createComponentHolder(e.pagination),this.viewFactory=this._createViewFactory(t,e),this.container=this.viewFactory.createContainer(),this.publicEventEmitter=this._createPublicEventEmitter(),this.container.render(),this.refreshLayout(),m.isApplied()||m.apply(g.DEFAULT),this.addOn={},f[this.id]=this},_createModelManager:function(e,t){var i=_.assign({},e,{gridId:this.id});return _.omit(i,"el","singleClickEdit"),new o(i,t)},_createPainterManager:function(){var e=new d({focusModel:this.modelManager.focusModel,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,selectionModel:this.modelManager.selectionModel});return new r({gridId:this.id,selectType:this.modelManager.columnModel.get("selectType"),controller:e})},_createViewFactory:function(e,t){var i=_.pick(t,"singleClickEdit","resizeHandle","toolbar","copyOption"),n={modelManager:this.modelManager,painterManager:this.painterManager,componentHolder:this.componentHolder,domState:e};return new s(_.assign(n,i))},_createComponentHolder:function(e){return new c({pagination:e})},_createPublicEventEmitter:function(){var e=new l(this);return e.listenToFocusModel(this.modelManager.focusModel),e.listenToContainerView(this.container),e},disable:function(){this.modelManager.dataModel.setDisabled(!0)},enable:function(){this.modelManager.dataModel.setDisabled(!1)},disableRow:function(e){this.modelManager.dataModel.disableRow(e)},enableRow:function(e){this.modelManager.dataModel.enableRow(e)},getValue:function(e,t,i){return this.modelManager.dataModel.getValue(e,t,i)},getColumnValues:function(e,t){return this.modelManager.dataModel.getColumnValues(e,t)},getRow:function(e,t){return this.modelManager.dataModel.getRowData(e,t)},getRowAt:function(e,t){return this.modelManager.dataModel.getRowDataAt(e,t)},getRowCount:function(){return this.modelManager.dataModel.length},getSelectedRowKey:function(){return this.modelManager.focusModel.which().rowKey},getElement:function(e,t){return this.modelManager.dataModel.getElement(e,t)},setValue:function(e,t,i){this.modelManager.dataModel.setValue(e,t,i)},setColumnValues:function(e,t,i){this.modelManager.dataModel.setColumnValues(e,t,i)},replaceRowList:function(e){this.modelManager.dataModel.replaceRowList(e)},setRowList:function(e,t){this.modelManager.dataModel.setRowList(e,!0,t)},focus:function(e,t,i){this.modelManager.focusModel.focusClipboard(),this.modelManager.focusModel.focus(e,t,i)},focusAt:function(e,t,i){this.modelManager.focusModel.focusAt(e,t,i)},focusIn:function(e,t,i){this.modelManager.focusModel.focusIn(e,t,i)},focusInAt:function(e,t,i){this.modelManager.focusModel.focusInAt(e,t,i)},readyForKeyControl:function(){this.modelManager.focusModel.focusClipboard()},blur:function(){this.modelManager.focusModel.blur()},checkAll:function(){this.modelManager.dataModel.checkAll()},check:function(e){this.modelManager.dataModel.check(e)},uncheckAll:function(){this.modelManager.dataModel.uncheckAll()},uncheck:function(e){this.modelManager.dataModel.uncheck(e)},clear:function(){this.modelManager.dataModel.setRowList([])},removeRow:function(e,t){tui.util.isBoolean(t)&&t&&(t={removeOriginalData:!0}),this.modelManager.dataModel.removeRow(e,t)},removeCheckedRows:function(e){var t=this.getCheckedRowKeyList(),i=t.length+"건의 데이터를 삭제하시겠습니까?";return t.length>0&&(!e||confirm(i))?(_.each(t,function(e){this.modelManager.dataModel.removeRow(e)},this),!0):!1},enableCheck:function(e){this.modelManager.dataModel.enableCheck(e)},disableCheck:function(e){this.modelManager.dataModel.disableCheck(e)},getCheckedRowKeyList:function(e){var t=this.modelManager.dataModel.getRowList(!0),i=_.pluck(t,"rowKey");return e?JSON.stringify(i):i},getCheckedRowList:function(e){var t=this.modelManager.dataModel.getRowList(!0);return e?JSON.stringify(t):t},getColumnModelList:function(){return this.modelManager.columnModel.get("dataColumnModelList")},getModifiedRowList:function(e){return this.modelManager.dataModel.getModifiedRowList(e)},appendRow:function(e,t){this.modelManager.dataModel.append(e,t)},prependRow:function(e,t){this.modelManager.dataModel.prepend(e,t)},isChanged:function(){return this.modelManager.dataModel.isChanged()},getAddOn:function(e){return e?this.addOn[e]:this.addOn},restore:function(){this.modelManager.dataModel.restore()},select:function(e){var t=this.modelManager.columnModel.at(0,!0);this.modelManager.focusModel.focus(e,t.columnName)},unselect:function(){this.modelManager.focusModel.unselect(!0)},setColumnFixCount:function(e){this.modelManager.columnModel.set("columnFixCount",e)},setColumnModelList:function(e){this.modelManager.columnModel.set("columnModelList",e)},use:function(e,t){return"Net"===e&&(t=$.extend({toolbarModel:this.modelManager.toolbarModel,renderModel:this.modelManager.renderModel,dataModel:this.modelManager.dataModel,pagination:this.componentHolder.getInstance("pagination")},t),this.addOn.Net=new u(t),this.publicEventEmitter.listenToNetAddon(this.addOn.Net)),this},getRowList:function(){return this.modelManager.dataModel.getRowList()},sort:function(e,t){this.modelManager.dataModel.sortByField(e,t)},unSort:function(){this.sort("rowKey")},addCellClassName:function(e,t,i){this.modelManager.dataModel.get(e).addCellClassName(t,i)},addRowClassName:function(e,t){this.modelManager.dataModel.get(e).addClassName(t)},removeCellClassName:function(e,t,i){this.modelManager.dataModel.get(e).removeCellClassName(t,i)},removeRowClassName:function(e,t){this.modelManager.dataModel.get(e).removeClassName(t)},getRowSpanData:function(e,t){return this.modelManager.dataModel.getRowSpanData(e,t)},getIndexOfRow:function(e){return this.modelManager.dataModel.indexOfRowKey(e)},getPagination:function(){return this.componentHolder.getInstance("pagination")},setDisplayRowCount:function(e){this.modelManager.dimensionModel.set("displayRowCount",e)},setSize:function(e,t){this.modelManager.dimensionModel.setSize(e,t)},refreshLayout:function(){this.modelManager.dimensionModel.refreshLayout()},showColumn:function(){var e=tui.util.toArray(arguments);this.modelManager.columnModel.setHidden(e,!1)},hideColumn:function(){var e=tui.util.toArray(arguments);this.modelManager.columnModel.setHidden(e,!0)},validate:function(){return this.modelManager.dataModel.validate()},destroy:function(){this.modelManager.destroy(),this.container.destroy(),this.modelManager=this.container=null}}),tui.Grid.getInstanceById=function(e){return f[e]},tui.Grid.applyTheme=function(e,t){m.apply(e,t)}},{"./addon/net":2,"./base/view":7,"./common/constMap":9,"./common/util":12,"./componentHolder":13,"./domState":14,"./model/manager":22,"./painter/controller":30,"./painter/manager":37,"./publicEventEmitter":39,"./theme/manager":41,"./view/factory":50}],16:[function(e,t,i){"use strict";var n=e("../../base/model"),o=e("../../common/util"),s=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.textType={normal:!0,text:!0,password:!0},this._setColumnModelList(this.get("columnModelList")),this.on("change",this._onChange,this)},defaults:{keyColumnName:null,columnFixCount:0,metaColumnModelList:[],dataColumnModelList:[],visibleList:[],hasNumberColumn:!0,selectType:"",columnModelMap:{},relationListMap:{},columnMerge:[]},_initializeMetaColumns:function(e){var t=[];return this._initializeButtonColumn(t),this._initializeNumberColumn(t),this._overwriteColumnModelList(t,e),t},_overwriteColumnModelList:function(e,t){_.each(t,function(t){this._extendColumnList(t,e)},this)},_initializeNumberColumn:function(e){var t=this.get("hasNumberColumn"),i={columnName:"_number",align:"center",title:"No.",isFixedWidth:!0,width:60};t||(i.isHidden=!0),this._extendColumnList(i,e)},_initializeButtonColumn:function(e){var t=this.get("selectType"),i={columnName:"_button",isHidden:!1,align:"center",editOption:{type:"mainButton"},isFixedWidth:!0,width:40};"checkbox"===t?i.title='<input type="checkbox"/>':"radio"===t?i.title="선택":i.isHidden=!0,this._extendColumnList(i,e)},_extendColumnList:function(e,t){var i=e.columnName,n=_.findIndex(t,{columnName:i});-1===n?t.push(e):t[n]=$.extend(t[n],e)},at:function(e,t){var i=t?this.getVisibleColumnModelList():this.get("dataColumnModelList");return i[e]},indexOfColumnName:function(e,t){var i;return i=t?this.getVisibleColumnModelList():this.get("dataColumnModelList"),_.findIndex(i,{columnName:e})},isLside:function(e){var t=this.indexOfColumnName(e,!0);return t>-1&&t<this.get("columnFixCount")},getVisibleColumnModelList:function(e,t){var i,n=t?0:this.getVisibleMetaColumnCount(),o=this.getVisibleColumnFixCount(t);return e=e&&e.toUpperCase(),i="L"===e?this.get("visibleList").slice(n,o):"R"===e?this.get("visibleList").slice(o):this.get("visibleList").slice(n)},getVisibleMetaColumnCount:function(){var e=this.get("metaColumnModelList"),t=e.length,i=_.where(e,{isHidden:!0}).length;return t-i},getVisibleColumnFixCount:function(e){var t=this.get("columnFixCount"),i=_.first(this.get("dataColumnModelList"),t),n=_.filter(i,function(e){return!e.isHidden}),o=n.length;return e&&(o+=this.getVisibleMetaColumnCount()),o},getColumnModel:function(e){return this.get("columnModelMap")[e]},isTextType:function(e){return!!this.textType[this.getEditType(e)]},getEditType:function(e){var t=this.getColumnModel(e),i="normal";return"_button"===e||"_number"===e?i=e:t&&t.editOption&&t.editOption.type&&(i=t.editOption.type),i},_makeVisibleColumnModelList:function(e,t){return e=e||this.get("metaColumnModelList"),t=t||this.get("dataColumnModelList"),_.filter(e.concat(t),function(e){return!e.isHidden})},_getRelationListMap:function(e){var t,i={};return _.each(e,function(e){t=e.columnName,e.relationList&&(i[t]=e.relationList)}),i},getIgnoredColumnNameList:function(){var e=this.get("dataColumnModelList"),t=[];return _.each(e,function(e){e.isIgnore&&t.push(e.columnName)}),t},_setColumnModelList:function(e,t){var i,n,s,a,l;e=$.extend(!0,[],e),tui.util.isUndefined(t)&&(t=this.get("columnFixCount")),i=_.partition(e,function(e){return o.isMetaColumn(e.columnName)},this),a=this._initializeMetaColumns(i[0]),l=i[1],n=this._getRelationListMap(l),s=this._makeVisibleColumnModelList(a,l),this.set({metaColumnModelList:a,dataColumnModelList:l,columnModelMap:_.indexBy(a.concat(l),"columnName"),relationListMap:n,columnFixCount:Math.max(0,t),visibleList:s},{silent:!0}),this.unset("columnModelList",{silent:!0}),this.trigger("columnModelChange")},_onChange:function(e){var t=e.changed,i=t.columnFixCount,n=t.columnModelList;n||(n=this.get("dataColumnModelList")),this._setColumnModelList(n,i)},setHidden:function(e,t){for(var i,n,o,s;e.length;)i=e.shift(),o=this.getColumnModel(i),o?o.isHidden=t:(n=this.getUnitColumnNamesIfMerged(i),e.push.apply(e,n));s=this._makeVisibleColumnModelList(this.get("metaColumnModelList"),this.get("dataColumnModelList")),this.set("visibleList",s,{silent:!0}),this.trigger("columnModelChange")},getUnitColumnNamesIfMerged:function(e){var t,i,n,o=this.get("columnMerge"),s=[],a=[];for(s.push(e);s.length;)t=s.shift(),i=this.getColumnModel(t),i?a.push(t):(n=_.findWhere(o,{columnName:t}),n&&s.push.apply(s,n.columnNameList));return _.uniq(a)}});t.exports=s},{"../../base/model":5,"../../common/util":12}],17:[function(e,t,i){"use strict";var n=tui.util.defineClass({init:function(e){this.data=e},getRowSpanData:function(e,t,i){var n=null;return i&&(n=this.data.rowSpanData,e&&n&&(n=n[e])),!n&&e&&(n={count:0,isMainRow:!0,mainRowKey:t}),n},getRowState:function(){var e={isDisabledCheck:!1,isDisabled:!1,isChecked:!1};switch(this.data.rowState){case"DISABLED":e.isDisabled=!0;case"DISABLED_CHECK":e.isDisabledCheck=!0;break;case"CHECKED":e.isChecked=!0}return e},setRowState:function(e){this.data.rowState=e},setRowSpanData:function(e,t){var i=_.assign({},this.data.rowSpanData);e&&(t?i[e]=t:i[e]&&delete i[e],this.data.rowSpanData=i)},addCellClassName:function(e,t){var i,n;i=this.data.className||{},i.column=i.column||{},n=i.column[e]||[],_.contains(n,t)||(n.push(t),i.column[e]=n,this.data.className=i)},addClassName:function(e){var t,i;t=this.data.className||{},i=t.row||[],-1===tui.util.inArray(e,i)&&(i.push(e),t.row=i,this.data.className=t)},getClassNameList:function(e){var t=this.data.className,i=Array.prototype.push,n=[];return t&&(t.row&&i.apply(n,t.row),e&&t.column&&t.column[e]&&i.apply(n,t.column[e])),n},_removeClassNameFromArray:function(e,t){var i=e.join(" ").split(" ");return _.without(i,t)},removeCellClassName:function(e,t){var i=this.data.className;tui.util.pick(i,"column",e)&&(i.column[e]=this._removeClassNameFromArray(i.column[e],t),this.data.className=i)},removeClassName:function(e){var t=this.data.className;t&&t.row&&(t.row=this._removeClassNameFromArray(t.row,e),this.className=t)}});t.exports=n},{}],18:[function(e,t,i){"use strict";var n=e("../../base/model"),o=e("./extraDataManager"),s=e("../../common/util"),a=e("../../common/classNameConst"),l=["_button","_number","_extraData"],r="REQUIRED",d=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.extraDataManager=new o(this.get("_extraData")),this.columnModel=this.collection.columnModel,this.validateMap={},this.on("change",this._onChange,this)},idAttribute:"rowKey",parse:function(e){
return e._extraData||(e._extraData={}),e},_triggerExtraDataChangeEvent:function(){this.trigger("extraDataChanged",this.get("_extraData"))},_onChange:function(){var e=_.omit(this.changed,l);this.isDuplicatedPublicChanged(e)||_.each(e,function(e,t){var i=this.columnModel.getColumnModel(t);i&&this._executeChangeBeforeCallback(t)&&(this.collection.syncRowSpannedData(this,t,e),this._executeChangeAfterCallback(t),this.validateCell(t,!0))},this)},_validateCellData:function(e){var t=this.columnModel.getColumnModel(e),i=this.get(e),n="";return t.isRequired&&s.isBlank(i)&&(n=r),n},validateCell:function(e,t){var i;return!t&&e in this.validateMap?this.validateMap[e]:(i=this._validateCellData(e),i?this.addCellClassName(e,a.CELL_INVALID):this.removeCellClassName(e,a.CELL_INVALID),this.validateMap[e]=i,i)},_createChangeCallbackEvent:function(e){return{rowKey:this.get("rowKey"),columnName:e,value:this.get(e),instance:tui.Grid.getInstanceById(this.collection.gridId)}},_executeChangeBeforeCallback:function(e){var t,i,n=this.columnModel.getColumnModel(e);return n.editOption&&n.editOption.changeBeforeCallback&&(t=this._createChangeCallbackEvent(e),n.editOption.changeBeforeCallback(t)===!1)?(i={},i[e]=this.previous(e),this.set(i),this.trigger("restore",e),!1):!0},_executeChangeAfterCallback:function(e){var t,i=this.columnModel.getColumnModel(e);return i.editOption&&i.editOption.changeAfterCallback?(t=this._createChangeCallbackEvent(e),!!i.editOption.changeAfterCallback(t)):!0},getPrivateProperties:function(){return l},getRowState:function(){return this.extraDataManager.getRowState()},getClassNameList:function(e){var t=this.columnModel.getColumnModel(e),i=s.isMetaColumn(e),n=this.extraDataManager.getClassNameList(e),o=this.getCellState(e);return t.className&&n.push(t.className),t.isEllipsis&&n.push(a.CELL_ELLIPSIS),t.isRequired&&n.push(a.CELL_REQUIRED),i?n.push(a.CELL_HEAD):o.isEditable&&n.push(a.CELL_EDITABLE),o.isDisabled&&n.push(a.CELL_DISABLED),this._makeUniqueStringArray(n)},_makeUniqueStringArray:function(e){var t=_.uniq(e.join(" ").split(" "));return _.without(t,"")},getCellState:function(e){var t,i,n=["_number","normal"],o=this.columnModel,s=this.collection.isDisabled,a=!0,l=o.getEditType(e);return i=this.executeRelationCallbacksAll(["isDisabled","isEditable"])[e],t=this.getRowState(),s||(s="_button"===e?t.isDisabledCheck:t.isDisabled,s=s||!(!i||!i.isDisabled)),a=_.contains(n,l)?!1:!(i&&i.isEditable===!1),{isEditable:a,isDisabled:s}},isEditable:function(e){var t=this.getCellState(e);return!t.isDisabled&&t.isEditable},isDisabled:function(e){var t=this.getCellState(e);return t.isDisabled},getRowSpanData:function(e){var t=this.collection.isRowSpanEnable(),i=this.get("rowKey");return this.extraDataManager.getRowSpanData(e,i,t)},setRowSpanData:function(e,t){this.extraDataManager.setRowSpanData(e,t),this._triggerExtraDataChangeEvent()},setRowState:function(e,t){this.extraDataManager.setRowState(e),t||this._triggerExtraDataChangeEvent()},addCellClassName:function(e,t){this.extraDataManager.addCellClassName(e,t),this._triggerExtraDataChangeEvent()},addClassName:function(e){this.extraDataManager.addClassName(e),this._triggerExtraDataChangeEvent()},removeCellClassName:function(e,t){this.extraDataManager.removeCellClassName(e,t),this._triggerExtraDataChangeEvent()},removeClassName:function(e){this.extraDataManager.removeClassName(e),this._triggerExtraDataChangeEvent()},_getListTypeVisibleText:function(e){var t,i,n,o,a=this.get(e),l=this.columnModel.getColumnModel(e);return tui.util.isExisty(tui.util.pick(l,"editOption","list"))?(t=this.executeRelationCallbacksAll(["optionListChange"])[e],i=t&&t.optionList?t.optionList:l.editOption.list,n=typeof i[0].value,o=s.toString(a).split(","),n!==typeof o[0]&&(o=_.map(o,function(e){return s.convertValueType(e,n)})),_.each(o,function(e,t){var n=_.findWhere(i,{value:e});o[t]=n&&n.value||""},this),o.join(",")):""},_isListType:function(e){return _.contains(["select","radio","checkbox"],e)},isDuplicatedPublicChanged:function(e){return this._timeoutIdForChanged&&_.isEqual(this._lastPublicChanged,e)?!0:(clearTimeout(this._timeoutIdForChanged),this._timeoutIdForChanged=setTimeout(_.bind(function(){this._timeoutIdForChanged=null},this),10),this._lastPublicChanged=e,!1)},getValueString:function(e){var t=this.columnModel.getEditType(e),i=this.columnModel.getColumnModel(e),n=this.get(e);if(this._isListType(t)){if(!tui.util.isExisty(tui.util.pick(i,"editOption","list",0,"value")))throw this.error('Check "'+e+"\"'s editOption.list property out in your ColumnModel.");n=this._getListTypeVisibleText(e)}else"password"===t&&(n="");return s.toString(n)},executeRelationCallbacksAll:function(e){var t=this.attributes,i=this.columnModel.get("relationListMap"),n={};return _.isEmpty(e)&&(e=["optionListChange","isDisabled","isEditable"]),_.each(i,function(i,o){var s=t[o];_.each(i,function(i){this._executeRelationCallback(i,e,s,t,n)},this)},this),n},_getRelationResultAttrName:function(e){switch(e){case"optionListChange":return"optionList";case"isDisabled":return"isDisabled";case"isEditable":return"isEditable";default:return""}},_executeRelationCallback:function(e,t,i,n,o){var s=this.getRowState(),a=e.columnList;_.each(t,function(t){var l,r;s.isDisabled&&"isDisabled"===t||(r=e[t],"function"==typeof r&&(l=this._getRelationResultAttrName(t),l&&_.each(a,function(e){o[e]=o[e]||{},o[e][l]=r(i,n)},this)))},this)}},{privateProperties:l});t.exports=d},{"../../base/model":5,"../../common/classNameConst":8,"../../common/util":12,"./extraDataManager":17}],19:[function(e,t,i){"use strict";var n=e("../../base/collection"),o=e("./row"),s=n.extend({initialize:function(e,t){n.prototype.initialize.apply(this,arguments),this.setOwnProperties({columnModel:t.columnModel,domState:t.domState,gridId:t.gridId,lastRowKey:-1,originalRowList:[],originalRowMap:{},startIndex:t.startIndex||1,sortOptions:{columnName:"rowKey",isAscending:!0,useClient:_.isBoolean(t.useClientSort)?t.useClientSort:!0},isDisabled:!1}),this.sortOptions.useClient||(this.comparator=null)},model:o,parse:function(e){return e=e&&e.contents||e,this._formatData(e)},_formatData:function(e){var t=_.filter(e,_.isObject);return _.each(t,function(e,i){t[i]=this._baseFormat(t[i]),this.isRowSpanEnable()&&this._setExtraRowSpanData(t,i)},this),t},_baseFormat:function(e){var t={rowSpan:null,rowSpanData:null,rowState:null},i=this.columnModel.get("keyColumnName"),n=null===i?this._createRowKey():e[i];return e._extraData=$.extend(t,e._extraData),e._button="CHECKED"===e._extraData.rowState,e.rowKey=n,e},_createRowKey:function(){return this.lastRowKey+=1,this.lastRowKey},_setExtraRowSpanData:function(e,t){function i(e,t){var i=e._extraData;return!(!i.rowSpanData||!i.rowSpanData[t])}function n(e,t,i){var n=e._extraData;return n.rowSpanData=n&&n.rowSpanData||{},n.rowSpanData[t]=i,n}var o,s,a,l=e[t],r=l&&l._extraData&&l._extraData.rowSpan,d=l&&l.rowKey;return r&&_.each(r,function(r,u){if(!i(l,u))for(n(l,u,{count:r,isMainRow:!0,mainRowKey:d}),o=-1,a=t+1;t+r>a;a+=1)s=e[a],s[u]=l[u],s._extraData=s._extraData||{},n(s,u,{count:o,isMainRow:!1,mainRowKey:d}),o-=1}),e},setOriginalRowList:function(e){return this.originalRowList=e?this._formatData(e):this.toJSON(),this.originalRowMap=_.indexBy(this.originalRowList,"rowKey"),this.originalRowList},getOriginalRowList:function(e){return e=_.isUndefined(e)?!0:e,e?_.clone(this.originalRowList):this.originalRowList},getOriginalRow:function(e){return _.clone(this.originalRowMap[e])},getOriginal:function(e,t){return _.clone(this.originalRowMap[e][t])},getMainRowKey:function(e,t){var i,n=this.get(e);return this.isRowSpanEnable()&&(i=n&&n.getRowSpanData(t),e=i?i.mainRowKey:e),e},indexOfRowKey:function(e){return this.indexOf(this.get(e))},isRowSpanEnable:function(){return!this.isSortedByField()},isSortedByField:function(){return"rowKey"!==this.sortOptions.columnName},setSortOptionValues:function(e,t,i){var n=this.sortOptions,o=!1;_.isUndefined(e)&&(e="rowKey"),_.isUndefined(t)&&(t=!0),n.columnName===e&&n.isAscending===t||(o=!0),n.columnName=e,n.isAscending=t,o&&this.trigger("sortChanged",{columnName:e,isAscending:t,isRequireFetch:i})},sortByField:function(e,t){var i=this.sortOptions;_.isUndefined(t)&&(t=i.columnName===e?!i.isAscending:!0),this.setSortOptionValues(e,t,!i.useClient),i.useClient&&this.sort()},getRowList:function(e,t){var i,n;return e?(n=this.where({_button:!0}),i=[],_.each(n,function(e){i.push(e.attributes)},this)):i=this.toJSON(),t?i:this._removePrivateProp(i)},syncRowSpannedData:function(e,t,i){var n,o,s;if(this.isRowSpanEnable())if(o=e.getRowSpanData(t),o.isMainRow)for(n=this.indexOfRowKey(e.get("rowKey")),s=0;s<o.count-1;s+=1)this.at(s+1+n).set(t,i);else this.get(o.mainRowKey).set(t,i)},comparator:function(e,t){var i=this.sortOptions.columnName,n=this.sortOptions.isAscending,o=e.get(i),s=t.get(i),a=0;return s>o?a=-1:o>s&&(a=1),n||(a=-a),a},_removePrivateProp:function(e){return _.map(e,function(e){return _.omit(e,o.privateProperties)})},removeRow:function(e,t){var i,n,o,s=this.get(e);s&&(t&&t.keepRowSpanData&&(o=_.clone(s.attributes)),i=_.clone(s.getRowSpanData()),n=this.at(this.indexOf(s)+1),this.remove(s,{silent:!0}),this._syncRowSpanDataForRemove(i,n,o),t&&t.removeOriginalData&&this.setOriginalRowList(),this.trigger("remove"))},_syncRowSpanDataForRemove:function(e,t,i){e&&_.each(e,function(e,n){var o,s,a,l={};if(e.isMainRow){if(1===e.count)return;o=t,a=e.count-1,s=1,a>1&&(l.mainRowKey=o.get("rowKey"),l.isMainRow=!0),o.set(n,i?i[n]:"",{silent:!0})}else o=this.get(e.mainRowKey),a=o.getRowSpanData(n).count-1,s=-e.count;a>1?(l.count=a,o.setRowSpanData(n,l),this._updateSubRowSpanData(o,n,s,a)):o.setRowSpanData(n,null)},this)},_createDummyRow:function(){var e=this.columnModel.get("dataColumnModelList"),t={};return _.each(e,function(e){t[e.columnName]=""},this),t},append:function(e,t){var i,n=this._createModelList(e);return t=_.extend({at:this.length},t),i={at:t.at,add:!0,silent:!0},this.add(n,i),this._syncRowSpanDataForAppend(t.at,n.length,t.extendPrevRowSpan),this.trigger("add",n,t),n},prepend:function(e,t){return t=t||{},t.at=0,this.append(e,t)},getRowData:function(e,t){var i=this.get(e),n=i?i.toJSON():null;return t?JSON.stringify(n):n},getRowDataAt:function(e,t){var i=this.at(e),n=i?i.toJSON():null;return t?JSON.stringify(i):n},getValue:function(e,t,i){var n,o;return i?n=this.getOriginal(e,t):(o=this.get(e),n=o&&o.get(t)),n},setValue:function(e,t,i,n){var o,s=this.get(e),a={};return i=_.isString(i)?$.trim(i):i,s?(a[t]=i,s.set(a,{silent:n}),o=!0):o=!1,o},getColumnValues:function(e,t){var i=this.pluck(e);return t?JSON.stringify(i):i},setColumnValues:function(e,t,i,n){var o={},s={isDisabled:!1,isEditable:!0};o[e]=t,i=_.isUndefined(i)?!0:i,this.forEach(function(t){i&&(s=t.getCellState(e)),!s.isDisabled&&s.isEditable&&t.set(o,{silent:n})},this)},getRowSpanData:function(e,t){var i=this.get(e);return i?i.getRowSpanData(t):null},isChanged:function(){var e=_.values(this.getModifiedRowList());return _.some(e,function(e){return e.length>0})},setDisabled:function(e){this.isDisabled!==e&&(this.isDisabled=e,this.trigger("disabledChanged"))},enableRow:function(e){this.get(e).setRowState("")},disableRow:function(e){this.get(e).setRowState("DISABLED")},enableCheck:function(e){this.get(e).setRowState("")},disableCheck:function(e){this.get(e).setRowState("DISABLED_CHECK")},check:function(e,t){var i=this.get(e).getRowState().isDisabledCheck,n=this.columnModel.get("selectType");!i&&n&&("radio"===n&&this.uncheckAll(),this.setValue(e,"_button",!0,t))},uncheck:function(e,t){this.setValue(e,"_button",!1,t)},checkAll:function(){this.setColumnValues("_button",!0)},uncheckAll:function(){this.setColumnValues("_button",!1)},_createModelList:function(e){var t,i=[];return e=e||this._createDummyRow(),_.isArray(e)||(e=[e]),t=this._formatData(e),_.each(t,function(e){var t=new o(e,{collection:this,parse:!0});i.push(t)},this),i},_syncRowSpanDataForAppend:function(e,t,i){var n=this.at(e-1);n&&_.each(n.getRowSpanData(),function(e,o){var s,a,l,r;0!==e.count&&(e.isMainRow?(s=n,a=e,l=1):(s=this.get(e.mainRowKey),a=s.getRowSpanData()[o],l=-e.count+1),(a.count>l||i)&&(a.count+=t,r=a.count,this._updateSubRowSpanData(s,o,l,r)))},this)},_updateSubRowSpanData:function(e,t,i,n){var o,s,a=this.indexOf(e),l=e.get("rowKey");for(s=i;n>s;s+=1)o=this.at(a+s),o.set(t,e.get(t),{silent:!0}),o.setRowSpanData(t,{count:-s,mainRowKey:l,isMainRow:!1})},_isModifiedRow:function(e,t,i){var n=_.omit(e,i),o=_.some(n,function(e,i){return"object"==typeof e?JSON.stringify(e)!==JSON.stringify(t[i]):e!==t[i]},this);return o},getModifiedRowList:function(e){var t=e&&e.isRaw,i=e&&e.isOnlyChecked,n=e&&e.isOnlyRowKeyList,o=t?this.originalRowList:this._removePrivateProp(this.originalRowList),s=t?this.toJSON():this._removePrivateProp(this.toJSON()),a=e&&e.filteringColumnList,l={createList:[],updateList:[],deleteList:[]};return o=_.indexBy(o,"rowKey"),s=_.indexBy(s,"rowKey"),a=_.union(a,this.columnModel.getIgnoredColumnNameList()),_.each(s,function(e,t){var s=o[t],r=n?e.rowKey:e;(!i||i&&this.get(t).get("_button"))&&(s?this._isModifiedRow(e,s,a)&&l.updateList.push(r):l.createList.push(r))},this),_.each(o,function(e,t){var i=n?e.rowKey:e;s[t]||l.deleteList.push(i)},this),l},replaceRowList:function(e,t,i){e||(e=[]),_.isUndefined(t)&&(t=!0),this.trigger("beforeReset",e.length),this.lastRowKey=-1,this.reset(e,{parse:t}),_.isFunction(i)&&i()},setRowList:function(e,t,i){var n=_.bind(function(){this.setOriginalRowList(),_.isFunction(i)&&i()},this);this.replaceRowList(e,t,n)},restore:function(){var e=this.getOriginalRowList();this.replaceRowList(e,!0)},del:function(e,t,i){var n=this.getMainRowKey(e,t),o=this.get(n).getCellState(t),s=this.columnModel.getEditType(t),a=_.contains(["text","password"],s);a&&o.isEditable&&!o.isDisabled&&this.setValue(n,t,"",i)},paste:function(e,t){var i=this._getEndIndexToPaste(e,t);_.each(e,function(e,n){this._setValueForPaste(e,t.row+n,t.column,i.column)},this),this.trigger("paste",{startIdx:t,endIdx:i})},validate:function(){var e=[],t=_.chain(this.columnModel.getVisibleColumnModelList()).filter(function(e){return e.isRequired===!0}).pluck("columnName").value();return this.each(function(i){var n=[];_.each(t,function(e){var t=i.validateCell(e);t&&n.push({columnName:e,errorCode:t})}),n.length&&e.push({rowKey:i.get("rowKey"),errors:n})}),e},_getEndIndexToPaste:function(e,t){var i=this.columnModel.getVisibleColumnModelList(),n=e.length+t.row-1,o=Math.min(e[0].length+t.column,i.length)-1;return{row:n,column:o}},_setValueForPaste:function(e,t,i,n){var o,s,a,l,r=this.at(t),d=this.columnModel,u={};for(r||(r=this.append({})[0]),o=i;n>=o;o+=1)s=d.at(o,!0).columnName,a=r.getCellState(s),l=r.getRowSpanData(s),a.isEditable&&!a.isDisabled&&(!l||l.count>=0)&&(u[s]=e[o-i]);r.set(u)},getElement:function(e,t){var i=this.getMainRowKey(e,t);return this.domState.getElement(i,t)},getCheckedState:function(){var e=0,t=0;return this.forEach(function(i){var n=i.getCellState("_button");!n.isDisabled&&n.isEditable&&(e+=1,i.get("_button")&&(t+=1))}),{available:e,checked:t}}});t.exports=s},{"../../base/collection":3,"./row":18}],20:[function(e,t,i){"use strict";var n=e("../base/model"),o=e("../common/util"),s=e("../common/constMap").dimension,a=s.TABLE_BORDER_WIDTH,l=s.CELL_BORDER_WIDTH,r=n.extend({initialize:function(e,t){n.prototype.initialize.apply(this,arguments),this._columnWidthFixedFlags=null,this._minColumnWidthList=null,this.columnModel=t.columnModel,this.dataModel=t.dataModel,this.domState=t.domState,this.listenTo(this.columnModel,"columnModelChange",this._initColumnWidthVariables),this.listenTo(this.dataModel,"add remove reset",this._resetTotalRowHeight),this.on("change:width",this._onWidthChange,this),this.on("change:bodyHeight",this._resetDisplayRowCount,this),this.on("change:displayRowCount",this._resetBodyHeight,this),this._initColumnWidthVariables(),this._resetBodyHeight()},models:null,columnModel:null,defaults:{offsetLeft:0,offsetTop:0,width:0,headerHeight:0,bodyHeight:0,toolbarHeight:0,resizeHandleHeight:0,paginationHeight:0,rowHeight:0,totalRowHeight:0,rsideWidth:0,lsideWidth:0,columnWidthList:[],minimumColumnWidth:0,displayRowCount:1,scrollBarSize:17,scrollX:!0,scrollY:!0,fitToParentHeight:!1},_getAvailableTotalWidth:function(e){var t=this.get("width"),i=e+1+(this.isDivisionBorderDoubled()?1:0),n=i*l,o=t-this.getScrollYWidth()-n;return o},_applyMinimumColumnWidth:function(e){var t=this._minColumnWidthList,i=_.clone(e);return _.each(i,function(e,n){var o=t[n];o>e&&(i[n]=o)}),i},_resetTotalRowHeight:function(){var e=this.get("rowHeight"),t=this.dataModel.length;this.set("totalRowHeight",o.getHeight(t,e))},_resetDisplayRowCount:function(){var e,t;_.has(this.changed,"displayRowCount")||(e=this.get("bodyHeight")-this.getScrollXHeight(),t=o.getDisplayRowCount(e,this.get("rowHeight")),this.set("displayRowCount",t))},_fillEmptyColumnWidth:function(e){var t=this._getAvailableTotalWidth(e.length),i=t-o.sum(e),n=[];return _.each(e,function(e,t){e||n.push(t)}),this._distributeExtraWidthEqually(e,i,n)},_addExtraColumnWidth:function(e,t){var i=this._columnWidthFixedFlags,n=[];return _.each(i,function(e,t){e||n.push(t)}),this._distributeExtraWidthEqually(e,t,n)},_reduceExcessColumnWidth:function(e,t){var i=this._minColumnWidthList,n=this._columnWidthFixedFlags,o=[];return _.each(e,function(e,t){n[t]||o.push({index:t,width:e-i[t]})}),this._reduceExcessColumnWidthSub(_.clone(e),t,o)},_reduceExcessColumnWidthSub:function(e,t,i){var n,o=Math.round(t/i.length),s=[];return _.each(i,function(i){i.width<Math.abs(o)?(t+=i.width,e[i.index]-=i.width):s.push(i)}),i.length>s.length?this._reduceExcessColumnWidthSub(e,t,s):(n=_.pluck(i,"index"),this._distributeExtraWidthEqually(e,t,n))},_distributeExtraWidthEqually:function(e,t,i){var n=i.length,o=Math.round(t/n),s=o*n-t,a=_.clone(e);return _.each(i,function(e){a[e]+=o}),i.length&&(a[_.last(i)]-=s),a},_adjustColumnWidthList:function(e,t){var i,n=e.length,s=this._getAvailableTotalWidth(n),a=s-o.sum(e),l=_.filter(this._columnWidthFixedFlags).length;return a>0?n>l?i=this._addExtraColumnWidth(e,a):(i=_.clone(e),i[n-1]+=a):i=t&&0>a?this._reduceExcessColumnWidth(e,a):e,i},_initColumnWidthVariables:function(){var e=this.columnModel.getVisibleColumnModelList(null,!0),t=this.get("minimumColumnWidth"),i=[],n=[],s=[];_.each(e,function(e){var a=e.width>0?e.width:0,l=Math.max(a,t);o.isMetaColumn(e.columnName)&&(l=a),i.push(a?l:0),s.push(l),n.push(!!e.isFixedWidth)},this),this._columnWidthFixedFlags=n,this._minColumnWidthList=s,this._setColumnWidthVariables(this._calculateColumnWidth(i),!0)},_calculateColumnWidth:function(e){return e=this._fillEmptyColumnWidth(e),e=this._applyMinimumColumnWidth(e),e=this._adjustColumnWidthList(e)},isDivisionBorderDoubled:function(){return this.columnModel.getVisibleColumnFixCount()>0},getFrameWidth:function(e){var t=this.columnModel.getVisibleColumnFixCount(!0),i=this.getColumnWidthList(e),n=this._getFrameWidth(i);return _.isUndefined(e)&&t>0&&(n+=l),n},_getFrameWidth:function(e){var t=0;return e.length&&(t=o.sum(e)+(e.length+1)*l),t},_setColumnWidthVariables:function(e,t){var i,n,o,s,a=this.get("width"),l=this.columnModel.getVisibleColumnFixCount(!0),r=this._getMaxLeftSideWidth();o=e.slice(0,l),s=e.slice(l),n=this._getFrameWidth(o),r&&n>r&&(o=this._adjustLeftSideWidthList(o,r),n=this._getFrameWidth(o),e=o.concat(s)),i=a-n,this.set({columnWidthList:e,rsideWidth:i,lsideWidth:n}),t&&this.set("originalWidthList",_.clone(e)),this.trigger("columnWidthChanged")},_getMinLeftSideWidth:function(){var e,t=this.get("minimumColumnWidth"),i=this.columnModel.getVisibleColumnFixCount(!0),n=0;return i&&(e=(i+1)*l,n=e+t*i),n},_getMaxLeftSideWidth:function(){var e=Math.ceil(.9*this.get("width"));return e&&(e=Math.max(e,this._getMinLeftSideWidth())),e},_getCellHorizontalPosition:function(e){for(var t=this.columnModel,i=t.getVisibleMetaColumnCount(),n=this.get("columnWidthList"),o=t.getVisibleColumnFixCount()+i,s=t.indexOfColumnName(e,!0)+i,a=o>s?0:o,r=0;s>a;a+=1)r+=n[a]+l;return{left:r,right:r+n[s]+l}},_getCellVerticalPosition:function(e,t){var i=this.dataModel,n=this.get("rowHeight"),s=i.indexOfRowKey(e),a=o.getHeight(s,n),l=o.getHeight(t,n);return{top:a,bottom:a+l}},_getRowSpanCount:function(e,t){var i=this.dataModel.get(e).getRowSpanData(t);return i.isMainRow||(e=i.mainRowKey,i=this.dataModel.get(e).getRowSpanData(t)),i.count||1},getCellPosition:function(e,t){var i,n,o;return e=this.dataModel.getMainRowKey(e,t),this.dataModel.get(e)?(i=this._getRowSpanCount(e,t),n=this._getCellVerticalPosition(e,i),o=this._getCellHorizontalPosition(t),{top:n.top,bottom:n.bottom,left:o.left,right:o.right}):{}},getScrollPosition:function(e,t){var i=!this.columnModel.isLside(t),n=this.getCellPosition(e,t),o=this._getBodySize(),s=this._judgeScrollDirection(n,i,o);return this._makeScrollPosition(s,n,o)},_getBodySize:function(){var e=this.get("lsideWidth"),t=this.get("rsideWidth")-this.getScrollYWidth(),i=this.get("bodyHeight")-this.getScrollXHeight();return{height:i,rsideWidth:t,totalWidth:e+t}},_judgeScrollDirection:function(e,t,i){var n,o,s,a,l=this.renderModel,r=l.get("scrollTop"),d=l.get("scrollLeft");return n=e.top<r,o=!n&&e.bottom>r+i.height,t?(s=e.left<d,a=!s&&e.right>d+i.rsideWidth-1):s=a=!1,{isUp:n,isDown:o,isLeft:s,isRight:a}},_makeScrollPosition:function(e,t,i){var n={};return e.isUp?n.scrollTop=t.top:e.isDown&&(n.scrollTop=t.bottom-i.height),e.isLeft?n.scrollLeft=t.left:e.isRight&&(n.scrollLeft=t.right-i.rsideWidth+a),n},getOverflowFromMousePosition:function(e,t){var i=this._rebasePositionToContainer(e,t),n=this._getBodySize();return this._judgeOverflow(i,n)},_judgeOverflow:function(e,t){var i=e.x,n=e.y,o=0,s=0;return 0>n?o=-1:n>t.height&&(o=1),0>i?s=-1:i>t.totalWidth&&(s=1),{x:s,y:o}},getIndexFromMousePosition:function(e,t,i){var n=this._rebasePositionToContainer(e,t);return{row:this._calcRowIndexFromPositionY(n.y),column:this._calcColumnIndexFromPositionX(n.x,i)}},_calcRowIndexFromPositionY:function(e){var t=e+this.renderModel.get("scrollTop"),i=Math.floor(t/(this.get("rowHeight")+l)),n=0,s=Math.max(n,this.dataModel.length-1);return o.clamp(i,n,s)},_calcColumnIndexFromPositionX:function(e,t){var i=this.getColumnWidthList(),n=this.getFrameWidth(),o=e,s=e>=this.get("lsideWidth"),a=t?0:this.columnModel.getVisibleMetaColumnCount(),r=0;return s&&(o+=this.renderModel.get("scrollLeft")),o>=n?r=i.length-1:tui.util.forEachArray(i,function(e,t){return e+=l,r=t,o>e?void(o-=e):!1}),Math.max(0,r-a)},_rebasePositionToContainer:function(e,t){var i=this.get("offsetLeft"),n=this.get("offsetTop")+this.get("headerHeight")+this.get("toolbarHeight")+l+a;return{x:e-i,y:t-n}},_adjustLeftSideWidthList:function(e,t){var i,n=e.length-1,o=this.get("minimumColumnWidth"),s=this._getFrameWidth(e),a=s-t;if(a>0)for(;n>=0&&a>0;)i=Math.max(o,e[n]-a),a-=e[n]-i,e[n]=i,n-=1;else 0>a&&(e[n]+=Math.abs(a));return e},_resetBodyHeight:function(){var e;_.has(this.changed,"bodyHeight")||(e=o.getHeight(this.get("displayRowCount"),this.get("rowHeight")),this.set("bodyHeight",e+this.getScrollXHeight()))},getScrollXHeight:function(){return this.get("scrollX")?this.get("scrollBarSize"):0},getScrollYWidth:function(){return this.get("scrollY")?this.get("scrollBarSize"):0},_onWidthChange:function(){var e=this._adjustColumnWidthList(this.get("columnWidthList"),!0);this._setColumnWidthVariables(e)},setColumnWidth:function(e,t){var i,n=this.get("columnWidthList"),o=this._columnWidthFixedFlags,s=this._minColumnWidthList[e];!o[e]&&n[e]&&(n[e]=Math.max(t,s),o[e]=!0,i=this._adjustColumnWidthList(n),o[e]=!1,this._setColumnWidthVariables(i))},_calcRealBodyHeight:function(e){return e-this.get("headerHeight")-this.get("toolbarHeight")-a},_getMinBodyHeight:function(){return this.get("rowHeight")+2*l+this.getScrollXHeight()},_setHeight:function(e){this.set("bodyHeight",Math.max(this._calcRealBodyHeight(e),this._getMinBodyHeight()))},setSize:function(e,t){e>0&&this.set("width",e),t>0&&this._setHeight(t),this.trigger("setSize")},getHeight:function(){return this.get("bodyHeight")+this.get("headerHeight")+this.get("toolbarHeight")},refreshLayout:function(){var e=this.domState,t=e.getOffset();this.set({offsetTop:t.top,offsetLeft:t.left,width:e.getWidth()}),this.get("fitToParentHeight")&&this._setHeight(e.getParentHeight())},restoreColumnWidth:function(e){var t=this.get("originalWidthList")[e];this.setColumnWidth(e,t)},getColumnWidthList:function(e){var t=this.columnModel.getVisibleColumnFixCount(!0),i=[];switch(e){case"l":case"L":i=this.get("columnWidthList").slice(0,t);break;case"r":case"R":i=this.get("columnWidthList").slice(t);break;default:i=this.get("columnWidthList")}return i}});t.exports=r},{"../base/model":5,"../common/constMap":9,"../common/util":12}],21:[function(e,t,i){"use strict";var n=e("../base/model"),o=e("../common/util"),s=e("../common/gridEvent"),a=n.extend({initialize:function(e,t){n.prototype.initialize.apply(this,arguments),this.dataModel=t.dataModel,this.columnModel=t.columnModel,this.dimensionModel=t.dimensionModel,this.domState=t.domState,this.listenTo(this.dataModel,"reset",this._onResetData)},defaults:{rowKey:null,columnName:"",prevRowKey:null,prevColumnName:"",editingAddress:null},_onResetData:function(){this.unselect(!0)},_savePrevious:function(){null!==this.get("rowKey")&&this.set("prevRowKey",this.get("rowKey")),this.get("columnName")&&this.set("prevColumnName",this.get("columnName"))},_clearPrevious:function(){this.set({prevRowKey:null,prevColumnName:""})},isCurrentCell:function(e,t,i){var n=this.get("columnName"),o=this.get("rowKey");return i&&(o=this.dataModel.getMainRowKey(o,n)),String(o)===String(e)&&n===t},select:function(e){var t=new s,i=this.get("rowKey");return String(i)===String(e)?!0:(t.setData({rowKey:e,prevRowKey:i,rowData:this.dataModel.getRowData(e)}),this.trigger("select",t),t.isStopped()?(this._cancelSelect(),!1):(this.set("rowKey",e),"radio"===this.columnModel.get("selectType")&&this.dataModel.check(e),!0))},_cancelSelect:function(){var e=this.get("prevColumnName");this.set("columnName",e),this.trigger("focus",this.get("rowKey"),e)},unselect:function(e){e&&this.blur(),this.set({rowKey:null})},focus:function(e,t,i){return!this._isValidCell(e,t)||o.isMetaColumn(t)||this.isCurrentCell(e,t)?!0:(this.blur(),this.select(e)?(this.set("columnName",t),this.trigger("focus",e,t),i&&this.scrollToFocus(),!0):!1)},focusAt:function(e,t,i){var n=this.dataModel.at(e),o=this.columnModel.at(t,!0),s=!1;return n&&o&&(s=this.focus(n.get("rowKey"),o.columnName,i)),s},focusIn:function(e,t,i){var n=this.focus(e,t,i);return n&&(e=this.dataModel.getMainRowKey(e,t),this.dataModel.get(e).isEditable(t)?(this.finishEditing(),this.startEditing(e,t)):this.focusClipboard()),n},focusInAt:function(e,t,i){var n=this.dataModel.at(e),o=this.columnModel.at(t,!0),s=!1;return n&&o&&(s=this.focusIn(n.get("rowKey"),o.columnName,i)),s},focusClipboard:function(){this.trigger("focusClipboard")},refreshState:function(){var e;this.domState.hasFocusedElement()?this.has()||(e=this.restore(),e||this.focusAt(0,0)):this.blur()},scrollToFocus:function(){var e=this.get("rowKey"),t=this.get("columnName"),i=this.dimensionModel.getScrollPosition(e,t);tui.util.isEmpty(i)||this.renderModel.set(i)},blur:function(){var e=this.get("columnName");return this.has()?(this.has(!0)&&this._savePrevious(),null!==this.get("rowKey")&&this.set("columnName",""),this.trigger("blur",this.get("rowKey"),e),this):this},which:function(){return{rowKey:this.get("rowKey"),columnName:this.get("columnName")}},indexOf:function(e){var t=e?this.get("prevRowKey"):this.get("rowKey"),i=e?this.get("prevColumnName"):this.get("columnName");return{row:this.dataModel.indexOfRowKey(t),column:this.columnModel.indexOfColumnName(i,!0)}},has:function(e){var t=this.get("rowKey"),i=this.get("columnName");return e?this._isValidCell(t,i):!o.isBlank(t)&&!o.isBlank(i)},restore:function(){var e=this.get("prevRowKey"),t=this.get("prevColumnName"),i=!1;return this._isValidCell(e,t)&&(this.focus(e,t),i=!0),i},isEditingCell:function(e,t){var i=this.get("editingAddress");return i&&String(i.rowKey)===String(e)&&i.columnName===t},startEditing:function(e,t){if(this.get("editingAddress"))return!1;if(_.isUndefined(e)&&_.isUndefined(t))e=this.get("rowKey"),t=this.get("columnName");else if(!this.isCurrentCell(e,t,!0))return!1;return e=this.dataModel.getMainRowKey(e,t),this.dataModel.get(e).isEditable(t)?(this.set("editingAddress",{rowKey:e,columnName:t}),!0):!1},finishEditing:function(){return this.get("editingAddress")?(this.set("editingAddress",null),!0):!1},_isValidCell:function(e,t){var i=!o.isBlank(e)&&!!this.dataModel.get(e),n=!o.isBlank(t)&&!!this.columnModel.getColumnModel(t);return i&&n},_findRowKey:function(e){var t,i,n=this.dataModel,o=null;return this.has(!0)&&(t=Math.max(Math.min(n.indexOfRowKey(this.get("rowKey"))+e,this.dataModel.length-1),0),i=n.at(t),i&&(o=i.get("rowKey"))),o},_findColumnName:function(e){var t,i=this.columnModel,n=i.getVisibleColumnModelList(),o=i.indexOfColumnName(this.get("columnName"),!0),s=null;return this.has(!0)&&(t=Math.max(Math.min(o+e,n.length-1),0),s=n[t]&&n[t].columnName),s},_getRowSpanData:function(e,t){return this.dataModel.get(e).getRowSpanData(t)},nextRowIndex:function(e){var t=this.nextRowKey(e);return this.dataModel.indexOfRowKey(t)},prevRowIndex:function(e){var t=this.prevRowKey(e);return this.dataModel.indexOfRowKey(t)},nextColumnIndex:function(){var e=this.nextColumnName();return this.columnModel.indexOfColumnName(e,!0)},prevColumnIndex:function(){var e=this.prevColumnName();return this.columnModel.indexOfColumnName(e,!0)},nextRowKey:function(e){var t,i,n=this.which(),o=n.rowKey;return e="number"==typeof e?e:1,e>1?(o=this._findRowKey(e),i=this._getRowSpanData(o,n.columnName),i.isMainRow||(o=this._findRowKey(i.count+e))):(i=this._getRowSpanData(o,n.columnName),i.isMainRow&&i.count>0?o=this._findRowKey(i.count):i.isMainRow?o=this._findRowKey(1):(t=i.count,i=this._getRowSpanData(i.mainRowKey,n.columnName),o=this._findRowKey(i.count+t))),o},prevRowKey:function(e){var t,i=this.which(),n=i.rowKey;return e="number"==typeof e?e:1,e*=-1,-1>e?(n=this._findRowKey(e),t=this._getRowSpanData(n,i.columnName),t.isMainRow||(n=this._findRowKey(t.count+e))):(t=this._getRowSpanData(n,i.columnName),n=t.isMainRow?this._findRowKey(-1):this._findRowKey(t.count-1)),n},nextColumnName:function(){return this._findColumnName(1)},prevColumnName:function(){return this._findColumnName(-1)},firstRowKey:function(){return this.dataModel.at(0).get("rowKey")},lastRowKey:function(){return this.dataModel.at(this.dataModel.length-1).get("rowKey")},firstColumnName:function(){var e=this.columnModel.getVisibleColumnModelList();return e[0].columnName},lastColumnName:function(){var e=this.columnModel.getVisibleColumnModelList(),t=e.length-1;return e[t].columnName}});t.exports=a},{"../base/model":5,"../common/gridEvent":11,"../common/util":12}],22:[function(e,t,i){"use strict";var n=e("./data/columnModel"),o=e("./data/rowList"),s=e("./toolbar"),a=e("./dimension"),l=e("./focus"),r=e("./renderer"),d=e("./renderer-smart"),u=e("./selection"),c={columnFixCount:0,columnModelList:[],keyColumnName:null,selectType:"",autoNumbering:!0,headerHeight:35,rowHeight:27,fitToParentHeight:!1,showDummyRows:!1,displayRowCount:10,minimumColumnWidth:50,notUseSmartRendering:!1,columnMerge:[],scrollX:!0,scrollY:!0,useClientSort:!0,toolbar:null},h=tui.util.defineClass({init:function(e,t){e=$.extend(!0,{},c,e),this.gridId=e.gridId,this.columnModel=this._createColumnModel(e),this.dataModel=this._createDataModel(e,t),this.toolbarModel=this._createToolbarModel(e),this.dimensionModel=this._createDimensionModel(e,t),this.focusModel=this._createFocusModel(t),this.renderModel=this._createRenderModel(e),this.selectionModel=this._createSelectionModel(),this.focusModel.renderModel=this.renderModel,this.dimensionModel.renderModel=this.renderModel},_createColumnModel:function(e){return new n({hasNumberColumn:e.autoNumbering,keyColumnName:e.keyColumnName,columnFixCount:e.columnFixCount,selectType:e.selectType,columnMerge:e.columnMerge,columnModelList:e.columnModelList
})},_createDataModel:function(e,t){return new o([],{gridId:this.gridId,domState:t,columnModel:this.columnModel,useClientSort:e.useClientSort})},_createToolbarModel:function(e){return new s(e.toolbar)},_createDimensionModel:function(e,t){var i={headerHeight:e.headerHeight,rowHeight:e.rowHeight,fitToParentHeight:e.fitToParentHeight,scrollX:!!e.scrollX,scrollY:!!e.scrollY,minimumColumnWidth:e.minimumColumnWidth,displayRowCount:e.displayRowCount};return new a(i,{columnModel:this.columnModel,dataModel:this.dataModel,domState:t})},_createFocusModel:function(e){return new l(null,{columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel,renderModel:this.renderModel,domState:e})},_createSelectionModel:function(){return new u(null,{columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel,renderModel:this.renderModel,focusModel:this.focusModel})},_createRenderModel:function(e){var t,i,n;return t={emptyMessage:e.emptyMessage,showDummyRows:e.showDummyRows},i={columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel,focusModel:this.focusModel},new(n=e.notUseSmartRendering?r:d)(t,i)},destroy:function(){_.each(this,function(e,t){e&&tui.util.isFunction(e._destroy)&&e._destroy(),e&&tui.util.isFunction(e.stopListening)&&e.stopListening(),this[t]=null},this)}});t.exports=h},{"./data/columnModel":16,"./data/rowList":19,"./dimension":20,"./focus":21,"./renderer":24,"./renderer-smart":23,"./selection":27,"./toolbar":28}],23:[function(e,t,i){"use strict";var n=e("./renderer"),o=e("../common/util"),s=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("change:scrollTop",this._onChange,this),this.listenTo(this.dimensionModel,"change:bodyHeight",this._onChange,this),this.setOwnProperties({hiddenRowCount:10,criticalPoint:3})},_onChange:function(){this._isRenderable(this.get("scrollTop"))&&this.refresh()},_setRenderingRange:function(e){var t,i=this.dimensionModel,n=this.dataModel,s=i.get("rowHeight"),a=i.get("displayRowCount"),l=Math.max(0,Math.ceil(e/(s+1))-this.hiddenRowCount),r=Math.min(n.length-1,l+a+2*this.hiddenRowCount);n.isRowSpanEnable()&&(l+=this._getStartRowSpanMinCount(l),r+=this._getEndRowSpanMaxCount(r)),t=0===l?0:o.getHeight(l,s),this.set({top:t,startIndex:l,endIndex:r})},_getStartRowSpanMinCount:function(e){var t,i=this.dataModel.at(e),n=0;return i&&(t=_.pluck(i.getRowSpanData(),"count"),t.push(0),n=_.min(t)),n},_getEndRowSpanMaxCount:function(e){var t,i=this.dataModel.at(e),n=0;return i&&(t=_.pluck(i.getRowSpanData(),"count"),t.push(0),n=_.max(t)),n},_isRenderable:function(e){var t=this.dimensionModel,i=this.dataModel,n=t.get("rowHeight"),o=t.get("bodyHeight"),s=i.length,a=Math.max(0,Math.ceil(e/(n+1))),l=Math.min(i.length-1,Math.floor((e+o)/(n+1))),r=this.get("startIndex"),d=this.get("endIndex");return 0!==r&&r+this.criticalPoint>a?!0:d!==s-1&&d-this.criticalPoint<l}});t.exports=s},{"../common/util":12,"./renderer":24}],24:[function(e,t,i){"use strict";var n=e("../base/model"),o=e("./rowList"),s=e("../common/constMap").renderState,a=1e3,l=n.extend({initialize:function(e,t){var i,n,s;this.setOwnProperties({dataModel:t.dataModel,columnModel:t.columnModel,focusModel:t.focusModel,dimensionModel:t.dimensionModel}),s={dataModel:this.dataModel,columnModel:this.columnModel,focusModel:this.focusModel},i=new o([],s),n=new o([],s),this.set({lside:i,rside:n}),this.listenTo(this.columnModel,"all",this._onColumnModelChange).listenTo(this.dataModel,"remove sort reset",this._onDataModelChange).listenTo(this.dataModel,"add",this._onAddDataModel).listenTo(this.dataModel,"beforeReset",this._onBeforeResetData).listenTo(i,"valueChange",this._executeRelation).listenTo(n,"valueChange",this._executeRelation).listenTo(this.focusModel,"change:editingAddress",this._onEditingAddressChange).listenTo(this.dimensionModel,"change:width",this._updateMaxScrollLeft).listenTo(this.dimensionModel,"change:totalRowHeight change:scrollBarSize change:bodyHeight",this._updateMaxScrollTop),this.get("showDummyRows")&&this.listenTo(this.dimensionModel,"change:displayRowCount",this._resetDummyRows),this._onChangeLayoutBound=_.bind(this._onChangeLayout,this),this.listenTo(this.dimensionModel,"columnWidthChanged",this.finishEditing),this._updateMaxScrollLeft()},defaults:{top:0,scrollTop:0,scrollLeft:0,maxScrollLeft:0,maxScrollTop:0,startIndex:0,endIndex:0,startNumber:1,lside:null,rside:null,showDummyRows:!1,dummyRowCount:0,emptyMessage:null,state:s.DONE},_onChangeLayout:function(){this.focusModel.finishEditing(),this.focusModel.focusClipboard()},_updateMaxScrollLeft:function(){var e=this.dimensionModel,t=e.getFrameWidth("R")-e.get("rsideWidth")+e.getScrollYWidth();this.set("maxScrollLeft",t)},_updateMaxScrollTop:function(){var e=this.dimensionModel,t=e.get("totalRowHeight")-e.get("bodyHeight")+e.get("scrollBarSize");this.set("maxScrollTop",t)},_onBeforeResetData:function(e){e>a&&this.set("state",s.LOADING)},_onEditingAddressChange:function(e,t){var i=t,n=!0,o=this;t||(i=e.previous("editingAddress"),n=!1),this._updateCellData(i.rowKey,i.columnName,{isEditing:n}),this._triggerEditingStateChanged(i.rowKey,i.columnName),_.defer(function(){o._toggleChangeLayoutEventHandlers(n)})},_toggleChangeLayoutEventHandlers:function(e){var t="change:scrollTop change:scrollLeft",i="columnWidthChanged";e?(this.listenToOnce(this.dimensionModel,i,this._onChangeLayoutBound),this.once(t,this._onChangeLayoutBound)):(this.stopListening(this.dimensionModel,i,this._onChangeLayoutBound),this.off(t,this._onChangeLayoutBound))},_triggerEditingStateChanged:function(e,t){var i=this.getCellData(e,t);tui.util.pick(i,"columnModel","editOption","useViewMode")!==!1&&this.trigger("editingStateChanged",i)},_updateCellData:function(e,t,i){var n=this._getRowModel(e,t);n&&n.setCell(t,i)},initializeVariables:function(){this.set({top:0,scrollTop:0,scrollLeft:0,startIndex:0,endIndex:0,startNumber:1})},getCollection:function(e){return this.get(tui.util.isString(e)?e.toLowerCase()+"side":"rside")},_onColumnModelChange:function(){this.set({scrollTop:0,top:0,startIndex:0,endIndex:0}),this.refresh({columnModelChanged:!0})},_onDataModelChange:function(){this.refresh({dataModelChanged:!0})},_onAddDataModel:function(e,t){this.refresh({dataModelChanged:!0}),t.focus&&this.focusModel.focusAt(t.at,0)},_resetDummyRows:function(){this._clearDummyRows(),this._fillDummyRows(),this.trigger("dataModelChanged")},_setRenderingRange:function(){this.set({startIndex:0,endIndex:this.dataModel.length-1})},_createViewDataFromDataModel:function(e,t,i,n){var o={height:i,rowNum:n,rowKey:e.get("rowKey"),_extraData:e.get("_extraData")};return _.each(t,function(t){var i=e.get(t);"_number"!==t||_.isNumber(i)||(i=n),o[t]=i}),o},_getColumnNamesOfEachSide:function(){var e=this.columnModel.getVisibleColumnFixCount(!0),t=this.columnModel.getVisibleColumnModelList(null,!0),i=_.pluck(t,"columnName");return{lside:i.slice(0,e),rside:i.slice(e)}},_resetViewModelList:function(e,t){this.get(e).clear().reset(t,{parse:!0})},_resetAllViewModelListWithRange:function(e,t){var i,n,o=this._getColumnNamesOfEachSide(),s=this.get("startNumber")+e,a=this.dimensionModel.get("rowHeight"),l=[],r=[];for(n=e;t>=n;n+=1)i=this.dataModel.at(n),l.push(this._createViewDataFromDataModel(i,o.lside,a,s)),r.push(this._createViewDataFromDataModel(i,o.rside,a,s)),s+=1;this._resetViewModelList("lside",l),this._resetViewModelList("rside",r)},_getActualRowCount:function(){return this.get("endIndex")-this.get("startIndex")+1},_clearDummyRows:function(){var e=this.get("endIndex")-this.get("startIndex")+1;_.each(["lside","rside"],function(t){for(var i=this.get(t);i.length>e;)i.pop()},this)},_fillDummyRows:function(){var e=this.dimensionModel.get("displayRowCount"),t=this._getActualRowCount(),i=Math.max(e-t,0),n=this.dimensionModel.get("rowHeight"),o=this.get("startNumber")+this.get("endIndex")+1;_.times(i,function(){_.each(["lside","rside"],function(e){this.get(e).add({height:n,rowNum:o})},this),o+=1},this),this.set("dummyRowCount",i)},refresh:function(e){var t,i,n,o=!!e&&e.columnModelChanged,s=!!e&&e.dataModelChanged;for(this._setRenderingRange(this.get("scrollTop")),t=this.get("startIndex"),i=this.get("endIndex"),this._resetAllViewModelListWithRange(t,i),this.get("showDummyRows")&&this._fillDummyRows(),n=t;i>=n;n+=1)this._executeRelation(n);o?this.trigger("columnModelChanged"):this.trigger("rowListChanged",s),this._refreshState()},_refreshState:function(){this.dataModel.length?this.set("state",s.DONE):this.set("state",s.EMPTY)},_getCollectionByColumnName:function(e){var t,i=this.get("lside");return t=i.at(0)&&i.at(0).get(e)?i:this.get("rside")},_getRowModel:function(e,t){var i=this._getCollectionByColumnName(t);return i.get(e)},getCellData:function(e,t){var i=this._getRowModel(e,t),n=null;return i&&(n=i.get(t)),n},_executeRelation:function(e){var t,i,n=this.dataModel.at(e),o=e-this.get("startIndex");i=n.executeRelationCallbacksAll(),_.each(i,function(e,i){t=this._getCollectionByColumnName(i).at(o),t&&t.setCell(i,e)},this)}});t.exports=l},{"../base/model":5,"../common/constMap":9,"./rowList":26}],25:[function(e,t,i){"use strict";var n=e("../base/model"),o=e("../common/util"),s=n.extend({initialize:function(e){var t=e&&e.rowKey,i=this.collection.dataModel,n=i.get(t);this.dataModel=i,this.columnModel=this.collection.columnModel,this.focusModel=this.collection.focusModel,n&&(this.listenTo(n,"change",this._onDataModelChange),this.listenTo(n,"restore",this._onDataModelRestore),this.listenTo(n,"extraDataChanged",this._setRowExtraData),this.listenTo(i,"disabledChanged",this._onDataModelDisabledChanged),this.rowData=n)},idAttribute:"rowKey",_onDataModelChange:function(e){_.each(e.changed,function(t,i){var n,o;this.has(i)&&(n=this.columnModel.getColumnModel(i),o=this.columnModel.isTextType(i),this.setCell(i,this._getValueAttrs(t,e,n,o)))},this)},_onDataModelRestore:function(e){var t=this.get(e);t&&this.trigger("restore",t)},_getColumnNameList:function(){var e=this.collection.columnModel.getVisibleColumnModelList(null,!0);return _.pluck(e,"columnName")},_onDataModelDisabledChanged:function(){var e=this._getColumnNameList();_.each(e,function(e){this.setCell(e,{isDisabled:this.rowData.isDisabled(e),className:this._getClassNameString(e)})},this)},_setRowExtraData:function(){tui.util.isUndefined(this.collection)||_.each(this._getColumnNameList(),function(e){var t,i=this.get(e);!tui.util.isUndefined(i)&&i.isMainRow&&(t=this.rowData.getCellState(e),this.setCell(e,{isDisabled:t.isDisabled,isEditable:t.isEditable,className:this._getClassNameString(e)}))},this)},parse:function(e,t){var i=t.collection;return this._formatData(e,i.dataModel,i.columnModel,i.focusModel)},_formatData:function(e,t,i,n){var o,s,a=e.rowKey,l=e.rowNum;return _.isUndefined(a)?e:(s=t.get(a),o=_.omit(e,"rowKey","_extraData","height","rowNum"),_.each(o,function(o,r){var d=this._getRowSpanData(r,e,t.isRowSpanEnable()),u=s.getCellState(r),c=i.isTextType(r),h=i.getColumnModel(r);e[r]={rowKey:a,rowNum:l,columnName:r,rowSpan:d.count,isMainRow:d.isMainRow,mainRowKey:d.mainRowKey,isEditable:u.isEditable,isDisabled:u.isDisabled,isEditing:n.isEditingCell(a,r),optionList:tui.util.pick(h,"editOption","list"),className:this._getClassNameString(r,s,n),columnModel:h,changed:[]},_.assign(e[r],this._getValueAttrs(o,s,h,c))},this),e)},_getClassNameString:function(e,t,i){var n;return t||(t=this.dataModel.get(this.get("rowKey")))?(i||(i=this.focusModel),n=t.getClassNameList(e),n.join(" ")):""},_getValueAttrs:function(e,t,i,n){var o=tui.util.pick(i,"editOption","beforeContent"),s=tui.util.pick(i,"editOption","afterContent"),a=tui.util.pick(i,"editOption","converter"),l=t.toJSON();return{value:this._getValueToDisplay(e,i,n),formattedValue:this._getFormattedValue(e,l,i),beforeContent:this._getExtraContent(o,e,l),afterContent:this._getExtraContent(s,e,l),convertedHTML:this._getConvertedHTML(a,e,l)}},_getFormattedValue:function(e,t,i){var n;return n=_.isFunction(i.formatter)?i.formatter(e,t,i):e,_.isNumber(n)?n=String(n):n||(n=""),n},_getExtraContent:function(e,t,i){var n="";return _.isFunction(e)?n=e(t,i):tui.util.isExisty(e)&&(n=e),n},_getConvertedHTML:function(e,t,i){var n=null;return _.isFunction(e)&&(n=e(t,i)),n===!1&&(n=null),n},_getValueToDisplay:function(e,t,i){var n=tui.util.isExisty,o=t.notUseHtmlEntity,s=t.defaultValue;return n(e)||(e=n(s)?s:""),i&&!o&&tui.util.hasEncodableString(e)&&(e=tui.util.encodeHTMLEntity(e)),e},_getRowSpanData:function(e,t,i){var n=tui.util.pick(t,"_extraData","rowSpanData",e);return i&&n||(n={mainRowKey:t.rowKey,count:0,isMainRow:!0}),n},updateClassName:function(e){this.setCell(e,{className:this._getClassNameString(e)})},setCell:function(e,t){var i,n,s,a=!1,l=[];this.has(e)&&(n=this.get("rowKey"),s=_.clone(this.get(e)),_.each(t,function(e,t){o.isEqual(s[t],e)||(a="value"===t?!0:a,s[t]=e,l.push(t))},this),l.length&&(s.changed=l,this.set(e,s,{silent:this._shouldSetSilently(s,a)}),a&&(i=this.collection.dataModel.indexOfRowKey(n),this.trigger("valueChange",i))))},_shouldSetSilently:function(e,t){var i=e.isEditing&&t,n=tui.util.pick(e,"columnModel","editOption","useViewMode")!==!1,o=_.contains(e.changed,"isEditing")&&e.isEditing;return i||n&&o}});t.exports=s},{"../base/model":5,"../common/util":12}],26:[function(e,t,i){"use strict";var n=e("../base/collection"),o=e("./row"),s=n.extend({initialize:function(e,t){this.setOwnProperties({dataModel:t.dataModel,columnModel:t.columnModel,focusModel:t.focusModel})},model:o});t.exports=s},{"../base/collection":3,"./row":25}],27:[function(e,t,i){"use strict";var n=e("../base/model"),o=e("../common/util"),s=e("../common/constMap").selectionType,a=n.extend({initialize:function(e,t){n.prototype.initialize.apply(this,arguments),this.setOwnProperties({dataModel:t.dataModel,columnModel:t.columnModel,dimensionModel:t.dimensionModel,focusModel:t.focusModel,renderModel:t.renderModel,inputRange:null,intervalIdForAutoScroll:null,scrollPixelScale:40,enabled:!0,selectionType:s.CELL}),this.listenTo(this.dataModel,"add remove sort reset",this.end),this.listenTo(this.dataModel,"paste",this._onPasteData)},defaults:{range:null},_onPasteData:function(e){this.start(e.startIdx.row,e.startIdx.column),this.update(e.endIdx.row,e.endIdx.column)},setType:function(e){this.selectionType=s[e]||this.selectionType},getType:function(){return this.selectionType},enable:function(){this.enabled=!0},disable:function(){this.end(),this.enabled=!1},isEnabled:function(){return this.enabled},start:function(e,t,i){this.isEnabled()&&(this.setType(i),this.inputRange={row:[e,e],column:[t,t]},this._resetRangeAttribute())},startByMousePosition:function(e,t,i){var n=this.dimensionModel.getIndexFromMousePosition(e,t);this.start(n.row,n.column,i)},update:function(e,t,i){var n;!this.enabled||0>e||0>t||(this.hasSelection()?this.setType(i):(n=this.focusModel.indexOf(),this.start(n.row,n.column,i)),this._updateInputRange(e,t),this._resetRangeAttribute())},_updateInputRange:function(e,t){var i=this.inputRange;this.selectionType===s.ROW?t=this.columnModel.getVisibleColumnModelList().length-1:this.selectionType===s.COLUMN&&(e=this.dataModel.length-1),i.row[1]=e,i.column[1]=t},extendColumnSelection:function(e,t,i){var n,s=this._minimumColumnRange,a=this.dimensionModel.getIndexFromMousePosition(t,i),l={row:[0,this.dataModel.length-1],column:[]};e&&e.length||(e=[a.column]),this._setScrolling(t,i),s?n=o.getMinMax(e.concat(s)):(e.push(this.inputRange.column[0]),n=o.getMinMax(e)),l.column.push(n.min,n.max),this._resetRangeAttribute(l)},_setScrolling:function(e,t){var i=this.dimensionModel.getOverflowFromMousePosition(e,t);this.stopAutoScroll(),this._isAutoScrollable(i.x,i.y)&&(this.intervalIdForAutoScroll=setInterval(_.bind(this._adjustScroll,this,i.x,i.y)))},updateByMousePosition:function(e,t,i){var n=this.dimensionModel.getIndexFromMousePosition(e,t);this._setScrolling(e,t),this.update(n.row,n.column,i)},end:function(){this.inputRange=null,this.unset("range"),this.unsetMinimumColumnRange()},stopAutoScroll:function(){_.isNull(this.intervalIdForAutoScroll)||(clearInterval(this.intervalIdForAutoScroll),this.intervalIdForAutoScroll=null)},selectRow:function(e){this.isEnabled()&&(this.focusModel.focusAt(e,0),this.start(e,0,s.ROW),this.update(e,this.columnModel.getVisibleColumnModelList().length-1))},selectColumn:function(e){this.isEnabled()&&(this.focusModel.focusAt(0,e),this.start(0,e,s.COLUMN),this.update(this.dataModel.length-1,e))},selectAll:function(){this.isEnabled()&&(this.start(0,0,s.CELL),this.update(this.dataModel.length-1,this.columnModel.getVisibleColumnModelList().length-1))},getStartIndex:function(){var e=this.get("range");return{row:e.row[0],column:e.column[0]}},getEndIndex:function(){var e=this.get("range");return{row:e.row[1],column:e.column[1]}},hasSelection:function(){return!!this.get("range")},_isSingleCell:function(e,t){var i=1===e.length,n=1===t.length,o=i&&!n&&t[0].getRowSpanData(e[0]).count===t.length;return i&&n||o},getValuesToString:function(e){var t=this.get("range"),i=this.renderModel,n=this.dataModel.slice(t.row[0],t.row[1]+1),o=this.columnModel.getVisibleColumnModelList().slice(t.column[0],t.column[1]+1),s=_.pluck(o,"columnName"),a=_.map(n,function(t){return _.map(s,function(n){return e?i.getCellData(t.get("rowKey"),n).formattedValue:t.getValueString(n)}).join("	")});return this._isSingleCell(s,n)?a[0]:a.join("\n")},_isAutoScrollable:function(e,t){return!(0===e&&0===t)},_adjustScroll:function(e,t){var i=this.renderModel;e&&this._adjustScrollLeft(e,i.get("scrollLeft"),i.get("maxScrollLeft")),t&&this._adjustScrollTop(t,i.get("scrollTop"),i.get("maxScrollTop"))},_adjustScrollLeft:function(e,t,i){var n=t,o=this.scrollPixelScale;0>e?n=Math.max(0,t-o):e>0&&(n=Math.min(i,t+o)),this.renderModel.set("scrollLeft",n)},_adjustScrollTop:function(e,t,i){var n=t,o=this.scrollPixelScale;0>e?n=Math.max(0,t-o):e>0&&(n=Math.min(i,t+o)),this.renderModel.set("scrollTop",n)},_resetRangeAttribute:function(e){var t,i,n,o=this.dataModel;if(e=e||this.inputRange,!e)return void this.set("range",null);if(i={row:_.sortBy(e.row),column:_.sortBy(e.column)},o.isRowSpanEnable()&&this.selectionType===s.CELL){do n=_.assign([],i.row),i=this._getRowSpannedIndex(i),t=i.row[0]!==n[0]||i.row[1]!==n[1];while(t);this._setRangeMinMax(i.row,i.column)}this.set("range",i)},setMinimumColumnRange:function(e){this._minimumColumnRange=_.extend(e)},unsetMinimumColumnRange:function(){this._minimumColumnRange=null},_setRangeMinMax:function(e,t){e&&(e[0]=Math.max(0,e[0]),e[1]=Math.min(this.dataModel.length-1,e[1])),t&&(t[0]=Math.max(0,t[0]),t[1]=Math.min(this.columnModel.getVisibleColumnModelList().length-1,t[1]))},_concatRowSpanIndexFromStart:function(e){var t,i=e.startIndex,n=e.endIndex,o=e.columnName,s=e.startRowSpanDataMap&&e.startRowSpanDataMap[o],a=e.startIndexList,l=e.endIndexList;s&&(s.isMainRow?(t=i+s.count-1,t>n&&l.push(t)):(t=i+s.count,a.push(t)))},_concatRowSpanIndexFromEnd:function(e){var t,i,n=e.endIndex,o=e.columnName,s=e.endRowSpanDataMap&&e.endRowSpanDataMap[o],a=e.endIndexList,l=e.dataModel;s&&(s.isMainRow?(t=n+s.count-1,a.push(t)):(t=n+s.count,i=l.at(t).getRowSpanData(o),t+=i.count-1,t>n&&a.push(t)))},_getRowSpannedIndex:function(e){var t,i,n,o,s=this.columnModel.getVisibleColumnModelList().slice(e.column[0],e.column[1]+1),a=this.dataModel,l=[e.row[0]],r=[e.row[1]],d=a.at(e.row[0]),u=a.at(e.row[1]),c=$.extend({},e);return d&&u?(t=a.at(e.row[0]).getRowSpanData(),i=a.at(e.row[1]).getRowSpanData(),_.each(s,function(s){n=s.columnName,o={columnName:n,startIndex:e.row[0],endIndex:e.row[1],endRowSpanDataMap:i,startRowSpanDataMap:t,startIndexList:l,endIndexList:r,dataModel:a},this._concatRowSpanIndexFromStart(o),this._concatRowSpanIndexFromEnd(o)},this),c.row=[Math.min.apply(null,l),Math.max.apply(null,r)],c):c}});t.exports=a},{"../base/model":5,"../common/constMap":9,"../common/util":12}],28:[function(e,t,i){"use strict";var n=e("../base/model"),o=e("../common/util").isOptionEnabled,s=n.extend({initialize:function(e){this.options=e},defaults:{hasControlPanel:!1,hasPagination:!1,hasResizeHandler:!1,isExcelButtonVisible:!1,isExcelAllButtonVisible:!1},isEnabled:function(){return o(this.options)}});t.exports=s},{"../base/model":5,"../common/util":12}],29:[function(e,t,i){"use strict";var n=e("../base/painter"),o=e("../common/util"),s=e("../common/constMap").attrName,a=e("../common/classNameConst"),l=tui.util.defineClass(n,{init:function(e){n.apply(this,arguments),this.editType=e.editType,this.inputPainter=e.inputPainter,this.selector="td["+s.EDIT_TYPE+'="'+this.editType+'"]'},events:{dblclick:"_onDblClick"},template:_.template("<td <%=attributeString%>><%=contentHtml%></td>"),_onDblClick:function(e){var t;this._isEditableType()&&(t=this._getCellAddress($(e.target)),this.controller.startEditing(t,!0))},_isEditableType:function(){return!_.contains(["normal","mainButton"],this.editType)},_getContentHtml:function(e){var t=e.formattedValue,i=e.beforeContent,n=e.afterContent;return this.inputPainter&&(t=this.inputPainter.generateHtml(e),this._shouldContentBeWrapped()&&!this._isUsingViewMode(e))?(i=this._getSpanWrapContent(i,a.CELL_CONTENT_BEFORE),n=this._getSpanWrapContent(n,a.CELL_CONTENT_AFTER),t=this._getSpanWrapContent(t,a.CELL_CONTENT_INPUT),i+n+t):i+t+n},_isUsingViewMode:function(e){return tui.util.pick(e,"columnModel","editOption","useViewMode")!==!1},_shouldContentBeWrapped:function(){return _.contains(["text","password","select"],this.editType)},_getSpanWrapContent:function(e,t){return tui.util.isFalsy(e)&&(e=""),'<span class="'+t+'">'+e+"</span>"},_getAttributes:function(e){var t=[e.className,a.CELL,a.CELL_CONTENT,e.rowNum%2?a.CELL_ROW_ODD:a.CELL_ROW_EVEN],i={align:e.columnModel.align||"left"};return i["class"]=t.join(" "),i[s.EDIT_TYPE]=this.editType,i[s.ROW_KEY]=e.rowKey,i[s.COLUMN_NAME]=e.columnName,e.rowSpan&&(i.rowspan=e.rowSpan),i},attachEventHandlers:function(e,t){n.prototype.attachEventHandlers.call(this,e,t),this.inputPainter&&this.inputPainter.attachEventHandlers(e,t+" "+this.selector)},generateHtml:function(e){var t=o.getAttributesString(this._getAttributes(e)),i=this._getContentHtml(e);return this.template({attributeString:t,contentHtml:i||"&#8203;"})},refresh:function(e,t){var i=["value","isEditing","isDisabled","optionList"],n=_.contains(e.changed,"isEditing")&&e.isEditing,o=_.intersection(i,e.changed).length>0,s=this._getAttributes(e);delete s.rowspan,t.attr(s),n&&!this._isUsingViewMode(e)?this.inputPainter.focus(t):o&&(t.html(this._getContentHtml(e)),t.scrollLeft(0))}});t.exports=l},{"../base/painter":6,"../common/classNameConst":8,"../common/constMap":9,"../common/util":12}],30:[function(e,t,i){"use strict";var n=e("../common/util"),o=tui.util.defineClass({init:function(e){this.focusModel=e.focusModel,this.dataModel=e.dataModel,this.columnModel=e.columnModel,this.selectionModel=e.selectionModel},startEditing:function(e,t){var i;return t&&this.focusModel.finishEditing(),i=this.focusModel.startEditing(e.rowKey,e.columnName),i&&this.selectionModel.end(),i},finishEditing:function(e,t,i){var o,s,a=this.focusModel;return a.isEditingCell(e.rowKey,e.columnName)?(this.selectionModel.enable(),_.isUndefined(i)||(o=this.dataModel.get(e.rowKey),s=o.get(e.columnName),n.isBlank(i)&&n.isBlank(s)||(this.setValue(e,i),o.validateCell(e.columnName))),a.finishEditing(),t?a.focusClipboard():_.defer(function(){a.refreshState()}),!0):!1},focusInToNextCell:function(e){var t=this.focusModel,i=t.get("rowKey"),n=t.get("columnName"),o=e?t.prevColumnName():t.nextColumnName();n!==o&&t.focusIn(i,o,!0)},executeCustomInputEventHandler:function(e,t){var i,n=this.columnModel.getColumnModel(t.columnName),o=e.type;"focusin"===o?o="focus":"focusout"===o&&(o="blur"),i=tui.util.pick(n,"editOption","inputEvents",o),_.isFunction(i)&&i.call(e.target,e,t)},appendEmptyRowAndFocus:function(){this.dataModel.append({},{focus:!0})},setValue:function(e,t){this.dataModel.setValue(e.rowKey,e.columnName,t)}});t.exports=o},{"../common/util":12}],31:[function(e,t,i){"use strict";var n=e("../base/painter"),o=e("../common/util"),s=e("../common/constMap").attrName,a=e("../common/classNameConst"),l=tui.util.defineClass(n,{init:function(){n.apply(this,arguments)},events:{dblclick:"_onDblClick"},selector:"td["+s.EDIT_TYPE+'="dummy"]',template:_.template("<td "+s.COLUMN_NAME+'="<%=columnName%>" '+s.EDIT_TYPE+'="dummy" class="<%=className%>">&#8203;</td>'),_onDblClick:function(){this.controller.appendEmptyRowAndFocus(!0)},generateHtml:function(e,t){var i=[a.CELL,a.CELL_DUMMY,e%2?a.CELL_ROW_ODD:a.CELL_ROW_EVEN];return o.isMetaColumn(t)&&i.push(a.CELL_HEAD),this.template({columnName:t,className:i.join(" ")})}});t.exports=l},{"../base/painter":6,"../common/classNameConst":8,"../common/constMap":9,"../common/util":12}],32:[function(e,t,i){"use strict";var n=e("../../base/painter"),o=e("../../common/constMap").keyName,s=tui.util.defineClass(n,{init:function(){n.apply(this,arguments)},events:{keydown:"_onKeyDown",focusin:"_onFocusIn",focusout:"_onFocusOut"},keyDownActions:{ESC:function(e){this.controller.finishEditing(e.address,!0)},ENTER:function(e){this.controller.finishEditing(e.address,!0,e.value)},TAB:function(e){this.controller.finishEditing(e.address,!0,e.value),this.controller.focusInToNextCell(e.shiftKey)}},_extendKeydownActions:function(e){this.keyDownActions=_.assign({},this.keyDownActions,e)},_extendEvents:function(e){this.events=_.assign({},this.events,e)},_executeCustomEventHandler:function(e){var t=$(e.target),i=this._getCellAddress(t);this.controller.executeCustomInputEventHandler(e,i)},_onFocusIn:function(e){var t=$(e.target),i=this._getCellAddress(t),n=this;_.defer(function(){n._executeCustomEventHandler(e),n.trigger("focusIn",t,i),n.controller.startEditing(i)})},_onFocusOut:function(e){var t=$(e.target),i=this._getCellAddress(t);this._executeCustomEventHandler(e),this.trigger("focusOut",t,i),this.controller.finishEditing(i,!1,t.val())},_onKeyDown:function(e){var t=e.keyCode||e.which,i=o[t],n=this.keyDownActions[i],s=$(e.target),a={$target:s,address:this._getCellAddress(s),shiftKey:e.shiftKey,value:s.val()};this._executeCustomEventHandler(e),n&&(n.call(this,a),e.preventDefault())},_getDisplayValue:function(){throw new Error("implement _getDisplayValue() method")},_generateInputHtml:function(){throw new Error("implement _generateInputHtml() method")},_isUsingViewMode:function(e){return tui.util.pick(e,"columnModel","editOption","useViewMode")!==!1},generateHtml:function(e){var t;return t=_.isNull(e.convertedHTML)?!this._isUsingViewMode(e)||e.isEditing?this._generateInputHtml(e):this._getDisplayValue(e):e.convertedHTML},focus:function(e){var t=e.find(this.selector);t.is(":focus")||t.eq(0).focus()}});_.assign(s.prototype,Backbone.Events),t.exports=s},{"../../base/painter":6,"../../common/constMap":9}],33:[function(e,t,i){"use strict";var n=e("./base"),o=e("../../common/util"),s=tui.util.defineClass(n,{init:function(e){n.apply(this,arguments),this.inputType=e.inputType,this.selector="fieldset[data-type="+this.inputType+"]",this._extendEvents({mousedown:"_onMouseDown"}),this._extendKeydownActions({TAB:function(e){var t;this._focusNextInput(e.$target,e.shiftKey)||(t=this._getCheckedValueString(e.$target),this.controller.finishEditing(e.address,!0,t),this.controller.focusInToNextCell(e.shiftKey))},ENTER:function(e){var t=this._getCheckedValueString(e.$target);this.controller.finishEditing(e.address,!0,t)},LEFT_ARROW:function(e){this._focusNextInput(e.$target,!0)},RIGHT_ARROW:function(e){this._focusNextInput(e.$target)},UP_ARROW:function(){},DOWN_ARROW:function(){}})},template:_.template('<fieldset data-type="<%=type%>"><%=content%></fieldset>'),inputTemplate:_.template('<input type="<%=type%>" data-value-type="<%=valueType%>" name="<%=name%>" id="<%=id%>" value="<%=value%>" <%=checked%> <%=disabled%> />'),labelTemplate:_.template('<label for="<%=id%>"><%=labelText%></label>'),_onFocusOut:function(e){var t=$(e.target),i=this;_.defer(function(){var e,n;t.siblings("input:focus").length||(e=i._getCellAddress(t),n=i._getCheckedValueString(t),i.controller.finishEditing(e,!1,n))})},_onMouseDown:function(e){var t=$(e.target),i=t.closest("fieldset").find("input:focus").length>0;!t.is("input")&&i&&(e.stopPropagation(),e.preventDefault())},_focusNextInput:function(e,t){var i=t?"prevAll":"nextAll",n=e[i]("input");return n.length?(n.first().focus(),!0):!1},_getCheckedValueString:function(e){var t,i=e.parent().find("input:checked"),n=[];return i.each(function(){var e=$(this),t=e.attr("data-value-type"),i=o.convertValueType(e.val(),t);n.push(i)}),t=1===n.length?n[0]:n.join(",")},_getCheckedValueSet:function(e){var t={};return _.each(String(e).split(","),function(e){t[e]=!0}),t},_getDisplayValue:function(e){var t=this._getCheckedValueSet(e.value),i=[];return _.each(e.optionList,function(e){t[e.value]&&i.push(e.text)}),i.join(",")},_generateInputHtml:function(e){var t=this._getCheckedValueSet(e.value),i=o.getUniqueKey(),n="";return _.each(e.optionList,function(o){var s=i+"_"+o.value;n+=this.inputTemplate({type:this.inputType,id:s,name:i,value:o.value,valueType:typeof o.value,checked:t[o.value]?"checked":"",disabled:e.isDisabled?"disabled":""}),o.text&&(n+=this.labelTemplate({id:s,labelText:o.text}))},this),this.template({type:this.inputType,content:n})},focus:function(e){var t=e.find("input");t.is(":focus")||t.eq(0).focus()}});t.exports=s},{"../../common/util":12,"./base":32}],34:[function(e,t,i){"use strict";var n=e("../../base/painter"),o=e("../../common/classNameConst"),s=tui.util.defineClass(n,{init:function(e){n.apply(this,arguments),this.selector="input."+o.CELL_MAIN_BUTTON,this.inputType=e.inputType,this.gridId=e.gridId},events:{change:"_onChange"},template:_.template('<input class="'+o.CELL_MAIN_BUTTON+'" type="<%=type%>" name="<%=name%>" <%=checked%> <%=disabled%> />'),_onChange:function(e){var t=$(e.target),i=this._getCellAddress(t);this.controller.setValue(i,t.is(":checked"))},generateHtml:function(e){return this.template({type:this.inputType,name:this.gridId,checked:e.value?"checked":"",disabled:e.isDisabled?"disabled":""})}});t.exports=s},{"../../base/painter":6,"../../common/classNameConst":8}],35:[function(e,t,i){"use strict";var n=e("./base"),o=e("../../common/util"),s=tui.util.defineClass(n,{init:function(){n.apply(this,arguments),this.selector="select"},template:_.template('<select name="<%=name%>" <%=disabled%>><%=options%></select>'),optionTemplate:_.template('<option value="<%=value%>" <%=selected%>><%=text%></option>'),_getDisplayValue:function(e){var t=_.find(e.optionList,function(t){return String(t.value)===String(e.value)});return t?t.text:""},_generateInputHtml:function(e){var t=_.reduce(e.optionList,function(t,i){return t+this.optionTemplate({value:i.value,text:i.text,selected:String(e.value)===String(i.value)?"selected":""})},"",this);return this.template({name:o.getUniqueKey(),disabled:e.isDisabled?"disabled":"",options:t})}});t.exports=s},{"../../common/util":12,"./base":32}],36:[function(e,t,i){"use strict";var n=e("./base"),o=e("../../common/util"),s=tui.util.defineClass(n,{init:function(e){n.apply(this,arguments),this.inputType=e.inputType,this.selector="input[type="+this.inputType+"]",this._extendEvents({selectstart:"_onSelectStart"})},template:_.template('<input type="<%=type%>" value="<%=value%>" name="<%=name%>" align="center" maxLength="<%=maxLength%>" <%=disabled%>/>'),_onSelectStart:function(e){e.stopPropagation()},_convertStringToAsterisks:function(e){return Array(e.length+1).join("*")},_getDisplayValue:function(e){var t=e.formattedValue;return"password"===this.inputType&&(t=this._convertStringToAsterisks(e.value)),t},_generateInputHtml:function(e){var t=tui.util.pick(e,"columnModel","editOption","maxLength");return this.template({type:this.inputType,value:e.value,name:o.getUniqueKey(),disabled:e.isDisabled?"disabled":"",maxLength:t})},focus:function(e){var t=e.find(this.selector);1!==t.length||t.is(":focus")||t.select()}});t.exports=s},{"../../common/util":12,"./base":32}],37:[function(e,t,i){"use strict";var n=e("./row"),o=e("./cell"),s=e("./dummyCell"),a=e("./input/text"),l=e("./input/select"),r=e("./input/button"),d=e("./input/mainButton"),u=tui.util.defineClass({
init:function(e){this.gridId=e.gridId,this.selectType=e.selectType,this.inputPainters=this._createInputPainters(e.controller),this.cellPainters=this._createCellPainters(e.controller),this.rowPainter=this._createRowPainter()},_createInputPainters:function(e){return{text:new a({controller:e,inputType:"text"}),password:new a({controller:e,inputType:"password"}),checkbox:new r({controller:e,inputType:"checkbox"}),radio:new r({controller:e,inputType:"radio"}),select:new l({controller:e}),mainButton:new d({controller:e,inputType:this.selectType,gridId:this.gridId})}},_createCellPainters:function(e){var t={dummy:new s({controller:e}),normal:new o({controller:e,editType:"normal"})};return _.each(this.inputPainters,function(i,n){t[n]=new o({editType:n,controller:e,inputPainter:i})},this),t},_createRowPainter:function(){return new n({painterManager:this})},getCellPainter:function(e){return this.cellPainters[e]},getCellPainters:function(){return this.cellPainters},getInputPainters:function(e){var t=this.inputPainters;return e&&(t=_.omit(t,"mainButton")),t},getRowPainter:function(){return this.rowPainter}});t.exports=u},{"./cell":29,"./dummyCell":31,"./input/button":33,"./input/mainButton":34,"./input/select":35,"./input/text":36,"./row":38}],38:[function(e,t,i){"use strict";var n=e("../base/painter"),o=e("../common/util"),s=e("../common/constMap"),a=s.attrName,l=s.dimension.CELL_BORDER_WIDTH,r=tui.util.defineClass(n,{init:function(e){n.apply(this,arguments),this.painterManager=e.painterManager},selector:"tr",template:_.template('<tr <%=rowKeyAttrName%>="<%=rowKey%>" class="<%=className%>" style="height: <%=height%>px;"><%=contents%></tr>'),_getEditType:function(e,t){var i=tui.util.pick(t.columnModel,"editOption","type");return i||"normal"},_generateHtmlForDummyRow:function(e,t){var i=this.painterManager.getCellPainter("dummy"),n="";return _.each(t,function(t){n+=i.generateHtml(e,t)}),n},_generateHtmlForActualRow:function(e,t){var i="";return _.each(t,function(t){var n,o,s=e.get(t);s&&s.isMainRow&&(n=this._getEditType(t,s),o=this.painterManager.getCellPainter(n),i+=o.generateHtml(s))},this),i},generateHtml:function(e,t){var i,n=e.get("rowKey"),o=e.get("rowNum"),s="";return i=_.isUndefined(n)?this._generateHtmlForDummyRow(o,t):this._generateHtmlForActualRow(e,t),this.template({rowKeyAttrName:a.ROW_KEY,rowKey:n,height:e.get("height")+r._extraHeight+l,contents:i,className:s})},refresh:function(e,t){_.each(e,function(e,i){var n,o,s;"_extraData"!==i&&(s=t.find("td["+a.COLUMN_NAME+'="'+i+'"]'),n=this._getEditType(i,e),o=this.painterManager.getCellPainter(n),o.refresh(e,s))},this)},"static":{_extraHeight:function(){var e=0;return o.isBrowserIE7()&&(e=-2),e}()}});t.exports=r},{"../base/painter":6,"../common/constMap":9,"../common/util":12}],39:[function(e,t,i){"use strict";var n=tui.util.defineClass({init:function(e){this.publicObject=e},_listenForThrough:function(e,t){_.each(t,function(t){this.listenTo(e,t,_.bind(this._triggerOnPublic,this,t))},this)},_listenForRename:function(e,t,i){this.listenTo(e,t,_.bind(this._triggerOnPublic,this,i))},_triggerOnPublic:function(e,t){this.publicObject.trigger(e,t)},listenToNetAddon:function(e){this._listenForThrough(e,["beforeRequest","response","successResponse","failResponse","errorResponse"])},listenToContainerView:function(e){this._listenForThrough(e,["click","dblclick","mousedown","clickCell","dblclickCell","mouseoverCell","mouseoutCell","rendered"])},listenToFocusModel:function(e){this._listenForRename(e,"select","selectRow")}});_.extend(n.prototype,Backbone.Events),t.exports=n},{}],40:[function(e,t,i){"use strict";var n=tui.util.defineClass({init:function(e){if(!_.isString(e)||!e)throw new Error("The Selector must be a string and not be empty.");this._selector=e,this._propValues=[]},add:function(e,t){return t&&this._propValues.push(e+":"+t),this},border:function(e){return this.add("border-color",e)},borderWidth:function(e){var t,i=e.showVerticalBorder,n=e.showHorizontalBorder;return _.isBoolean(i)&&(t=i?"1px":"0",this.add("border-left-width",t).add("border-right-width",t)),_.isBoolean(n)&&(t=n?"1px":"0",this.add("border-top-width",t).add("border-bottom-width",t)),this},bg:function(e){return this.add("background-color",e)},text:function(e){return this.add("color",e)},build:function(){var e="";return this._propValues.length&&(e=this._selector+"{"+this._propValues.join(";")+"}"),e}});t.exports={create:function(e){return new n(e)},createClassRule:function(e){return this.create("."+e)},createWebkitScrollbarRules:function(e,t){return[this.create(e+" ::-webkit-scrollbar").bg(t.background),this.create(e+" ::-webkit-scrollbar-thumb").bg(t.thumb),this.create(e+" ::-webkit-scrollbar-thumb:hover").bg(t.active)]},createIEScrollbarRule:function(e,t){var i=["scrollbar-3dlight-color","scrollbar-darkshadow-color","scrollbar-track-color","scrollbar-shadow-color"],n=["scrollbar-face-color","scrollbar-highlight-color"],o=this.create(e);return _.each(i,function(e){o.add(e,t.background)}),_.each(n,function(e){o.add(e,t.thumb)}),o.add("scrollbar-arrow-color",t.active),o},buildAll:function(e){return _.map(e,function(e){return e.build()}).join("")}}},{}],41:[function(e,t,i){"use strict";function n(e){var t=[a.grid(e.grid),a.scrollbar(e.scrollbar),a.toolbar(e.toolbar),a.heightResizeHandle(e.heightResizeHandle),a.pagination(e.pagination),a.selection(e.selection)],i=e.cell;return i&&(t=t.concat([a.cell(i.normal),a.cellDummy(i.dummy),a.cellEditable(i.editable),a.cellHead(i.head),a.cellOddRow(i.oddRow),a.cellEvenRow(i.evenRow),a.cellRequired(i.required),a.cellDisabled(i.disabled),a.cellInvalid(i.invalid),a.cellCurrentRow(i.currentRow),a.cellSelectedHead(i.selectedHead),a.cellFocused(i.focused)])),t.join("")}function o(e){var t=n(e);$("#"+r).remove(),s.appendStyleElement(r,t)}var s=e("../common/util"),a=e("./styleGenerator"),l=e("../common/constMap").themeName,r="tui-grid-theme-style",d={};d[l.DEFAULT]=e("./preset/default"),d[l.STRIPED]=e("./preset/striped"),d[l.CLEAN]=e("./preset/clean"),t.exports={apply:function(e,t){var i=d[e];i||(i=d[l.DEFAULT]),i=$.extend(!0,{},i,t),o(i)},isApplied:function(){return 1===$("#"+r).length}}},{"../common/constMap":9,"../common/util":12,"./preset/clean":42,"./preset/default":43,"./preset/striped":44,"./styleGenerator":45}],42:[function(e,t,i){"use strict";var n=e("./default");t.exports=$.extend(!0,{},n,{grid:{border:"#c0c0c0"},toolbar:{border:"#e0e0e0"},cell:{normal:{background:"#fff",border:"#e0e0e0",showVerticalBorder:!1,showHorizontalBorder:!0},head:{background:"#fff",border:"#e0e0e0",showVerticalBorder:!1,showHorizontalBorder:!0},selectedHead:{background:"#e0e0e0"}}})},{"./default":43}],43:[function(e,t,i){"use strict";t.exports={grid:{background:"#fff",border:"#ccc",text:"#444"},selection:{background:"#4daaf9",border:"#004082"},toolbar:{border:"transparent",background:"transparent"},heightResizeHandle:{border:"#ccc",background:"#fff"},pagination:{border:"transparent",background:"transparent"},scrollbar:{background:"#f5f5f5",thumb:"#d9d9d9",active:"#c1c1c1"},cell:{normal:{background:"#fbfbfb",border:"#e0e0e0",showVerticalBorder:!0,showHorizontalBorder:!0},head:{background:"#eee",border:"#ccc",showVerticalBorder:!0,showHorizontalBorder:!0},selectedHead:{background:"#d8d8d8"},focused:{border:"#418ed4"},required:{background:"#fffdeb"},editable:{background:"#fff"},disabled:{text:"#b0b0b0"},dummy:{background:"#fff"},invalid:{background:"#ff8080"},evenRow:{},oddRow:{},currentRow:{}}}},{}],44:[function(e,t,i){"use strict";var n=e("./default");t.exports=$.extend(!0,{},n,{cell:{normal:{background:"#fff",border:"#e8e8e8",showVerticalBorder:!1,showHorizontalBorder:!1},oddRow:{background:"#f3f3f3"},evenRow:{background:"#fff"},head:{background:"#fff",showVerticalBorder:!1,showHorizontalBorder:!1}}})},{"./default":43}],45:[function(e,t,i){"use strict";function n(e,t){return l(e).bg(t.background).text(t.text).build()}function o(e,t){return l(e).bg(t.background).border(t.border).build()}var s=e("./cssRuleBuilder"),a=e("../common/classNameConst"),l=_.bind(s.createClassRule,s);t.exports={grid:function(e){var t=l(a.CONTAINER).bg(e.background).text(e.text),i=l(a.CONTENT_AREA).border(e.border),n=l(a.TABLE).border(e.border),o=l(a.HEAD_AREA).border(e.border),r=l(a.BORDER_LINE).bg(e.border),d=l(a.SCROLLBAR_HEAD).border(e.border),u=l(a.SCROLLBAR_BORDER).bg(e.border);return s.buildAll([t,i,n,o,r,d,u])},scrollbar:function(e){var t=s.createWebkitScrollbarRules("."+a.CONTAINER,e),i=s.createIEScrollbarRule("."+a.CONTAINER,e),n=l(a.SCROLLBAR_RIGHT_BOTTOM).bg(e.background),o=l(a.SCROLLBAR_LEFT_BOTTOM).bg(e.background),r=l(a.SCROLLBAR_HEAD).bg(e.background);return s.buildAll(t.concat([i,n,o,r]))},toolbar:function(e){return o(a.TOOLBAR,e)},heightResizeHandle:function(e){return o(a.HEIGHT_RESIZE_HANDLE,e)},pagination:function(e){return o(a.PAGINATION,e)},selection:function(e){return o(a.LAYER_SELECTION,e)},cell:function(e){var t=l(a.CELL).bg(e.background).border(e.border).borderWidth(e).text(e.text);return t.build()},cellHead:function(e){var t=l(a.CELL_HEAD).bg(e.background).border(e.border).borderWidth(e).text(e.text);return t.build()},cellEvenRow:function(e){return l(a.CELL_ROW_EVEN).bg(e.background).build()},cellOddRow:function(e){return l(a.CELL_ROW_ODD).bg(e.background).build()},cellSelectedHead:function(e){return s.create("."+a.CELL_HEAD+"."+a.CELL_SELECTED).bg(e.background).text(e.text).build()},cellFocused:function(e){var t=l(a.LAYER_FOCUS_BORDER).bg(e.border),i=l(a.LAYER_EDITING).border(e.border);return s.buildAll([t,i])},cellEditable:function(e){return n(a.CELL_EDITABLE,e)},cellRequired:function(e){return n(a.CELL_REQUIRED,e)},cellDisabled:function(e){return n(a.CELL_DISABLED,e)},cellDummy:function(e){return n(a.CELL_DUMMY,e)},cellInvalid:function(e){return n(a.CELL_INVALID,e)},cellCurrentRow:function(e){return n(a.CELL_CURRENT_ROW,e)}}},{"../common/classNameConst":8,"./cssRuleBuilder":40}],46:[function(e,t,i){"use strict";var n=e("../base/view"),o=e("../common/util"),s=e("../common/classNameConst"),a=e("../common/constMap"),l=a.keyCode,r=a.selectionType,d=n.extend({initialize:function(e){this.setOwnProperties({focusModel:e.focusModel,selectionModel:e.selectionModel,dimensionModel:e.dimensionModel,dataModel:e.dataModel,columnModel:e.columnModel,renderModel:e.renderModel,useFormattedValue:!!tui.util.pick(e,"copyOption","useFormattedValue"),timeoutIdForKeyIn:0,isLocked:!1}),this.listenTo(this.focusModel,"focusClipboard",this._onFocus)},tagName:"textarea",className:s.CLIPBOARD,events:{keydown:"_onKeyDown",blur:"_onBlur"},_onBlur:function(){var e=this.focusModel;setTimeout(function(){e.refreshState()},0)},_onFocus:function(){try{this.$el.is(":focus")||(this.$el.focus(),this.focusModel.refreshState())}catch(e){}},render:function(){return this},_lock:function(){clearTimeout(this.timeoutIdForKeyIn),this.isLocked=!0,this.timeoutIdForKeyIn=setTimeout($.proxy(this._unlock,this),10)},_unlock:function(){this.isLocked=!1},_onKeyDown:function(e){return this.isLocked?void e.preventDefault():(e.shiftKey&&(e.ctrlKey||e.metaKey)?this._keyInWithShiftAndCtrl(e):e.shiftKey?this._keyInWithShift(e):e.ctrlKey||e.metaKey?this._keyInWithCtrl(e):this._keyIn(e),void this._lock())},_keyIn:function(e){var t=this.focusModel,i=this.selectionModel,n=t.which(),s=n.rowKey,a=n.columnName,r=this.dimensionModel.get("displayRowCount"),d=!0,u=e.keyCode||e.which;if(!o.isBlank(n.rowKey)){switch(u){case l.UP_ARROW:t.focus(t.prevRowKey(),a,!0);break;case l.DOWN_ARROW:t.focus(t.nextRowKey(),a,!0);break;case l.LEFT_ARROW:t.focus(s,t.prevColumnName(),!0);break;case l.RIGHT_ARROW:t.focus(s,t.nextColumnName(),!0);break;case l.PAGE_UP:t.focus(t.prevRowKey(r-1),a,!0);break;case l.PAGE_DOWN:t.focus(t.nextRowKey(r-1),a,!0);break;case l.HOME:t.focus(s,t.firstColumnName(),!0);break;case l.END:t.focus(s,t.lastColumnName(),!0);break;case l.SPACE:case l.ENTER:this._onEnterSpace(s,a);break;case l.DEL:this._del(s,a);break;case l.TAB:t.focusIn(s,t.nextColumnName(),!0);break;default:d=!1}d&&e.preventDefault(),i.end()}},_onEnterSpace:function(e,t){this.focusModel.focusIn(e,t)},_getIndexBeforeMove:function(){var e,t,i=this.focusModel.indexOf(),n=this.selectionModel.get("range"),o=_.extend({},i);return n&&(e=n.row,t=n.column,o.row=e[0],o.column=t[0],e[1]>i.row&&(o.row=e[1]),t[1]>i.column&&(o.column=t[1])),o},_keyInWithShift:function(e){var t,i,n,o,s=this.focusModel,a=this.dimensionModel,d=this.columnModel.getVisibleColumnModelList(),u=s.which(),c=a.get("displayRowCount"),h=e.keyCode||e.which,m=this._getIndexBeforeMove(),g=!0,f=!0;switch(h){case l.UP_ARROW:m.row-=1;break;case l.DOWN_ARROW:m.row+=1;break;case l.LEFT_ARROW:m.column-=1;break;case l.RIGHT_ARROW:m.column+=1;break;case l.PAGE_UP:m.row=s.prevRowIndex(c-1);break;case l.PAGE_DOWN:m.row=s.nextRowIndex(c-1);break;case l.HOME:m.column=0;break;case l.END:m.column=d.length-1;break;case l.ENTER:f=!1;break;case l.TAB:f=!1,s.focusIn(u.rowKey,s.prevColumnName(),!0);break;default:f=!1,g=!1}t=d[m.column],n=!(!t||!this.dataModel.getRowData(m.row)),f&&n&&(this._updateSelectionByKeyIn(m.row,m.column),i=a.getScrollPosition(m.row,t.columnName),i&&(o=this.selectionModel.getType(),o===r.COLUMN?delete i.scrollTop:o===r.ROW&&delete i.scrollLeft,this.renderModel.set(i))),g&&e.preventDefault()},_keyInWithCtrl:function(e){var t=this.focusModel,i=e.keyCode||e.which;switch(i){case l.CHAR_A:this.selectionModel.selectAll();break;case l.CHAR_C:this._copyToClipboard();break;case l.HOME:t.focus(t.firstRowKey(),t.firstColumnName(),!0);break;case l.END:t.focus(t.lastRowKey(),t.lastColumnName(),!0);break;case l.CHAR_V:this._pasteWhenKeyupCharV()}},_pasteWhenKeyupCharV:function(){var e=this;this._clearClipBoard(),this.pasting||(this.pasting=!0,this.$el.on("keyup",function(){e._pasteToGrid(),e.pasting=!1}))},_clearClipBoard:function(){this.$el.val("")},_pasteToGrid:function(){var e,t,i=this.selectionModel,n=this.focusModel,o=this.dataModel;e=i.hasSelection()?i.getStartIndex():n.indexOf(),t=this._getProcessClipBoardData(),this.$el.off("keyup"),o.paste(t,e)},_getProcessClipBoardData:function(){for(var e=this.$el.val(),t=e.split("\n"),i=0,n=t.length;n>i;i+=1)t[i]=t[i].split("	");return t},_keyInWithShiftAndCtrl:function(e){var t=!0,i=this.columnModel.getVisibleColumnModelList(),n=e.keyCode||e.which;switch(n){case l.HOME:this._updateSelectionByKeyIn(0,0);break;case l.END:this._updateSelectionByKeyIn(this.dataModel.length-1,i.length-1);break;default:t=!1}t&&e.preventDefault()},_del:function(){var e,t,i,n=this.selectionModel,o=this.dataModel,s=this.focusModel.which(),a=this.columnModel.getVisibleColumnModelList(),l=s.rowKey,r=s.columnName;if(n.hasSelection()){for(e=n.get("range"),t=e.row[0];t<e.row[1]+1;t+=1)for(l=o.at(t).get("rowKey"),i=e.column[0];i<e.column[1]+1;i+=1)r=a[i].columnName,o.del(l,r,!0),o.get(l).validateCell(r);this.renderModel.refresh({dataModelChanged:!0})}else o.del(l,r)},_updateSelectionByKeyIn:function(e,t){var i=this.selectionModel;i.update(e,t)},_getClipboardString:function(){var e,t=this.selectionModel,i=this.focusModel.which();return e=t.hasSelection()?this.selectionModel.getValuesToString(this.useFormattedValue):this.useFormattedValue?this.renderModel.getCellData(i.rowKey,i.columnName).formattedValue:this.dataModel.get(i.rowKey).getValueString(i.columnName)},_copyToClipboard:function(){var e=this._getClipboardString();window.clipboardData?window.clipboardData.setData("Text",e):this.$el.val(e).select()}});t.exports=d},{"../base/view":7,"../common/classNameConst":8,"../common/constMap":9,"../common/util":12}],47:[function(e,t,i){"use strict";var n=e("../base/view"),o=e("../common/gridEvent"),s=e("../common/constMap").attrName,a=e("../common/classNameConst"),l=n.extend({initialize:function(e){n.prototype.initialize.call(this),this.gridId=e.gridId,this.singleClickEdit=e.singleClickEdit,this.dimensionModel=e.dimensionModel,this.focusModel=e.focusModel,this.dataModel=e.dataModel,this.viewFactory=e.viewFactory,this._createChildViews(),this.listenTo(this.dimensionModel,"setSize",this._onSetSize),$(window).on("resize.grid",$.proxy(this._onResizeWindow,this)),this.__$el=this.$el.clone()},events:{click:"_onClick",dblclick:"_onDblClick",mousedown:"_onMouseDown",mouseover:"_onMouseOver",mouseout:"_onMouseOut",selectstart:"_preventDrag",dragstart:"_preventDrag"},_createChildViews:function(){var e=this.viewFactory;this._addChildren([e.createToolbar(),e.createContentArea(),e.createHeightResizeHandle(),e.createPagination(),e.createStateLayer(),e.createEditingLayer(),e.createDatePickerLayer(),e.createClipboard()])},_onResizeWindow:function(){this.dimensionModel.refreshLayout()},_preventDrag:function(){return!1},_onSetSize:function(){this.$el.width(this.dimensionModel.get("width"))},_onClick:function(e){var t,i=new o(e),n=$(e.target);this.trigger("click",i),i.isStopped()||this._isCellElement(n,!0)&&(t=this._getCellInfoFromElement(n.closest("td")),this.singleClickEdit&&!n.is("input")&&this.focusModel.focusIn(t.rowKey,t.columnName),this._triggerCellMouseEvent("clickCell",i,t))},_onDblClick:function(e){var t=new o(e),i=$(e.target);this.trigger("dblclick",t),t.isStopped()||this._isCellElement(i,!0)&&this._triggerCellMouseEvent("dblclickCell",t,i.closest("td"))},_onMouseOver:function(e){var t,i=$(e.target);this._isCellElement(i)&&(t=new o(e),this._triggerCellMouseEvent("mouseoverCell",t,i))},_onMouseOut:function(e){var t,i=$(e.target);this._isCellElement(i)&&(t=new o(e),this._triggerCellMouseEvent("mouseoutCell",t,i))},_triggerCellMouseEvent:function(e,t,i){var n=i;i instanceof $&&(n=this._getCellInfoFromElement(i)),_.extend(t,n),this.trigger(e,t)},_isCellElement:function(e,t){var i=t?e.closest("td"):e;return!!(i.is("td")&&i.attr(s.COLUMN_NAME)&&i.parent().attr(s.ROW_KEY))},_getCellInfoFromElement:function(e){var t=Number(e.attr(s.ROW_KEY)),i=e.attr(s.COLUMN_NAME);return{rowKey:t,columnName:i,rowData:this.dataModel.getRowData(t)}},_onMouseDown:function(e){var t=$(e.target),i=new o(e);this.trigger("mousedown",i),i.isStopped()||t.is("input, a, button, select")||(e.preventDefault(),this.focusModel.focusClipboard())},render:function(){var e=this._renderChildren();return this.$el.addClass(a.CONTAINER).attr(s.GRID_ID,this.gridId).append(e),this._triggerChildrenAppended(),this.trigger("rendered"),this},destroy:function(){this.stopListening(),$(window).off("resize.grid"),this._destroyChildren(),this.$el.replaceWith(this.__$el),this.$el=this.__$el=null}});t.exports=l},{"../base/view":7,"../common/classNameConst":8,"../common/constMap":9,"../common/gridEvent":11}],48:[function(e,t,i){"use strict";function n(e){var t=a.ICO_ARROW+" "+e;return'<span class="'+t+'"></span>'}var o,s=e("../base/view"),a=e("../common/classNameConst"),l="yyyy-mm-dd";o=s.extend({initialize:function(e){this.textPainter=e.textPainter,this.columnModel=e.columnModel,this.domState=e.domState,this.calendar=this._createCalendar(),this.datePicker=this._createDatePicker(),this._customizeCalendarBtns(),this.listenTo(this.textPainter,"focusIn",this._onFocusInTextInput),this.listenTo(this.textPainter,"focusOut",this._onFocusOutTextInput)},className:a.LAYER_DATE_PICKER,_createCalendar:function(){var e=$("<div>").addClass(a.CALENDAR);return e.mousedown(function(e){return e.preventDefault(),e.target.unselectable=!0,!1}),new tui.component.Calendar({element:e,classPrefix:a.CALENDAR+"-"})},_customizeCalendarBtns:function(){var e=this.calendar.$header,t=n(a.ICO_ARROW_LEFT),i=n(a.ICO_ARROW_RIGHT);e.find("."+a.CALENDAR_BTN_PREV_YEAR).html(t+t),e.find("."+a.CALENDAR_BTN_NEXT_YEAR).html(i+i),e.find("."+a.CALENDAR_BTN_PREV_MONTH).html(t),e.find("."+a.CALENDAR_BTN_NEXT_MONTH).html(i)},_createDatePicker:function(){var e=new tui.component.DatePicker({parentElement:this.$el,enableSetDateByEnterKey:!1,selectableClassName:a.CALENDAR_SELECTABLE,selectedClassName:a.CALENDAR_SELECTED,pos:{top:0,left:0}},this.calendar);return e.on("update",function(){e.close()}),e},_createDateForNow:function(){var e=new Date;return{year:e.getFullYear(),month:e.getMonth()+1,date:e.getDate()}},_resetDatePicker:function(e,t){var i=this.datePicker,n=e.date||this._createDateForNow();i.setDateForm(e.dateForm||l),i.setRanges(e.selectableRanges||[]),i.setDate(n.year,n.month,n.date),i.setElement(t)},_calculatePosition:function(e){var t=e.offset(),i=e.outerHeight(),n=this.domState.getOffset();return{top:t.top-n.top+i,left:t.left-n.left}},_onFocusInTextInput:function(e,t){var i=t.columnName,n=this.columnModel.getColumnModel(i).component,o=this.columnModel.getEditType(i);"text"===o&&n&&"datePicker"===n.name&&(this.$el.css(this._calculatePosition(e)).show(),this._resetDatePicker(n.option||{},e),this.datePicker.open())},_onFocusOutTextInput:function(){this.datePicker.close(),this.$el.hide()},render:function(){return this.$el.hide(),this}}),t.exports=o},{"../base/view":7,"../common/classNameConst":8}],49:[function(e,t,i){"use strict";var n=e("../base/view"),o=e("../common/constMap").dimension.CELL_BORDER_WIDTH,s=e("../common/constMap").attrName,a=e("../common/classNameConst"),l=n.extend({initialize:function(e){this.renderModel=e.renderModel,this.domState=e.domState,this.inputPainters=e.inputPainters,this.listenTo(this.renderModel,"editingStateChanged",this._onEditingStateChanged)},className:a.LAYER_EDITING+" "+a.CELL_CONTENT,_startEditing:function(e){var t=e.rowKey,i=e.columnName,n=tui.util.pick(e,"columnModel","editOption","type"),o=this._calculateLayoutStyle(t,i,this._isWidthExpandable(n)),a=this.inputPainters[n];this.$el.html(a.generateHtml(e)).attr(s.ROW_KEY,t).attr(s.COLUMN_NAME,i).css(o).show(),this._adjustLeftPosition(),a.focus(this.$el)},_isWidthExpandable:function(e){return _.contains(["checkbox","radio"],e)},_finishEditing:function(){this.$el.removeAttr(s.ROW_KEY),this.$el.removeAttr(s.COLUMN_NAME),this.$el.empty().hide()},_adjustLeftPosition:function(){var e=this.domState.getWidth(),t=this.$el.outerWidth(),i=this.$el.position().left;i+t>e&&this.$el.css("left",e-t)},_adjustCellOffsetValue:function(e){var t=tui.util.browser,i=e;return t.msie&&(9===t.version?i=e-1:t.version>9&&(i=Math.floor(e))),i},_calculateLayoutStyle:function(e,t,i){var n=this.domState.getOffset(),s=this.domState.getElement(e,t),a=s.offset(),l=s.height()+o,r=s.width()+o;return{top:this._adjustCellOffsetValue(a.top)-n.top,left:this._adjustCellOffsetValue(a.left)-n.left,height:l,minWidth:i?r:"",width:i?"":r,lineHeight:l+"px"}},_onEditingStateChanged:function(e){e.isEditing?this._startEditing(e):this._finishEditing()},render:function(){return _.each(this.inputPainters,function(e){e.attachEventHandlers(this.$el,"")},this),this}});t.exports=l},{"../base/view":7,"../common/classNameConst":8,"../common/constMap":9}],50:[function(e,t,i){"use strict";var n=e("./container"),o=e("./layout/content-area"),s=e("./toolbar"),a=e("./pagination"),l=e("./heightResizeHandle"),r=e("./stateLayer"),d=e("./clipboard"),u=e("./layout/frame-lside"),c=e("./layout/frame-rside"),h=e("./layout/header"),m=e("./layout/resizeHandler"),g=e("./layout/body"),f=e("./layout/bodyTable"),_=e("./rowList"),p=e("./selectionLayer"),M=e("./editingLayer"),C=e("./datePickerLayer"),w=e("./focusLayer"),v=e("../common/util").isOptionEnabled,y=tui.util.defineClass({init:function(e){this.domState=e.domState,this.modelManager=e.modelManager,this.painterManager=e.painterManager,this.componentHolder=e.componentHolder,this.singleClickEdit=e.singleClickEdit,this.resizeHandle=e.resizeHandle,this.copyOption=e.copyOption},createContainer:function(){return new n({el:this.domState.$el,singleClickEdit:this.singleClickEdit,dataModel:this.modelManager.dataModel,dimensionModel:this.modelManager.dimensionModel,focusModel:this.modelManager.focusModel,gridId:this.modelManager.gridId,viewFactory:this})},createContentArea:function(){return new o({dimensionModel:this.modelManager.dimensionModel,viewFactory:this})},createToolbar:function(){return this.modelManager.toolbarModel.isEnabled()?new s({gridId:this.modelManager.gridId,dimensionModel:this.modelManager.dimensionModel,toolbarModel:this.modelManager.toolbarModel}):null},createPagination:function(){return v(this.componentHolder.getOptions("pagination"))?new a({componentHolder:this.componentHolder,dimensionModel:this.modelManager.dimensionModel}):null},createHeightResizeHandle:function(){return v(this.resizeHandle)?new l({dimensionModel:this.modelManager.dimensionModel}):null},createStateLayer:function(){return new r({dimensionModel:this.modelManager.dimensionModel,renderModel:this.modelManager.renderModel})},createClipboard:function(){return new d({columnModel:this.modelManager.columnModel,dataModel:this.modelManager.dataModel,dimensionModel:this.modelManager.dimensionModel,selectionModel:this.modelManager.selectionModel,focusModel:this.modelManager.focusModel,renderModel:this.modelManager.renderModel,painterManager:this.modelManager.painterManager,copyOption:this.copyOption})},createFrame:function(e){var t="L"===e?u:c;return new t({dimensionModel:this.modelManager.dimensionModel,renderModel:this.modelManager.renderModel,viewFactory:this})},createHeader:function(e){return new h({whichSide:e,renderModel:this.modelManager.renderModel,dimensionModel:this.modelManager.dimensionModel,focusModel:this.modelManager.focusModel,selectionModel:this.modelManager.selectionModel,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,viewFactory:this})},createHeaderResizeHandler:function(e){return new m({whichSide:e,dimensionModel:this.modelManager.dimensionModel,columnModel:this.modelManager.columnModel})},createBody:function(e){return new g({whichSide:e,renderModel:this.modelManager.renderModel,dimensionModel:this.modelManager.dimensionModel,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,selectionModel:this.modelManager.selectionModel,focusModel:this.modelManager.focusModel,viewFactory:this})},createBodyTable:function(e){return new f({whichSide:e,dimensionModel:this.modelManager.dimensionModel,renderModel:this.modelManager.renderModel,columnModel:this.modelManager.columnModel,painterManager:this.painterManager,viewFactory:this})},createRowList:function(e){return new _({el:e.el,whichSide:e.whichSide,bodyTableView:e.bodyTableView,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,dimensionModel:this.modelManager.dimensionModel,selectionModel:this.modelManager.selectionModel,renderModel:this.modelManager.renderModel,focusModel:this.modelManager.focusModel,painterManager:this.painterManager})},createSelectionLayer:function(e){return new p({whichSide:e,selectionModel:this.modelManager.selectionModel,dimensionModel:this.modelManager.dimensionModel,columnModel:this.modelManager.columnModel})},createEditingLayer:function(){return new M({renderModel:this.modelManager.renderModel,inputPainters:this.painterManager.getInputPainters(!0),domState:this.domState})},createDatePickerLayer:function(){return tui.component&&tui.component.DatePicker&&tui.component.Calendar?new C({columnModel:this.modelManager.columnModel,textPainter:this.painterManager.getInputPainters().text,domState:this.domState}):null},createFocusLayer:function(e){return new w({whichSide:e,dimensionModel:this.modelManager.dimensionModel,columnModel:this.modelManager.columnModel,focusModel:this.modelManager.focusModel})}});t.exports=y},{"../common/util":12,"./clipboard":46,"./container":47,"./datePickerLayer":48,"./editingLayer":49,"./focusLayer":51,"./heightResizeHandle":52,"./layout/body":53,"./layout/bodyTable":54,"./layout/content-area":55,"./layout/frame-lside":56,"./layout/frame-rside":57,"./layout/header":59,"./layout/resizeHandler":60,"./pagination":61,"./rowList":62,"./selectionLayer":63,"./stateLayer":64,"./toolbar":65}],51:[function(e,t,i){"use strict";var n=e("../base/view"),o=e("../common/constMap").dimension.CELL_BORDER_WIDTH,s=e("../common/classNameConst"),a='<div class="'+s.LAYER_FOCUS_BORDER+'"></div>',l=n.extend({initialize:function(e){this.focusModel=e.focusModel,this.columnModel=e.columnModel,this.dimensionModel=e.dimensionModel,this.whichSide=e.whichSide,this.borderEl={$top:$(a),$left:$(a),$right:$(a),$bottom:$(a)},this.listenTo(this.dimensionModel,"columnWidthChanged",this._onColumnWidthChanged),this.listenTo(this.focusModel,"blur",this._onBlur),this.listenTo(this.focusModel,"focus",this._onFocus)},className:s.LAYER_FOCUS,_onColumnWidthChanged:function(){var e=this.focusModel;this.$el.is(":visible")&&this._refreshBorderLayout(e.get("rowKey"),e.get("columnName"))},_onBlur:function(){this.$el.hide()},_onFocus:function(e,t){var i=this.columnModel.isLside(t)?"L":"R";i===this.whichSide&&(this._refreshBorderLayout(e,t),this.$el.show())},_refreshBorderLayout:function(e,t){var i=this.dimensionModel.getCellPosition(e,t),n=i.right-i.left,s=i.bottom-i.top;this.borderEl.$left.css({top:i.top,left:i.left,width:o,height:s+o}),this.borderEl.$top.css({top:0===i.top?o:i.top,left:i.left,width:n+o,height:o}),this.borderEl.$right.css({top:i.top,left:i.left+n,width:o,height:s+o}),this.borderEl.$bottom.css({top:i.top+s,left:i.left,width:n+o,height:o})},render:function(){var e=this.$el;return _.each(this.borderEl,function(t){e.append(t)}),e.hide(),this}});t.exports=l},{"../base/view":7,"../common/classNameConst":8,"../common/constMap":9}],52:[function(e,t,i){"use strict";var n=e("../base/view"),o=e("../common/classNameConst"),s='<a href="#"><span></span></a>',a=n.extend({initialize:function(e){this.dimensionModel=e.dimensionModel,this.timeoutIdForResize=0,this.on("appended",this._onAppended)},className:o.HEIGHT_RESIZE_HANDLE,events:{mousedown:"_onMouseDown"},_onAppended:function(){this.dimensionModel.set("resizeHandleHeight",this.$el.outerHeight())},_attachMouseEvent:function(){$(document).on("mousemove",$.proxy(this._onMouseMove,this)),$(document).on("mouseup",$.proxy(this._onMouseUp,this)),$(document).on("selectstart",$.proxy(this._onSelectStart,this))},_detachMouseEvent:function(){$(document).off("mousemove",$.proxy(this._onMouseMove,this)),$(document).off("mouseup",$.proxy(this._onMouseUp,this)),$(document).off("selectstart",$.proxy(this._onSelectStart,this))},_onMouseDown:function(e){e.preventDefault(),$(document.body).css("cursor","row-resize"),this._attachMouseEvent()},_onMouseMove:function(e){var t=this.dimensionModel,i=t.get("offsetTop"),n=t.get("headerHeight"),o=t.get("toolbarHeight"),s=t.get("rowHeight"),a=e.pageY-i-n-o;clearTimeout(this.timeoutIdForResize),a=Math.max(a,s+t.getScrollXHeight()),this.timeoutIdForResize=setTimeout(function(){t.set({bodyHeight:a})},0)},_onMouseUp:function(){$(document.body).css("cursor","default"),this._detachMouseEvent()},_onSelectStart:function(e){return e.preventDefault(),!1},render:function(){return this._destroyChildren(),this.$el.html(s),this},destroy:function(){this.stopListening(),this._onMouseUp(),this._destroyChildren(),this.remove()}});t.exports=a},{"../base/view":7,"../common/classNameConst":8}],53:[function(e,t,i){"use strict";var n=e("../../base/view"),o=e("../../common/util"),s=e("../../common/constMap"),a=e("../../common/classNameConst"),l=s.attrName,r=s.selectionType,d=200,u=10,c=n.extend({initialize:function(e){n.prototype.initialize.call(this),this.setOwnProperties({dimensionModel:e.dimensionModel,dataModel:e.dataModel,columnModel:e.columnModel,renderModel:e.renderModel,selectionModel:e.selectionModel,focusModel:e.focusModel,viewFactory:e.viewFactory,$container:null,whichSide:e&&e.whichSide||"R"}),this.listenTo(this.dimensionModel,"change:bodyHeight",this._onBodyHeightChange).listenTo(this.dataModel,"add remove reset",this._resetContainerHeight).listenTo(this.renderModel,"change:scrollTop",this._onScrollTopChange).listenTo(this.renderModel,"change:scrollLeft",this._onScrollLeftChange)},className:a.BODY_AREA,events:function(){var e={};return e.scroll="_onScroll",e["mousedown ."+a.BODY_CONTAINER]="_onMouseDown",e},_onBodyHeightChange:function(e,t){this.$el.css("height",t+"px")},_resetContainerHeight:function(){this.$container.css({height:this.dimensionModel.get("totalRowHeight")})},_onScroll:function(e){var t={scrollTop:e.target.scrollTop};"R"===this.whichSide&&(t.scrollLeft=e.target.scrollLeft),
this.renderModel.set(t)},_onScrollLeftChange:function(e,t){"R"===this.whichSide&&(this.el.scrollLeft=t)},_onScrollTopChange:function(e,t){this.el.scrollTop=t},_getColumnNameByVisibleIndex:function(e){var t=this.columnModel.getVisibleColumnModelList(null,!1);return t[e].columnName},_onMouseDown:function(e){var t,i=this.columnModel,n=$(e.target),o=n.closest("td"),s=n.closest("tr"),a=o.attr(l.COLUMN_NAME),r=s.attr(l.ROW_KEY),d=!0,u=_.pick(e,"pageX","pageY","shiftKey");o.length?r&&a?(t={column:i.indexOfColumnName(a,!0),row:this.dataModel.indexOfRowKey(r)},"radio"===this.columnModel.get("selectType")&&this.dataModel.check(t.row)):d=!1:(t=this.dimensionModel.getIndexFromMousePosition(e.pageX,e.pageY),a=this._getColumnNameByVisibleIndex(t.column)),d&&this._controlStartAction(u,t,a,n.is("input"))},_controlStartAction:function(e,t,i,n){var s=this.selectionModel,a=t.column,l=t.row,d=!0;s.isEnabled()&&(o.isMetaColumn(i)?"_number"===i?this._updateSelectionByRow(l,e.shiftKey):d=!1:(s.setType(r.CELL),e.shiftKey&&!n?s.update(l,a):(d=this._doFocusAtAndCheckDraggable(l,a),s.end())),!n&&d&&(this.dimensionModel.refreshLayout(),this._attachDragEvents(e.pageX,e.pageY)))},_updateSelectionByRow:function(e,t){t?this.selectionModel.update(e,0,r.ROW):this.selectionModel.selectRow(e)},_doFocusAtAndCheckDraggable:function(e,t){var i=(new Date).getTime(),n=this.focusModel.focusAt(e,t),o=(new Date).getTime(),s=o-i>d;return n&&!s},_attachDragEvents:function(e,t){this.setOwnProperties({mouseDownX:e,mouseDownY:t}),$(document).on("mousemove",$.proxy(this._onMouseMove,this)).on("mouseup",$.proxy(this._detachDragEvents,this)).on("selectstart",$.proxy(this._onSelectStart,this))},_detachDragEvents:function(){this.selectionModel.stopAutoScroll(),$(document).off("mousemove",this._onMouseMove).off("mouseup",this._detachDragEvents).off("selectstart",this._onSelectStart)},_onMouseMove:function(e){var t=this._getMouseMoveDistance(e.pageX,e.pageY)>u;(this.selectionModel.hasSelection()||t)&&this.selectionModel.updateByMousePosition(e.pageX,e.pageY)},_getMouseMoveDistance:function(e,t){var i=Math.abs(this.mouseDownX-e),n=Math.abs(this.mouseDownY-t);return Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(n,2)))},_onSelectStart:function(e){return e.preventDefault(),!1},render:function(){var e=this.whichSide;return this._destroyChildren(),this.dimensionModel.get("scrollX")||this.$el.css("overflow-x","hidden"),this.dimensionModel.get("scrollY")||"R"!==e||this.$el.css("overflow-y","hidden"),this.$el.css("height",this.dimensionModel.get("bodyHeight")),this.$container=$("<div>").addClass(a.BODY_CONTAINER),this.$el.append(this.$container),this._addChildren([this.viewFactory.createBodyTable(e),this.viewFactory.createSelectionLayer(e),this.viewFactory.createFocusLayer(e)]),this.$container.append(this._renderChildren()),this._resetContainerHeight(),this}});t.exports=c},{"../../base/view":7,"../../common/classNameConst":8,"../../common/constMap":9,"../../common/util":12}],54:[function(e,t,i){"use strict";var n=e("../../base/view"),o=e("../../common/util"),s=e("../../common/constMap"),a=e("../../common/classNameConst"),l=s.dimension.CELL_BORDER_WIDTH,r=s.attrName.COLUMN_NAME,d=n.extend({initialize:function(e){n.prototype.initialize.call(this),this.setOwnProperties({dimensionModel:e.dimensionModel,renderModel:e.renderModel,columnModel:e.columnModel,viewFactory:e.viewFactory,painterManager:e.painterManager,whichSide:e.whichSide||"R"}),this.listenTo(this.dimensionModel,"columnWidthChanged",this._onColumnWidthChanged),this.listenTo(this.renderModel,"change:dummyRowCount",this._resetOverflow),this.listenTo(this.dimensionModel,"change:bodyHeight",this._resetHeight),this._attachAllTableEventHandlers()},className:a.BODY_TABLE_CONTAINER,template:_.template('<table class="'+a.TABLE+'">   <colgroup><%=colGroup%></colgroup>   <tbody><%=tbody%></tbody></table>'),templateCol:_.template('<col <%=attrColumnName%>="<%=columnName%>" style="width:<%=width%>px">'),_onColumnWidthChanged:function(){var e=this.dimensionModel.getColumnWidthList(this.whichSide),t=this.$el.find("col"),i=0;_.each(e,function(e,n){t.eq(n).css("width",e-d.EXTRA_WIDTH+l),i+=e+l},this),o.isBrowserIE7()&&this.$el.width(i)},_resetOverflow:function(){var e="visible";this.renderModel.get("dummyRowCount")>0&&(e="hidden"),this.$el.css("overflow",e)},_resetHeight:function(){var e=this.dimensionModel;this.renderModel.get("dummyRowCount")>0?this.$el.height(e.get("bodyHeight")-e.getScrollXHeight()):this.$el.css("height","")},resetTablePosition:function(){this.$el.css("top",this.renderModel.get("top"))},render:function(){return this._destroyChildren(),this.$el.html(this.template({colGroup:this._getColGroupMarkup(),tbody:""})),this._addChildren(this.viewFactory.createRowList({bodyTableView:this,el:this.$el.find("tbody"),whichSide:this.whichSide})),this._renderChildren(),this._resetHeight(),this._resetOverflow(),this},_attachAllTableEventHandlers:function(){var e=this.painterManager.getCellPainters();_.each(e,function(e){e.attachEventHandlers(this.$el,"")},this)},redrawTable:function(e){return this.$el[0].innerHTML=this.template({colGroup:this._getColGroupMarkup(),tbody:e}),this.$el.find("tbody")},_getColGroupMarkup:function(){var e=this.whichSide,t=this.dimensionModel.getColumnWidthList(e),i=this.columnModel.getVisibleColumnModelList(e,!0),n="";return _.each(i,function(e,i){n+=this.templateCol({attrColumnName:r,columnName:e.columnName,width:t[i]-d.EXTRA_WIDTH+l})},this),n}},{EXTRA_WIDTH:o.isBrowserIE7()?20:0});t.exports=d},{"../../base/view":7,"../../common/classNameConst":8,"../../common/constMap":9,"../../common/util":12}],55:[function(e,t,i){"use strict";function n(e){return $("<div>").addClass(a.BORDER_LINE).addClass(e)}var o,s=e("../../base/view"),a=e("../../common/classNameConst");o=s.extend({initialize:function(e){s.prototype.initialize.call(this),this.viewFactory=e.viewFactory,this.dimensionModel=e.dimensionModel,this._addFrameViews()},className:a.CONTENT_AREA,_addFrameViews:function(){var e=this.viewFactory;this._addChildren([e.createFrame("L"),e.createFrame("R")])},render:function(){var e=this.dimensionModel,t=e.getScrollXHeight(),i=this._renderChildren().concat([n(a.BORDER_TOP),n(a.BORDER_LEFT),n(a.BORDER_RIGHT),n(a.BORDER_BOTTOM).css("bottom",t)]);return e.get("scrollX")||this.$el.addClass(a.NO_SCROLL_X),e.get("scrollY")||this.$el.addClass(a.NO_SCROLL_Y),this.$el.append(i),this}}),t.exports=o},{"../../base/view":7,"../../common/classNameConst":8}],56:[function(e,t,i){"use strict";var n=e("./frame"),o=e("../../common/classNameConst"),s=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.setOwnProperties({whichSide:"L"})},className:o.LSIDE_AREA,_onColumnWidthChanged:function(){this.$el.css({width:this.dimensionModel.get("lsideWidth")})},beforeRender:function(){this.$el.css({display:"block",width:this.dimensionModel.get("lsideWidth")})},afterRender:function(){this.dimensionModel.get("scrollX")&&this.$el.append($("<div>").addClass(o.SCROLLBAR_LEFT_BOTTOM))}});t.exports=s},{"../../common/classNameConst":8,"./frame":58}],57:[function(e,t,i){"use strict";var n=e("./frame"),o=e("../../common/classNameConst"),s=e("../../common/constMap").dimension.CELL_BORDER_WIDTH,a=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.setOwnProperties({whichSide:"R",$scrollBorder:null}),this.listenTo(this.dimensionModel,"change:bodyHeight change:headerHeight",this._resetScrollBorderHeight)},className:o.RSIDE_AREA,_onColumnWidthChanged:function(){this._refreshLayout()},_refreshLayout:function(){var e=this.dimensionModel,t=e.get("rsideWidth"),i=e.get("lsideWidth");i>0&&!e.isDivisionBorderDoubled()&&(t+=s,i-=s),this.$el.css({width:t,marginLeft:i})},_resetScrollBorderHeight:function(){var e,t;this.$scrollBorder&&(e=this.dimensionModel,t=e.get("bodyHeight")-e.getScrollXHeight(),this.$scrollBorder.height(t))},beforeRender:function(){this.$el.css("display","block"),this._refreshLayout()},afterRender:function(){var e,t,i,n,s=this.dimensionModel;s.get("scrollY")&&(n=s.get("headerHeight"),e=$("<div />").addClass(o.SCROLLBAR_HEAD),t=$("<div />").addClass(o.SCROLLBAR_BORDER),e.height(n-2),t.css("top",n+"px"),this.$el.append(e,t),s.get("scrollX")&&(i=$("<div>").addClass(o.SCROLLBAR_RIGHT_BOTTOM),this.$el.append(i)),this.$scrollBorder=t,this._resetScrollBorderHeight())}});t.exports=a},{"../../common/classNameConst":8,"../../common/constMap":9,"./frame":58}],58:[function(e,t,i){"use strict";var n=e("../../base/view"),o=n.extend({initialize:function(e){n.prototype.initialize.call(this),this.setOwnProperties({viewFactory:e.viewFactory,renderModel:e.renderModel,dimensionModel:e.dimensionModel,whichSide:e.whichSide||"R"}),this.listenTo(this.renderModel,"columnModelChanged",this.render).listenTo(this.dimensionModel,"columnWidthChanged",this._onColumnWidthChanged)},render:function(){var e=this.viewFactory;return this.$el.empty(),this._destroyChildren(),this.beforeRender(),this._addChildren([e.createHeader(this.whichSide),e.createBody(this.whichSide)]),this.$el.append(this._renderChildren()),this.afterRender(),this},_onColumnWidthChanged:function(){},beforeRender:function(){},afterRender:function(){}});t.exports=o},{"../../base/view":7}],59:[function(e,t,i){"use strict";var n=e("../../base/view"),o=e("../../common/util"),s=e("../../common/constMap"),a=e("../../common/classNameConst"),l=10,r=s.selectionType.COLUMN,d=s.attrName.COLUMN_NAME,u=s.dimension.CELL_BORDER_WIDTH,c=s.dimension.TABLE_BORDER_WIDTH,h=n.extend({initialize:function(e){n.prototype.initialize.call(this),this.setOwnProperties({renderModel:e.renderModel,dimensionModel:e.dimensionModel,selectionModel:e.selectionModel,focusModel:e.focusModel,columnModel:e.columnModel,dataModel:e.dataModel,viewFactory:e.viewFactory,timeoutForAllChecked:0,whichSide:e.whichSide||"R"}),this.listenTo(this.renderModel,"change:scrollLeft",this._onScrollLeftChange).listenTo(this.dimensionModel,"columnWidthChanged",this._onColumnWidthChanged).listenTo(this.selectionModel,"change:range",this._refreshSelectedHeaders).listenTo(this.focusModel,"change:columnName",this._refreshSelectedHeaders).listenTo(this.dataModel,"sortChanged",this._updateBtnSortState),"L"===this.whichSide&&"checkbox"===this.columnModel.get("selectType")&&this.listenTo(this.dataModel,"change:_button disabledChanged extraDataChanged add remove reset",_.debounce(_.bind(this._syncCheckedState,this),l))},className:a.HEAD_AREA,events:{click:"_onClick","mousedown th":"_onMouseDown"},template:_.template('<table class="'+a.TABLE+'"><colgroup><%=colGroup%></colgroup><tbody><%=tBody%></tbody></table>'),templateHeader:_.template('<th <%=attrColumnName%>="<%=columnName%>" class="<%=className%>" height="<%=height%>" <%if(colspan > 0) {%>colspan=<%=colspan%> <%}%><%if(rowspan > 0) {%>rowspan=<%=rowspan%> <%}%>><%=title%><%=btnSort%></th>'),templateCol:_.template('<col <%=attrColumnName%>="<%=columnName%>" style="width:<%=width%>px">'),markupBtnSort:'<a class="'+a.BTN_SORT+'"></a>',_getColGroupMarkup:function(){var e=this._getColumnData(),t=e.widthList,i=e.modelList,n=[];return _.each(t,function(e,t){n.push(this.templateCol({attrColumnName:d,columnName:i[t].columnName,width:e+u}))},this),n.join("")},_getSelectedColumnNames:function(){var e=this.selectionModel.get("range").column,t=this.columnModel.getVisibleColumnModelList(),i=t.slice(e[0],e[1]+1);return _.pluck(i,"columnName")},_getContainingMergedColumnNames:function(e){var t=this.columnModel,i=_.pluck(t.get("columnMerge"),"columnName");return _.filter(i,function(i){var n=t.getUnitColumnNamesIfMerged(i);return _.every(n,function(t){return _.contains(e,t)})})},_refreshSelectedHeaders:function(){var e,t,i=this.$el.find("th");this.selectionModel.hasSelection()?e=this._getSelectedColumnNames():this.focusModel.has(!0)&&(e=[this.focusModel.get("columnName")]),i.removeClass(a.CELL_SELECTED),e&&(t=this._getContainingMergedColumnNames(e),_.each(e.concat(t),function(e){i.filter("["+d+'="'+e+'"]').addClass(a.CELL_SELECTED)}))},_onMouseDown:function(e){var t,i;this.selectionModel.isEnabled()&&!$(e.target).is("a."+a.BTN_SORT)&&(t=$(e.target).closest("th").attr(d),t&&(i=this.columnModel.getUnitColumnNamesIfMerged(t),this._hasMetaColumn(i)||this._controlStartAction(i,e.pageX,e.pageY,e.shiftKey)))},_controlStartAction:function(e,t,i,n){var o=this.columnModel,s=_.map(e,function(e){return o.indexOfColumnName(e,!0)});n?this._startColumnSelectionWithShiftKey(s,t,i):this._startColumnSelectionWithoutShiftKey(s),this._attachDragEvents()},_startColumnSelectionWithShiftKey:function(e,t,i){var n=this.selectionModel,o=Math.max.apply(null,e);n.update(0,o,r),n.extendColumnSelection(e,t,i)},_startColumnSelectionWithoutShiftKey:function(e){var t=this.selectionModel,i=o.getMinMax(e),n=i.min,s=i.max;t.setMinimumColumnRange([n,s]),t.selectColumn(n),t.update(0,s)},_attachDragEvents:function(){$(document).on("mousemove",$.proxy(this._onMouseMove,this)).on("mouseup",$.proxy(this._detachDragEvents,this)).on("selectstart",$.proxy(this._onSelectStart,this))},_detachDragEvents:function(){this.selectionModel.stopAutoScroll(),$(document).off("mousemove",this._onMouseMove).off("mouseup",this._detachDragEvents).off("selectstart",this._onSelectStart)},_onMouseMove:function(e){var t,i,n=this.columnModel,o=!0,s=$(e.target).closest("th").attr(d);s?(t=n.getUnitColumnNamesIfMerged(s),i=_.map(t,function(e){return n.indexOfColumnName(e,!0)})):$.contains(this.el,e.target)&&(o=!1),o&&this.selectionModel.extendColumnSelection(i,e.pageX,e.pageY)},_hasMetaColumn:function(e){return _.some(e,function(e){return o.isMetaColumn(e)})},_onSelectStart:function(e){return e.preventDefault(),!1},_getHeaderMainCheckbox:function(){return this.$el.find("th["+d+'="_button"] input')},_syncCheckedState:function(){var e,t,i=this.dataModel.getCheckedState();e=this._getHeaderMainCheckbox(),e.length&&(t=i.available?{checked:i.available===i.checked,disabled:!1}:{checked:!1,disabled:!0},e.prop(t))},_onColumnWidthChanged:function(){var e=this._getColumnData(),t=e.widthList,i=this.$el.find("col");_.each(t,function(e,t){i.eq(t).css("width",e+u)})},_onScrollLeftChange:function(e,t){"R"===this.whichSide&&(this.el.scrollLeft=t)},_onClick:function(e){var t=$(e.target),i=t.closest("th").attr(d);"_button"===i&&t.is("input")?t.prop("checked")?this.dataModel.checkAll():this.dataModel.uncheckAll():t.is("a."+a.BTN_SORT)&&this.dataModel.sortByField(i)},_updateBtnSortState:function(e){this._$currentSortBtn&&this._$currentSortBtn.removeClass(a.BTN_SORT_DOWN+" "+a.BTN_SORT_UP),this._$currentSortBtn=this.$el.find("th["+d+'="'+e.columnName+'"] a.'+a.BTN_SORT),this._$currentSortBtn.addClass(e.isAscending?a.BTN_SORT_UP:a.BTN_SORT_DOWN)},render:function(){return this._destroyChildren(),"R"!==this.whichSide||this.dimensionModel.get("scrollY")||this.$el.addClass(a.NO_SCROLL_Y),this.$el.css({height:this.dimensionModel.get("headerHeight")-c}).html(this.template({colGroup:this._getColGroupMarkup(),tBody:this._getTableBodyMarkup()})),this._addChildren(this.viewFactory.createHeaderResizeHandler(this.whichSide)),this.$el.append(this._renderChildren()),this},_getColumnData:function(){var e=this.columnModel,t=this.dimensionModel,i=t.getColumnWidthList(this.whichSide),n=e.getVisibleColumnModelList(this.whichSide,!0);return{widthList:i,modelList:n}},_getTableBodyMarkup:function(){var e,t,i=this._getColumnHierarchyList(),n=this._getHierarchyMaxRowCount(i),s=this.dimensionModel.get("headerHeight"),l=new Array(n),r=new Array(n),u=[],c=o.getRowHeight(n,s)-1,h=1;return _.each(i,function(t,o){var m=i[o].length,g=0;_.each(t,function(t,i){var o=t.columnName,f=[a.CELL,a.CELL_HEAD];t.isRequired&&f.push(a.CELL_REQRUIRED),h=m-1===i&&n-m+1>1?n-m+1:1,e=c*h,i===m-1?e=s-g-2:g+=e+1,r[i]===o?(l[i].pop(),u[i]+=1):u[i]=1,r[i]=o,l[i]=l[i]||[],l[i].push(this.templateHeader({attrColumnName:d,columnName:o,className:f.join(" "),height:e,colspan:u[i],rowspan:h,title:t.title,btnSort:t.isSortable?this.markupBtnSort:""}))},this)},this),t=_.map(l,function(e){return"<tr>"+e.join("")+"</tr>"}),t.join("")},_getHierarchyMaxRowCount:function(e){var t=[0];return _.each(e,function(e){t.push(e.length)},this),Math.max.apply(Math,t)},_getColumnHierarchyList:function(){var e,t=this._getColumnData().modelList;return e=_.map(t,function(e){return this._getColumnHierarchy(e).reverse()},this)},_getColumnHierarchy:function(e,t){var i=this.columnModel.get("columnMerge");return t=t||[],e&&(t.push(e),i&&_.each(i,function(i){-1!==$.inArray(e.columnName,i.columnNameList)&&this._getColumnHierarchy(i,t)},this)),t}});h.DELAY_SYNC_CHECK=l,t.exports=h},{"../../base/view":7,"../../common/classNameConst":8,"../../common/constMap":9,"../../common/util":12}],60:[function(e,t,i){"use strict";var n=e("../../base/view"),o=e("../../common/constMap").attrName,s=e("../../common/classNameConst"),a=e("../../common/constMap").dimension.CELL_BORDER_WIDTH,l=n.extend({initialize:function(e){this.setOwnProperties({dimensionModel:e.dimensionModel,columnModel:e.columnModel,whichSide:e.whichSide||"R",isResizing:!1,$target:null,differenceLeft:0,initialWidth:0,initialOffsetLeft:0,initialLeft:0}),this.listenTo(this.dimensionModel,"change:which columnWidthChanged",this._refreshHandlerPosition)},className:s.COLUMN_RESIZE_CONTAINER,events:function(){var e={};return e["mousedown ."+s.COLUMN_RESIZE_HANDLE]="_onMouseDown",e["dblclick ."+s.COLUMN_RESIZE_HANDLE]="_onDblClick",e},template:_.template("<div "+o.COLUMN_INDEX+'="<%=columnIndex%>" '+o.COLUMN_NAME+'="<%=columnName%>" class="'+s.COLUMN_RESIZE_HANDLE+' <%=lastClass%>" style="<%=height%>" title="마우스 드래그를 통해 컬럼의 넓이를 변경할 수 있고,더블클릭을 통해 넓이를 초기화할 수 있습니다."></div>'),_getColumnData:function(){var e=this.columnModel,t=this.dimensionModel,i=t.getColumnWidthList(this.whichSide),n=e.getVisibleColumnModelList(this.whichSide,!0);return{widthList:i,modelList:n}},_getResizeHandlerMarkup:function(){var e=this._getColumnData(),t=e.modelList,i=this.dimensionModel.get("headerHeight"),n=t.length,o=_.map(t,function(e,t){return this.template({lastClass:t+1===n?s.COLUMN_RESIZE_HANDLE_LAST:"",columnIndex:t,columnName:e.columnName,height:i})},this);return o.join("")},render:function(){var e=this.dimensionModel.get("headerHeight"),t=this._getResizeHandlerMarkup();return this.$el.empty().show().html(t).css({marginTop:-e,height:e}),this._refreshHandlerPosition(),this},_refreshHandlerPosition:function(){var e=this._getColumnData(),t=e.widthList,i=this.$el.find("."+s.COLUMN_RESIZE_HANDLE),n=0;tui.util.forEachArray(i,function(e,o){var s=i.eq(o),l=Math.ceil(s.width()/2);n+=t[o]+a,s.css("left",n-l)})},_isResizing:function(){return!!this.isResizing},_onMouseDown:function(e){this._startResizing($(e.target))},_onDblClick:function(e){var t=$(e.target),i=parseInt(t.attr(o.COLUMN_INDEX),10);this.dimensionModel.restoreColumnWidth(this._getHandlerColumnIndex(i)),this._refreshHandlerPosition()},_onMouseUp:function(){this._stopResizing()},_onMouseMove:function(e){var t,i,n;this._isResizing()&&(e.preventDefault(),t=e.pageX-this.initialOffsetLeft,i=this._calculateWidth(e.pageX),n=parseInt(this.$target.attr(o.COLUMN_INDEX),10),this.$target.css("left",t),this.dimensionModel.setColumnWidth(this._getHandlerColumnIndex(n),i),this._refreshHandlerPosition())},_calculateWidth:function(e){var t=e-this.initialOffsetLeft-this.initialLeft;return this.initialWidth+t},_getHandlerColumnIndex:function(e){return"R"===this.whichSide?e+this.columnModel.getVisibleColumnFixCount(!0):e},_startResizing:function(e){var t=this._getColumnData(),i=t.widthList;this.isResizing=!0,this.$target=e,this.initialLeft=parseInt(e.css("left").replace("px",""),10),this.initialOffsetLeft=this.$el.offset().left,this.initialWidth=i[e.attr(o.COLUMN_INDEX)],$("body").css("cursor","col-resize"),$(document).bind("mousemove",$.proxy(this._onMouseMove,this)).bind("mouseup",$.proxy(this._onMouseUp,this)),e[0].setCapture&&e[0].setCapture()},_stopResizing:function(){this.$target&&this.$target[0].releaseCapture&&this.$target[0].releaseCapture(),this.isResizing=!1,this.$target=null,this.initialLeft=0,this.initialOffsetLeft=0,this.initialWidth=0,$("body").css("cursor","default"),$(document).unbind("mousemove",$.proxy(this._onMouseMove,this)).unbind("mouseup",$.proxy(this._onMouseUp,this))},destroy:function(){this.stopListening(),this._stopResizing(),this.remove()}});t.exports=l},{"../../base/view":7,"../../common/classNameConst":8,"../../common/constMap":9}],61:[function(e,t,i){"use strict";var n=e("../base/view"),o=e("../common/classNameConst"),s='<a href="#" class="'+o.PAGINATION_PRE_END+'" title="First page">First</a><a href="#" class="'+o.PAGINATION_PRE+'" title="Previous page">Prev</a> <a href="#" class="'+o.PAGINATION_NEXT+'" title="Next page">Next</a><a href="#" class="'+o.PAGINATION_NEXT_END+'" title="Last page">Last</a><span class="'+o.PAGINATION_PRE_END_OFF+'">First Off</span><span class="'+o.PAGINATION_PRE_OFF+'">Prev Off</span><span class="'+o.PAGINATION_NEXT_OFF+'">Next Off</span><span class="'+o.PAGINATION_NEXT_END_OFF+'">Last Off</span>',a={classPrefix:o.PREFIX,itemCount:1,pagePerPageList:5,isCenterAlign:!0,moveUnit:"page"},l=n.extend({initialize:function(e){this.dimensionModel=e.dimensionModel,this.componentHolder=e.componentHolder,this.on("appended",this._onAppended)},className:o.PAGINATION,render:function(){return this._destroyChildren(),this.$el.empty().html(s),this.componentHolder.setInstance("pagination",this._createComponent()),this},_onAppended:function(){this.dimensionModel.set("paginationHeight",this.$el.outerHeight())},_createOptionObject:function(){var e=this.componentHolder.getOptions("pagination"),t={$preOff:this.$el.find("."+o.PAGINATION_PRE_OFF),$pre_endOff:this.$el.find("."+o.PAGINATION_PRE_END_OFF),$nextOff:this.$el.find("."+o.PAGINATION_NEXT_OFF),$lastOff:this.$el.find("."+o.PAGINATION_NEXT_END_OFF)};return e===!0&&(e={}),e.itemPerPage||(e.itemPerPage=this.dimensionModel.get("displayRowCount")),_.assign({},a,t,e)},_createComponent:function(){var e=tui.util.pick(tui,"component","Pagination");if(!e)throw new Error("Cannot find component 'tui.component.Pagination'");return new e(this._createOptionObject(),this.$el)}});t.exports=l},{"../base/view":7,"../common/classNameConst":8}],62:[function(e,t,i){"use strict";var n=e("../base/view"),o=e("../common/util"),s=e("../common/constMap").attrName,a=e("../common/classNameConst"),l=n.extend({initialize:function(e){var t=e.focusModel,i=e.renderModel,n=e.selectionModel,o=e.whichSide||"R";this.setOwnProperties({whichSide:o,bodyTableView:e.bodyTableView,focusModel:t,renderModel:i,selectionModel:n,dataModel:e.dataModel,columnModel:e.columnModel,collection:i.getCollection(o),painterManager:e.painterManager,sortOptions:null,renderedRowKeys:null}),this.listenTo(this.collection,"change",this._onModelChange).listenTo(this.collection,"restore",this._onModelRestore).listenTo(t,"change:rowKey",this._refreshFocusedRow).listenTo(i,"rowListChanged",this.render),"L"===this.whichSide&&this.listenTo(t,"change:rowKey",this._refreshSelectedMetaColumns).listenTo(n,"change:range",this._refreshSelectedMetaColumns).listenTo(i,"rowListChanged",this._refreshSelectedMetaColumns)},_getColumnModelList:function(){return this.columnModel.getVisibleColumnModelList(this.whichSide,!0)},_removeOldRows:function(e){var t=_.indexOf(this.renderedRowKeys,e[0]),i=_.indexOf(this.renderedRowKeys,_.last(e)),n=this.$el.children("tr");n.slice(0,t).remove(),n.slice(i+1).remove()},_appendNewRows:function(e,t){var i=this.collection.slice(0,_.indexOf(e,t[0])),n=this.collection.slice(_.indexOf(e,_.last(t))+1);this.$el.prepend(this._getRowsHtml(i)),this.$el.append(this._getRowsHtml(n))},_resetRows:function(){var e,t=this._getRowsHtml(this.collection.models);if(l.isInnerHtmlOfTbodyReadOnly)e=this.bodyTableView.redrawTable(t),this.setElement(e,!1),o.isBrowserIE7()&&e.width(e.width());else try{this.$el[0].innerHTML=t}catch(i){l.isInnerHtmlOfTbodyReadOnly=!0,this._resetRows()}},_getRowsHtml:function(e){var t=this.painterManager.getRowPainter(),i=_.pluck(this._getColumnModelList(),"columnName");return _.map(e,function(e){return t.generateHtml(e,i)}).join("")},_getRowElement:function(e){return this.$el.find("tr["+s.ROW_KEY+"="+e+"]")},_refreshSelectedMetaColumns:function(){var e,t=this.$el.find("tr"),i="."+a.CELL_HEAD;e=this.selectionModel.hasSelection()?this._filterRowsByIndexRange(t,this.selectionModel.get("range").row):this._filterRowByKey(t,this.focusModel.get("rowKey")),t.find(i).removeClass(a.CELL_SELECTED),e.find(i).addClass(a.CELL_SELECTED)},_filterRowsByIndexRange:function(e,t){var i,n,o=this.renderModel,s=o.get("startIndex");return i=Math.max(t[0]-s,0),n=Math.max(t[1]-s+1,0),i||n?e.slice(i,n):$()},_filterRowByKey:function(e,t){var i=this.dataModel.indexOfRowKey(t),n=this.renderModel.get("startIndex");return n>i?$():e.eq(i-n)},_refreshFocusedRow:function(){var e=this.focusModel.get("rowKey"),t=this.focusModel.get("prevRowKey");this._setFocusedRowClass(t,!1),this._setFocusedRowClass(e,!0)},_setFocusedRowClass:function(e,t){var i=_.pluck(this._getColumnModelList(),"columnName"),n={};_.each(i,function(i){var o,l=this.dataModel.getMainRowKey(e,i);n[l]||(n[l]=this._getRowElement(l)),o=n[l].find("td["+s.COLUMN_NAME+'="'+i+'"]'),o.toggleClass(a.CELL_CURRENT_ROW,t)},this)},render:function(e){var t,i=this.collection.pluck("rowKey");return this.bodyTableView.resetTablePosition(),e?this._resetRows():(t=_.intersection(i,this.renderedRowKeys),_.isEmpty(i)||_.isEmpty(t)||t.length/i.length<.7?this._resetRows():(this._removeOldRows(t),this._appendNewRows(i,t))),this.renderedRowKeys=i,this},_onModelChange:function(e){var t=this._getRowElement(e.get("rowKey"));this.painterManager.getRowPainter().refresh(e.changed,t)},_onModelRestore:function(e){var t=this.dataModel.getElement(e.rowKey,e.columnName),i=this.columnModel.getEditType(e.columnName);this.painterManager.getCellPainter(i).refresh(e,t)}},{isInnerHtmlOfTbodyReadOnly:tui.util.browser.msie&&tui.util.browser.version<=9});t.exports=l},{"../base/view":7,"../common/classNameConst":8,"../common/constMap":9,"../common/util":12}],63:[function(e,t,i){"use strict";var n=e("../base/view"),o=e("../common/util"),s=e("../common/classNameConst"),a=e("../common/constMap").dimension.CELL_BORDER_WIDTH,l=n.extend({initialize:function(e){this.setOwnProperties({whichSide:e.whichSide||"R",dimensionModel:e.dimensionModel,columnModel:e.columnModel,selectionModel:e.selectionModel}),this._updateColumnWidthList(),this.listenTo(this.dimensionModel,"columnWidthChanged",this._onChangeColumnWidth),this.listenTo(this.selectionModel,"change:range",this.render)},className:s.LAYER_SELECTION,_updateColumnWidthList:function(){this.columnWidthList=this.dimensionModel.getColumnWidthList(this.whichSide)},_onChangeColumnWidth:function(){this._updateColumnWidthList(),this.render()},_getOwnSideColumnRange:function(e){var t=this.columnModel.getVisibleColumnFixCount(),i=null;return"L"===this.whichSide?e[0]<t&&(i=[e[0],Math.min(e[1],t-1)]):e[1]>=t&&(i=[Math.max(e[0],t)-t,e[1]-t]),i},_getVerticalStyles:function(e){var t=this.dimensionModel.get("rowHeight"),i=o.getHeight(e[0],t),n=o.getHeight(e[1]-e[0]+1,t)-a;return{top:i+"px",height:n+"px"}},_getHorizontalStyles:function(e){var t=this.columnWidthList,i=this.columnModel.getVisibleMetaColumnCount(),n=e[0],o=e[1],s=0,l=0,r=0;for("L"===this.whichSide&&(n+=i,o+=i),o=Math.min(o,t.length-1);o>=r;r+=1)n>r?s+=t[r]+a:l+=t[r]+a;return l-=a,{left:s+"px",width:l+"px"}},render:function(){var e,t,i=this.selectionModel.get("range");return i&&(t=this._getOwnSideColumnRange(i.column)),t?(e=_.assign({},this._getVerticalStyles(i.row),this._getHorizontalStyles(t)),this.$el.show().css(e)):this.$el.hide(),this}});t.exports=l},{"../base/view":7,"../common/classNameConst":8,"../common/constMap":9,"../common/util":12}],64:[function(e,t,i){"use strict";var n=e("../base/view"),o=e("../common/constMap").renderState,s=e("../common/classNameConst"),a=e("../common/constMap").dimension.TABLE_BORDER_WIDTH,l=n.extend({initialize:function(e){this.dimensionModel=e.dimensionModel,this.renderModel=e.renderModel,this.timeoutIdForDelay=null,this.listenTo(this.dimensionModel,"change",this._refreshLayout),this.listenTo(this.renderModel,"change:state",this.render)},className:s.LAYER_STATE,template:_.template('<div class="'+s.LAYER_STATE_CONTENT+'">    <%= text %>    <% if (isLoading) { %>    <div class="'+s.LAYER_STATE_LOADING+'"></div>    <% } %></div>'),render:function(){var e=this.renderModel.get("state");return e===o.DONE?this.$el.hide():this._showLayer(e),this},_showLayer:function(e){var t=this.template({text:this._getMessage(e),isLoading:e===o.LOADING});this.$el.html(t).show(),this._refreshLayout()},_getMessage:function(e){switch(e){case o.LOADING:return"요청을 처리 중입니다.";case o.EMPTY:return this.renderModel.get("emptyMessage")||"데이터가 존재하지 않습니다.";default:return null}},_refreshLayout:function(){var e=this.dimensionModel.get("headerHeight"),t=this.dimensionModel.get("toolbarHeight");this.$el.css("top",e+t-a)}});t.exports=l},{"../base/view":7,"../common/classNameConst":8,"../common/constMap":9}],65:[function(e,t,i){"use strict";var n=e("../base/view"),o=e("../common/classNameConst"),s=n.extend({initialize:function(e){this.setOwnProperties({gridId:e.gridId,toolbarModel:e.toolbarModel,dimensionModel:e.dimensionModel}),this.on("appended",this._onAppended),this.listenTo(this.toolbarModel,"change:isExcelButtonVisible change:isExcelAllButtonVisible",this.render)},className:o.TOOLBAR,events:function(){var e={};return e["click ."+o.BTN_EXCEL]="_onClickExcel",e},templateExcelBtn:_.template('<a href="#" class="'+o.BTN_EXCEL+" "+o.BTN_TEXT+' <%=className%>"><span><em class="'+o.BTN_EXCEL_ICON+'"></em><%=text%></span></a>'),_onAppended:function(){this.dimensionModel.set("toolbarHeight",this.$el.outerHeight())},_onClickExcel:function(e){var t,i=tui.Grid.getInstanceById(this.gridId),n=i.getAddOn("Net");e.preventDefault(),n&&(t=$(e.target).closest("a"),t.hasClass(o.BTN_EXCEL_PAGE)?n.download("excel"):t.hasClass(o.BTN_EXCEL_ALL)&&n.download("excelAll"))},render:function(){var e=this.toolbarModel,t=$("<div>");return e.get("isExcelButtonVisible")&&t.append(this.templateExcelBtn({className:o.BTN_EXCEL_PAGE,text:"엑셀 다운로드"})),e.get("isExcelAllButtonVisible")&&t.append(this.templateExcelBtn({className:o.BTN_EXCEL_ALL,text:"전체 엑셀 다운로드"})),this.$el.empty().append(t),this}});t.exports=s},{"../base/view":7,"../common/classNameConst":8}]},{},[15]);