<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<title>퍼포먼스 테스트</title>
	<style media="screen">
	</style>
</head>
<body>
<button id="t1">RUN1</button>
<button id="t2">RUN2</button>
<button id="t3">RUN3</button>
</body>
<script src="../lib/underscore/underscore.js"></script>
<script>
var arr = [];
var command = ['sum', 'count', 'min', 'max', 'avg'];

_.times(5000000, function(n) {
  arr[n] = Math.random() * 100000;
});

function t1() {
  console.time('t1');
  var sum = _.reduce(arr, function(memo, value) {
      return memo + value;
  }, 0);
  var min = _.min(arr);
  var max = _.max(arr);

  console.log(sum, min, max);
  console.timeEnd('t1');
}

function t2() {
  console.time('t2');
  var sum = 0;
  var min = Number.MAX_VALUE;
  var max = Number.MIN_VALUE;
  var i = 0;

  arr.forEach(function(value) {
    sum += value;
    if (min > value) {
      min = value;
    }
    if (max < value) {
      max = value;
    }
  });

  console.log(sum, min, max);
  console.timeEnd('t2');
}

function t3() {
  console.time('t3');
  var sum = 0;
  var min = Number.MAX_VALUE;
  var max = Number.MIN_VALUE;
  var i = 0, len = arr.length, value;

  for (i; i < len; i++) {
    value = arr[i];
    sum += value;
    if (min > value) {
      min = value;
    }
    if (max < value) {
      max = value;
    }
  }

  console.log(sum, min, max);
  console.timeEnd('t3');
}

document.querySelector('#t1').addEventListener('click', function() {
  t1();
});
document.querySelector('#t2').addEventListener('click', function() {
  t2();
});

document.querySelector('#t3').addEventListener('click', function() {
  t3();
});
</script>
</html>
