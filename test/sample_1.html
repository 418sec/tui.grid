<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<title>Sample 1</title>
	<link rel="stylesheet" type="text/css" href="../css/Grid.css" />
</head>
<body>
<div>
	<div class="grid_wrapper uio_grid" id="wrapper1">
	</div>

	<div id="buttonList1">
	</div>
	<div>
		<h1>RESULT</h1>
	</div>
	<div id="result1">

	</div>
</div>
<div>
	<div class="grid_wrapper uio_grid" id="wrapper2">
	</div>

	<div id="buttonList2">
	</div>
	<div>
		<h1>RESULT</h1>
	</div>
	<div id="result2">

	</div>
</div>

</body>

<script type="text/javascript" src="../libs/jquery-1.11.1.js"></script>
<script type="text/javascript" src="../libs/underscore.js"></script>
<script type="text/javascript" src="../libs/backbone.js"></script>
<script type="text/javascript" src="../data/dummy_data.js"></script>

<script type="text/javascript" src="../src/Core/Util.js"></script>
<script type="text/javascript" src="../src/Core/Base.js"></script>

<script type="text/javascript" src="../src/Data/ColumnModel.js"></script>
<script type="text/javascript" src="../src/Data/RowList.js"></script>

<script type="text/javascript" src="../src/Model/Cell.js"></script>
<script type="text/javascript" src="../src/Model/Dimension.js"></script>
<script type="text/javascript" src="../src/Model/RowList.js"></script>
<script type="text/javascript" src="../src/Model/Renderer.js"></script>
<script type="text/javascript" src="../src/Model/Renderer.Smart.js"></script>

<script type="text/javascript" src="../src/View/CellFactory.js"></script>
<script type="text/javascript" src="../src/View/Frame.js"></script>
<script type="text/javascript" src="../src/View/Frame.Lside.js"></script>
<script type="text/javascript" src="../src/View/Frame.Rside.js"></script>
<script type="text/javascript" src="../src/View/Header.js"></script>
<script type="text/javascript" src="../src/View/Body.js"></script>
<script type="text/javascript" src="../src/View/Footer.js"></script>
<script type="text/javascript" src="../src/View/RowList.js"></script>


<script type="text/javascript" src="../src/View/Cell/Base.js"></script>
<script type="text/javascript" src="../src/View/Cell/Normal.js"></script>
<script type="text/javascript" src="../src/View/Cell/List.js"></script>
<script type="text/javascript" src="../src/View/Cell/Text.js"></script>


<!--<script type="text/javascript" src="../src/View/Extra/VirtualScrollBar.js"></script>-->
<script type="text/javascript" src="../src/View/Clipboard.js"></script>
<!--<script type="text/javascript" src="../src/View/Extra/Selection.js"></script>-->
<!--<script type="text/javascript" src="../src/View/Extra/Log.js"></script>-->

<script type="text/javascript" src="../src/Grid.js"></script>

<!--<script type="text/javascript" src="../dist/Grid.js"></script>-->

<script>
	$result = $('#result1');
	var grid1 = new Grid({
		el : $("#wrapper1"),
		columnModelList : dummy_data.columnModel_1,
		selectType : 'checkbox',
		columnFixIndex : 5,
		displayRowCount : 10,
		headerHeight : 50,
		minimumColumnWidth: 20
//		notUseSmartRendering : true
	});
	getDummyData(dummy_data.columnModel_1, 100, function(data){
		console.log('done', data);
		grid1.setRowList(data);
	});
//	grid1.setRowList(dummy_data.rowList);
	insertButton(grid1, $("#buttonList1"), $('#result1'));


	var grid2 = new Grid({
		el : $("#wrapper2"),
		columnModelList : dummy_data.columnModel_2,
		selectType : 'radio',
		columnFixIndex : 7,
		headerHeight : 110,
		columnMerge : [
			{
				"columnName" : "mergeColumn1",
				"title" : "6 + 7",
				"columnNameList" : ["columnName6", "columnName7"]
			},
			{
				"columnName" : "mergeColumn2",
				"title" : "6 + 7 + 8",
				"columnNameList" : ["mergeColumn1", "columnName8"]
			},
				{
				"columnName" : "mergeColumn3",
				"title" : "6 + 7 + 8 + 9 + 10",
				"columnNameList" : ["mergeColumn2", "columnName9", "columnName10"]
			}
		]
//		keyColumnName : 'columnName6'
	});
	getDummyData(dummy_data.columnModel_2, 2000, function(data){
		grid2.setRowList(data);
	});

//	grid2.setRowList(dummy_data.rowListTest);
	insertButton(grid2, $("#buttonList2"), $('#result2'));
	function getDummyData(columnModel, size, callback){
		var url;

		if(window.navigator.userAgent.indexOf("MSIE ") !== -1){
			url = './php/dummy.php';
		}else{
			url = 'http://budapest.kr.pe/sample/php/dummy.php';
		}
		console.log(url);
		$.ajax({
            url : url,
			data : {
				columnModel : JSON.stringify(columnModel),
				size : size
			},
			dataType : 'json'
		}).done(function(data){
			callback(data);
		});
	}

	function insertButton(gridInstance, $wrapper, $result){
		var printr = function(obj){
			console.log(obj);
			$result.html(JSON.stringify(obj));
		};
		var actions = {
			'getRowList' : function(){
				var result = gridInstance.getRowList();
				printr(result);
			},
			'getModifiedRowList' : function(){
				var result = gridInstance.getModifiedRowList();
				printr(result);
			},
			'prependRow' : function(){
				gridInstance.prependRow();
			},
			'appendRow' : function(){
				gridInstance.appendRow();
			},
			'checkAllRow' : function(){
				gridInstance.checkAllRow();
			},
			'uncheckAllRow' : function(){
				gridInstance.uncheckAllRow();
			},
			'getCheckedRowList' : function(){
				var result = gridInstance.getCheckedRowList();
				printr(result);
			},
			'getCheckedRowKeyList' : function(){
				var result = gridInstance.getCheckedRowKeyList();
				printr(result);
			},
			'destroy' : function(){
				gridInstance.destroy();
				gridInstance = null;
			},
			'set columnFixIndex=2' : function(){
				gridInstance.setColumnIndex(2);
			},
			'test' : function(){
//				gridInstance.setValue(0, 'columnName1', '3');
				gridInstance.setColumnValue('columnName1', '3');
				gridInstance.sort('columnName5');
			}
		};

		var $button;
		for(var name in actions){
			$button = $('<input>');
			$button.attr({
				'type' : 'button',
				'value' : name
			}).on('click', function(action){
						return function(e){
							action($button);
						}
					}(actions[name]));
			$wrapper.append($button);
		}
	}




//	var grid2 = new Grid({
//		el : $("#wrapper2"),
//		columnModelList : dummy_data.columnModel
//	});
//	grid2.setRowList(dummy_data.rowListTest);
//	setTimeout(function(){
//		grid1.setCell(1, 'columnName1', "A");
//		grid1.setCell(1, 'columnName2', "C");
//		grid1.setCell(1, 'columnName6', "B");
//	},1000);
//
//	setTimeout(function(){
//		grid1.sort('columnName1');
//	},2000);
//	setTimeout(function(){
//		grid1.sort('columnName7');
//	},3000);
//	setTimeout(function(){
//		grid1.sort('columnName1');
//		grid1.setColumnIndex(6);
//	},2000);
//
//	setTimeout(function(){
//		grid1.setColumnIndex(6);
//	},4000);
//	setTimeout(function(){
//		grid1.sort('columnName1');
//		grid1.setColumnIndex(3);
//	},2000);
//	setTimeout(function(){
//		grid1.setRowList([]);
//	},3000);

//
//

//	setTimeout(function(){
//		grid1.setColumnIndex(5);
//		grid2.setColumnIndex(4);
//	}, 1000);
//	setTimeout(function(){
//		grid1.setColumnIndex(6);
////		grid2.setColumnIndex(5);
//	}, 1000);
//
//
//	setTimeout(function(){
//		grid1.setRowList([]);
//
//	}, 3000);
//
//
//	setTimeout(function(){
//		grid1.setRowList(dummy_data.rowListTest);
//
//	}, 4000);
//	setTimeout(function(){
//		console.log("####PREPEND");
//		grid1.prependRow([{
//			"columnName1" : "ASDFGJOAWef11",
//			"columnName2" : "ASDFGJOAWef12",
//			"columnName3" : "ASDFGJOAWef13",
//			"columnName4" : "ASDFGJOAWef14",
//			"columnName5" : "ASDFGJOAWef15",
//			"columnName6" : "ASDFGJOAWef16",
//			"columnName7" : "ASDFGJOAWef17",
//			"columnName8" : "ASDFGJOAWef18"
//		},
//		{
//			"columnName1" : "ASDFGJOAWef11",
//			"columnName2" : "ASDFGJOAWef12",
//			"columnName3" : "ASDFGJOAWef13",
//			"columnName4" : "ASDFGJOAWef14",
//			"columnName5" : "ASDFGJOAWef15",
//			"columnName6" : "ASDFGJOAWef16",
//			"columnName7" : "ASDFGJOAWef17",
//			"columnName8" : "ASDFGJOAWef18"
//		}]);
//	}, 2000);
//	setTimeout(function(){
//		grid1.setRowList(dummy_data.rowListTest);
//	}, 3000);
//	grid.setCell("1", "columnName1",312312);



</script>
</html>