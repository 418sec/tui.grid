<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <title>그리드 기본 예제</title>
    <link rel="stylesheet" type="text/css" href="../dist/grid.css" />
    <link rel="stylesheet" type="text/css" href="../lib/tui-component-pagination/dist/tui-component-pagination.css" />
    <style media="screen">
        #wrapper {
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="wrapper">
        <div id="grid"></div>
    </div>
</body>
<script src="../lib/jquery/jquery.js"></script>
<script src="../lib/underscore/underscore.js"></script>
<script src="../lib/backbone/backbone.js"></script>
<script src="../lib/tui-code-snippet/code-snippet.js"></script>
<script src="../lib/tui-component-pagination/dist/tui-component-pagination.js"></script>
<script src="../dist/grid.js"></script>
<script>
    var grid = new tui.Grid({
        el: $('#grid'),
        selectType: 'checkbox',
        header: {
            height: 50,
            complexColumns: [
                {
                    name: 'c2-c3',
                    title: 'c2-c3',
                    childNames: ['c2', 'c3']
                }
            ]
        },
        virtualScrolling: false,
        heightResizable: true,
        showDummyRows: true,
        bodyHeight: 300,
        columnOptions: {
            minWidth: 200,
            frozenCount: 1
        },
        pagination: true,
        columns: [
            {
                name: 'c1',
                title: 'c1',
                validation: {
                    required: true
                },
                width: 200,
                fixedWidth: true,
                onBeforeChange: function(ev) {
                    console.log('before change! ev', ev);
                },
                onAfterChange: function(ev) {
                    console.log('after change! ev', ev);
                },
                editOptions: {
                    onKeyDown: function(ev) {
                        console.log('keydown ev', ev);
                    },
                    onFocus: function(ev) {
                        console.log('focus ev', ev);
                    },
                    onBlur: function(ev) {
                        console.log('blur ev', ev);
                    },
                    type: 'text',
                    listItems: [
                        {
                            text: 1,
                            value: 1
                        },
                        {
                            text: 2,
                            value: 2
                        }
                    ]
                }
            },
            {
                name: 'c2',
                title: 'c2',
                sortable: true,
                width: 200,
                editOptions: {
                    type: 'select',
                    listItems: [
                        {
                            text: 1,
                            value: 1
                        },
                        {
                            text: 2,
                            value: 2
                        }
                    ]
                }
            },
            {
                name: 'c3',
                title: 'c3',
                width: 200,
                defaultValue: 2,
                editOptions: {
                    useViewMode: false,
                    type: 'checkbox',
                    listItems: [
                        {
                            text: 1,
                            value: 1
                        },
                        {
                            text: 2,
                            value: 2
                        }
                    ]
                }
            }
        ],
        footer: {
            height: 30,
            columnContent: {
                c1: {
                    template: function() {
                        return 'Good!';
                    }
                }
            }
        }
    });
    var data = [];
    (function() {
        _.times(50, function(number) {
            data.push({
                _number: number + 1,
                'c1': String(number * 10),
                'c2': 2
            });
        })
    })();

    grid.setData(data.slice(0, 10));

    var pagination = grid.getPagination();
    var itemCount = 50;

    pagination.reset(50);
    pagination.on('beforeMove', function(ev) {
        var page = ev.page;
        var start = 10 * (page - 1);

        setTimeout(function() {
            grid.setData(data.slice(start, start + 10));
        }, 10);

        return false;
    });

    // grid.use('Net', {
    // 	perPage: 5,
    // 	api: {
    // 		readData: '/sample',
    // 		downloadExcel: '/download/excel',
    // 		downloadExcelAll: '/download/excelAll'
    // 		// updateData: '/update'
    // 	}
    // });

    // var net = grid.getAddOn('Net');
    // $('#btn-update').click(function() {
    // 	net.request('updateData');
    // });
</script>

</html>
