!function(){var a=a||{};a.Component=a.Component||{},a.Component.Pagination=function(b,c){var d={itemCount:10,itemPerPage:10,pagePerPageList:10,page:1,moveUnit:"pagelist",isCenterAlign:!1,insertTextNode:"",classPrefix:"",firstItemClassName:"first-child",lastItemClassName:"last-child",pageTemplate:'<a href="#">{=page}</a>',currentPageTemplate:"<strong>{=page}</strong>"};this._options=$.extend(d,b),this._eventHandler={},this._view=new a.Component.PaginationView(this._options,c),this._view.attachEvent("click",$.proxy(this._onClickPageList,this)),this.movePageTo(this._getOption("page"),!1)},a.Component.Pagination.prototype.reset=function(a){var b=null!==a&&void 0!==a;b||(a=this._getOption("itemCount")),this._setOption("itemCount",a),this.movePageTo(1,!1)},a.Component.Pagination.prototype._getOption=function(a){return this._options[a]},a.Component.Pagination.prototype.movePageTo=function(a,b){b=!(!b&&void 0!==b),a=this._convertToAvailPage(a),this._currentPage=a,(!b||this.fireEvent("beforeMove",{page:a}))&&(this._paginate(a),b&&this.fireEvent("afterMove",{page:a}))},a.Component.Pagination.prototype._setOption=function(a,b){this._options[a]=b},a.Component.Pagination.prototype.getCurrentPage=function(){return this._currentPage||this._options.page},a.Component.Pagination.prototype.getIndexOfFirstItem=function(a){return this._getOption("itemPerPage")*(a-1)+1},a.Component.Pagination.prototype._getLastPage=function(){return Math.ceil(this._getOption("itemCount")/this._getOption("itemPerPage"))},a.Component.Pagination.prototype._getPageIndex=function(a){if(this._getOption("isCenterAlign")){var b=Math.floor(this._getOption("pagePerPageList")/2),c=a-b;return c=Math.max(c,1),c=Math.min(c,this._getLastPage())}return Math.ceil(a/this._getOption("pagePerPageList"))},a.Component.Pagination.prototype._getRelativePage=function(a){var b=null,c="page"===this._getOption("moveUnit"),d=this._getPageIndex(this.getCurrentPage());switch(a){case"pre_end":b=1;break;case"next_end":b=this._getLastPage();break;case"pre":b=c?this.getCurrentPage()-1:(d-1)*this._getOption("pagePerPageList");break;case"next":b=c?this.getCurrentPage()+1:d*this._getOption("pagePerPageList")+1}return b},a.Component.Pagination.prototype._convertToAvailPage=function(a){var b=this._getLastPage();return a=Math.max(a,1),a=Math.min(a,b)},a.Component.Pagination.prototype._paginate=function(a){this._view.empty();var b={};b.lastPage=this._getLastPage(),b.currentPageIndex=this._getPageIndex(a),b.lastPageListIndex=this._getPageIndex(b.lastPage),b.page=a,this._view.update(b,a)},a.Component.Pagination.prototype._onClickPageList=function(a){a.preventDefault();var b,c=null,d=$(a.target);if(this._view.isIn(d,this._getOption("$pre_endOn")))c=this._getRelativePage("pre_end");else if(this._view.isIn(d,this._getOption("$preOn")))c=this._getRelativePage("pre");else if(this._view.isIn(d,this._getOption("$nextOn")))c=this._getRelativePage("next");else if(this._view.isIn(d,this._getOption("$lastOn")))c=this._getRelativePage("next_end");else{if(b=this._view.getPageElement(d),!b||!b.length)return;c=parseInt(b.text(),10)}var e=this.fireEvent("click",{page:c});e&&this.movePageTo(c)},a.Component.Pagination.prototype.attach=function(a,b){if(1===arguments.length){var a,c;for(a in arguments[0])c=arguments[0][a],this.attach(a,c);return this}var d=this._eventHandler[a];return"undefined"==typeof d&&(d=this._eventHandler[a]=[]),d.push(b),this},a.Component.Pagination.prototype.fireEvent=function(a,b){b=b||{};var c=this["on"+a],d=this._eventHandler[a]||[],e=$.isFunction(c),f=d.length>0;if(!e&&!f)return!0;d=d.concat(),b.eventType=a,b._aExtend||(b._aExtend=[],b.stop=function(){b._aExtend.length>0&&(b._aExtend[b._aExtend.length-1].canceled=!0)}),b._aExtend.push({type:a,canceled:!1});var g,h,i=[b];for(g=2,h=arguments.length;h>g;g++)i.push(arguments[g]);if(e&&c.apply(this,i),f){var j;for(g=0;j=d[g];g++)j.apply(this,i)}return!b._aExtend.pop().canceled};var a=a||{};a.Component=a.Component||{},a.Component.PaginationView=function(a,b){this._element=b,this._options=a,this._elementSelector={},this._cachedElement={},this._eventData={},$.extend(a,{$pre_endOn:a.$pre_endOn||$("a."+this._wrapPrefix("pre_end"),this._element),$preOn:a.$preOn||$("a."+this._wrapPrefix("pre"),this._element),$nextOn:a.$nextOn||$("a."+this._wrapPrefix("next"),this._element),$lastOn:a.$lastOn||$("a."+this._wrapPrefix("next_end"),this._element),$pre_endOff:a.$pre_endOff||$("span."+this._wrapPrefix("pre_end"),this._element),$preOff:a.$preOff||$("span."+this._wrapPrefix("pre"),this._element),$nextOff:a.$nextOff||$("span."+this._wrapPrefix("next"),this._element),$lastOff:a.$lastOff||$("span."+this._wrapPrefix("next_end"),this._element)}),this._element.addClass(this._wrapPrefix("loaded"))},a.Component.PaginationView.prototype.update=function(a){this._addTextNode(),this._setPageResult(a.lastPage);var b=this._options,c=this._getEdge(a),d=c.left,e=c.right;a.leftPageNumber=d,a.rightPageNumber=e,"page"===b.moveUnit&&(a.currentPageIndex=a.page,a.lastPageIndex=a.lastPage),this._setFirst(a),this._setPrev(a),this._setPageNumbers(a),this._setNext(a),this._setLast(a)},a.Component.PaginationView.prototype.isIn=function(a,b){return b?a[0]===b[0]?!0:$.contains(b,a):!1},a.Component.PaginationView.prototype.getBaseElement=function(){return this._element},a.Component.PaginationView.prototype.empty=function(){var a=this._options,b=a.$pre_endOn,c=a.$preOn,d=a.$nextOn,e=a.$lastOn,f=a.$pre_endOff,g=a.$preOff,h=a.$nextOff,i=a.$lastOff;a.$pre_endOn=this._clone(b),a.$preOn=this._clone(c),a.$lastOn=this._clone(e),a.$nextOn=this._clone(d),a.$pre_endOff=this._clone(f),a.$preOff=this._clone(g),a.$lastOff=this._clone(i),a.$nextOff=this._clone(h),this._pageItemList=[],this._element.empty()},a.Component.PaginationView.prototype.getPageElement=function(a){var b,c,d;for(b=0,c=this._pageItemList.length;c>b;b++)if(d=this._pageItemList[b],this.isIn(a,d))return d;return null},a.Component.PaginationView.prototype.attachEvent=function(a,b){var c=this._element,d="string"==typeof c&&this._elementSelector[c];if(d&&(c=this._getElement(c,!0)),c&&a&&b){var e=a+"_"+parseInt(1e7*Math.random(),10);return $(c).bind(a,null,b),this._eventData[e]={targetElement:c,eventType:a,callback:b},e}},a.Component.PaginationView.prototype.getElement=function(){return this._element},a.Component.PaginationView.prototype._wrapPrefix=function(a){var b=this._options.classPrefix;return b?b+a.replace(/_/g,"-"):a},a.Component.PaginationView.prototype._addTextNode=function(){var a=this._options.insertTextNode;this._element.append(document.createTextNode(a))},a.Component.PaginationView.prototype._clone=function(a){return a&&a.length&&a.get(0).cloneNode?$(a.get(0).cloneNode(!0)):a},a.Component.PaginationView.prototype._setPageResult=function(a){0===a?this._element.addClass(this._wrapPrefix("no-result")):1===a?this._element.addClass(this._wrapPrefix("only-one")).removeClass(this._wrapPrefix("no-result")):this._element.removeClass(this._wrapPrefix("only-one")).removeClass(this._wrapPrefix("no-result"))},a.Component.PaginationView.prototype._getEdge=function(a){var b,c,d,e=this._options;return e.isCenterAlign?(d=Math.floor(e.pagePerPageList/2),b=a.page-d,b=Math.max(b,1),c=b+e.pagePerPageList-1,c>a.lastPage&&(b=a.lastPage-e.pagePerPageList+1,b=Math.max(b,1),c=a.lastPage)):(b=(a.currentPageIndex-1)*e.pagePerPageList+1,c=a.currentPageIndex*e.pagePerPageList,c=Math.min(c,a.lastPage)),{left:b,right:c}},a.Component.PaginationView.prototype._setFirst=function(a){var b=this._options;a.page>1?b.$pre_endOn&&(this._element.append(b.$pre_endOn),this._addTextNode()):b.$pre_endOff&&(this._element.append(b.$pre_endOff),this._addTextNode())},a.Component.PaginationView.prototype._setPrev=function(a){var b=this._options;a.currentPageIndex>1?b.$preOn&&(this._element.append(b.$preOn),this._addTextNode()):b.$preOff&&(this._element.append(b.$preOff),this._addTextNode())},a.Component.PaginationView.prototype._setNext=function(a){var b=this._options;a.currentPageIndex<a.lastPageListIndex?b.$nextOn&&(this._element.append(b.$nextOn),this._addTextNode()):b.$nextOff&&(this._element.append(b.$nextOff),this._addTextNode())},a.Component.PaginationView.prototype._setLast=function(a){var b=this._options;a.page<a.lastPage?b.$lastOn&&(this._element.append(b.$lastOn),this._addTextNode()):b.$lastOff&&(this._element.append(b.$lastOff),this._addTextNode())},a.Component.PaginationView.prototype._setPageNumbers=function(a){var b,c,d=a.leftPageNumber,e=a.rightPageNumber,f=this._options;for(c=d;e>=c;c++)c==a.page?b=$(f.currentPageTemplate.replace("{=page}",c.toString())):(b=$(f.pageTemplate.replace("{=page}",c.toString())),this._pageItemList.push(b)),c==d&&b.addClass(this._wrapPrefix(f.firstItemClassName)),c==e&&b.addClass(this._wrapPrefix(f.lastItemClassName)),this._element.append(b),this._addTextNode()},"undefined"!=typeof window.console&&window.console&&window.console.log||(window.console={log:function(){},error:function(){}});var b={CellFactory:null,Layout:{},Layer:{},Renderer:{Row:null,Cell:{}}},c={},d={},e={},f={};c.Base=Backbone.Model.extend({initialize:function(a){var b=a&&a.grid||this.collection&&this.collection.grid||null;this.setOwnProperties({grid:b})},setOwnProperties:function(a){_.each(a,function(a,b){this[b]=a},this)}}),e.Base=Backbone.Collection.extend({initialize:function(a){var b=a&&a.grid||this.collection&&this.collection.grid||null;this.setOwnProperties({grid:b}),this.reset([],{silent:!0})},clear:function(){return this.each(function(a){a.stopListening(),a=null}),this},setOwnProperties:function(a){_.each(a,function(a,b){this[b]=a},this)}}),b.Base=Backbone.View.extend({initialize:function(a){var b=a&&a.grid||this.collection&&this.collection.grid||null;this.setOwnProperties({grid:b,__viewList:[]})},error:function(a){var b=function(){this.name="PugException",this.message=a||"error"};return b.prototype=new Error,new b},setOwnProperties:function(a){_.each(a,function(a,b){this[b]=a},this)},createView:function(a,b){var c=new a(b);return this.hasOwnProperty("__viewList")||this.setOwnProperties({__viewList:[]}),this.__viewList.push(c),c},addView:function(a){return this.hasOwnProperty("__viewList")||this.setOwnProperties({__viewList:[]}),this.__viewList.push(a),a},destroy:function(){this.destroyChildren(),this.remove()},createEventData:function(a){return a=a||{},a.stop=function(){this._isStoped=!0},a.isStopped=function(){return this._isStoped},a._isStoped=a._isStoped||!1,a},destroyChildren:function(){if(this.__viewList instanceof Array)for(;0!==this.__viewList.length;)this.__viewList.pop().destroy()}}),b.Base.Renderer=b.Base.extend({eventHandler:{},initialize:function(){b.Base.prototype.initialize.apply(this,arguments),this._initializeEventHandler()},_initializeEventHandler:function(){var a={};_.each(this.eventHandler,function(b,c){var d=c.split(" "),e=d[0],f=d[1]||"";a[e]={selector:f,handler:$.proxy(this[b],this)}},this),this.setOwnProperties({_eventHandler:a})},_attachHandler:function(a){_.each(this._eventHandler,function(b,c){var d=b.handler,e=b.selector,f=a;e&&(f=a.find(e)),f.length>0&&f.on(c,d)},this)},_detachHandler:function(a){_.each(this._eventHandler,function(b,c){var d=b.handler,e=b.selector,f=a;e&&(f=a.find(e)),f.length>0&&f.off(c,d)},this)},getHtml:function(){throw this.error("implement getHtml() method")}});var g={getTBodyHeight:function(a,b){return 0===a?a:a*(b+1)+1},getDisplayRowCount:function(a,b){return Math.ceil((a-1)/(b+1))},getRowHeight:function(a,b){return Math.floor((b-1)/a)},setCursorToEnd:function(a){a.focus();var b=a.value.length;if(a.setSelectionRange)a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}},isEqual:function(a,b){var c,d,e;if(typeof a!=typeof b)return!1;if(a instanceof Array){if(d=a.length,d!==b.length)return!1;for(c=0;d>c;c++)if(a[c]!==b[c])return!1}else if("object"==typeof a){for(e in a)if(a[e]!==b[e])return!1}else if(a!==b)return!1;return!0},hasTagString:function(a){return/[<>&"']/.test(a)},stripTags:function(a){if(a=a.replace(/[\n\r\t]/g,""),this.hasTagString(a)){if(/<img/.test(a)){var b=a.match(/<img[^>]*\ssrc=[\"']?([^>\"']+)[\"']?[^>]*>/);a=b?b[1]:""}else a=a.replace(/<button.*?<\/button>/g,"");a=this.decodeHTMLEntity(a.replace(/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/gi,""))}return a},getUniqueKey:function(){var a=String(parseInt(1e10*Math.random(),10));return(new Date).getTime()+a},decodeHTMLEntity:function(a){var b={"&quot;":'"',"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&nbsp;":" "};return a.replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&nbsp;/g,function(a){return b[a]?b[a]:a})},encodeHTMLEntity:function(a){var b={'"':"quot","&":"amp","<":"lt",">":"gt","'":"#39"};return a.replace(/[<>&"']/g,function(a){return b[a]?"&"+b[a]+";":a})},getFormData:function(a){var b={},c=a.serializeArray();return $.each(c,function(){void 0!==b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""}),b},getFormElement:function(a,b){if(a){var c;return c=b?a.prop("elements")[b+""]:a.prop("elements"),$(c)}},setFormData:function(a,b){for(var c in b)b.hasOwnProperty(c)&&this.setFormElementValue(a,c,b[c])},changeToStringInArray:function(a){for(var b=0;b<a.length;b++)a[b]=String(a[b]);return a},setFormElementValue:function(a,b,c){var d,e,f,g,h=this.getFormElement(a,b,!0);if(h){h=1==h.nodeType?[h]:h;for(var i,d=0;d<h.length;d++)switch(i=h[d],i.type){case"radio":i.checked=i.value==c;break;case"checkbox":i.checked=$.isArray(c)?-1!==$.inArray(i.value,this.changeToStringInArray(c)):i.value==c;break;case"select-one":for(f=-1,e=0;e<i.options.length;e++)g=i.options[e],g.value!=c&&g.text!=c||(f=e);i.selectedIndex=f;break;case"select-multiple":if($.isArray(c))for(c=this.changeToStringInArray(c),e=0;e<i.options.length;e++)g=i.options[e],g.selected=-1!==$.inArray(g.value,c)||-1!==$.inArray(g.text,c);else{for(f=-1,e=0;e<i.options.length;e++)g=i.options[e],g.value!=c&&g.text!=c||(f=e);i.selectedIndex=f}break;default:i.value=c}}},toQueryString:function(a){var b,c,d=[];for(b in a)c=a[b],"string"!=typeof c&&"number"!=typeof c&&(c=JSON.stringify(c)),c=encodeURIComponent(c),d.push(b+"="+c);return d.join("&")},toQueryObject:function(a){var b,c,d,e,f=a.split("&"),g=f.length,h={};for(e=0;g>e;e++){b=f[e].split("="),c=b[0],d=decodeURIComponent(b[1]);try{d=$.parseJSON(d)}catch(i){}h[c]=d}return h}};d.ColumnModel=c.Base.extend({defaults:{keyColumnName:null,columnFixIndex:0,columnModelList:[],visibleList:[],columnModelMap:{},relationListMap:{}},initialize:function(){c.Base.prototype.initialize.apply(this,arguments),this.on("change",this._onChange,this)},_appendDefaultColumn:function(a){var b=$.extend(!0,[],a),c=[],d=this.grid.option("selectType"),e=!1,f=!1,g={_number:{columnName:"_number",title:"No.",width:60},_button:{columnName:"_button",editOption:{type:d,list:[{value:"selected"}]},width:50}};return"checkbox"===d?g._button.title='<input type="checkbox"/>':"radio"===d?g._button.title="선택":g._button.isHidden=!0,_.each(b,function(a,c){var d=a.columnName;"_number"===d?(b[c]=$.extend(a,g._number),e=!0):"_button"===d&&(b[c]=$.extend(a,g._button),f=!0)},this),e||c.push(g._number),f||c.push(g._button),b=_.union(c,b)},indexOfColumnName:function(a,b){b=void 0===b;for(var c=b?this.getVisibleColumnModelList():this.get("columnModelList"),d=0,e=c.length;e>d;d++)if(c[d].columnName===a)return d;return-1},at:function(a,b){var c=b?this.getVisibleColumnModelList():this.get("columnModelList");return c[a]},isLside:function(a){return this.get("columnFixIndex")>this.indexOfColumnName(a)},getVisibleColumnModelList:function(a){a=a?a.toUpperCase():void 0;var b=[],c=this.get("columnFixIndex");switch(a){case"L":b=this.get("visibleList").slice(0,c);break;case"R":b=this.get("visibleList").slice(c);break;default:b=this.get("visibleList")}return b},getColumnModel:function(a){return this.get("columnModelMap")[a]},getEditType:function(a){var b=this.getColumnModel(a),c="normal";return"_button"===a||"_number"===a?c=a:b&&b.editOption&&b.editOption.type&&(c=b.editOption.type),c},_getVisibleList:function(){return _.filter(this.get("columnModelList"),function(a){return!a.isHidden})},_getRelationMart:function(){var a,b,c,d=this.get("columnModelList"),e={},f=d.length;for(c=0;f>c;c++)a=d[c].columnName,d[c].relationList&&(b=d[c].relationList,e[a]=b);return e},_onChange:function(a){a.changed.columnModelList&&this.set({columnModelList:this._appendDefaultColumn(a.changed.columnModelList)},{silent:!0});var b=this._getVisibleList();this.set({visibleList:b,lsideList:b.slice(0,this.get("columnFixIndex")),rsideList:b.slice(this.get("columnFixIndex")),columnModelMap:_.indexBy(this.get("columnModelList"),"columnName"),relationListMap:this._getRelationMart()},{silent:!0})}}),d.Row=c.Base.extend({idAttribute:"rowKey",defaults:{_extraData:{rowState:null,selected:!1,focused:""}},initialize:function(){c.Base.prototype.initialize.apply(this,arguments)},getRowState:function(){var a=this.get("_extraData"),b=a&&a.rowState,c=!1,d=!1,e=!1,f=[];if(b)switch(b){case"DISABLED":d=!0;break;case"DISABLED_CHECK":c=!0;break;case"CHECKED":e=!0}return c=d?d:c,d&&f.push("disabled"),{isDisabled:d,isDisabledCheck:c,isChecked:e,classNameList:f}},getRowSpanData:function(a){var b,c=this.get("_extraData");return a?(c=this.get("_extraData"),b={count:0,isMainRow:!0,mainRowKey:this.get("rowKey")},c&&c.rowSpanData&&c.rowSpanData[a]||b):c.rowSpanData},getTagFiltered:function(a){var b=this.grid.columnModel.getColumnModel(a),c=this.grid.columnModel.getEditType(a),d=this.get(a),e=b.notUseHtmlEntity;return e||c&&"text"!==c||!g.hasTagString(d)||(d=g.encodeHTMLEntity(d)),d},_convertValueType:function(a,b){return"string"===b?a.toString():"number"===b?1*a:a},_getListTypeVisibleText:function(a,b){var c,d,e=b.columnName,f=this.getRelationResult(["optionListChange"])[e],g=f&&f.optionList?f.optionList:b.editOption.list;return c=typeof g[0].value,d=a.toString().split(","),c!==typeof d[0]&&_.each(d,function(a,b){d[b]=this._convertValueType(a,c)},this),_.each(d,function(a,b){var c=_.findWhere(g,{value:a});d[b]=c&&c.text||""},this),d.join(",")},getRelationResult:function(a){a=a||["optionListChange","isDisable","isEditable"];var b,c,d,e,f=(this.get("rowKey"),this.toJSON()),g=this.grid.columnModel.get("relationListMap"),h={};return _.each(g,function(g,i){e=f[i],_.each(g,function(g){d=g.columnList,_.each(a,function(a){if(b=g[a],"function"==typeof b){switch(c="",a){case"optionListChange":c="optionList";break;case"isDisable":c="isDisabled";break;case"isEditable":c="isEditable"}c&&_.each(d,function(a){h[a]=h[a]||{},h[a][c]=b(e,f)},this)}},this)},this)},this),h},getVisibleText:function(a){var b,c,d=this.grid.columnModel,e=this.get(a),f={select:!0,radio:!0,checkbox:!0};if(d)if(b=d.getEditType(a),c=d.getColumnModel(a),f[b]){if(!(c.editOption&&c.editOption.list&&c.editOption.list[0].value))throw this.error('Check "'+a+"\"'s editOption.list property out in your ColumnModel.");e=this._getListTypeVisibleText(e,c)}else"function"==typeof c.formatter&&(e=g.stripTags(c.formatter(this.getTagFiltered(a),this.toJSON(),c)));return e}}),d.RowList=e.Base.extend({model:d.Row,initialize:function(a){e.Base.prototype.initialize.apply(this,arguments),this.setOwnProperties({_sortKey:"rowKey",_originalRowList:[],_originalRowMap:{},_startIndex:a.startIndex||1,_privateProperties:["_button","_number","_extraData"]}),this.listenTo(this.grid.focusModel,"change",this._onFocusChange,this),this.on("change",this._onChange,this),this.on("change:_button",this._onCheckChange,this),this.on("sort",this._onSort,this),this.on("all",this.test1,this)},test1:function(){console.log("#####TEST",arguments)},indexOfRowKey:function(a){return this.indexOf(this.get(a))},_onSort:function(){this._refreshNumber()},_refreshNumber:function(){for(var a=0;a<this.length;a++)this.at(a).set("_number",this._startIndex+a,{silent:!0})},_isPrivateProperty:function(a){return-1!==$.inArray(a,this._privateProperties)},_onChange:function(a){var b=function(a,b){return{rowKey:a.get("rowKey"),columnName:b,columnData:a.get(b)}};_.each(a.changed,function(c,d){if(!this._isPrivateProperty(d)){var e=this.grid.columnModel.getColumnModel(d);if(!e)return;var f,g=a.getRowSpanData(d),h=b(a,d);if(e.editOption&&e.editOption.changeBeforeCallback&&e.editOption.changeBeforeCallback(h)===!1)return f={},f[d]=a.previous(d),a.set(f),void a.trigger("restore",{changed:f});if(!this.isSortedByField())if(g.isMainRow)for(var i=this.indexOfRowKey(a.get("rowKey")),j=0;j<g.count-1;j++)this.at(j+1+i).set(d,c);else this.get(g.mainRowKey).set(d,c);h=b(a,d),e.editOption&&e.editOption.changeAfterCallback&&e.editOption.changeAfterCallback(h),a.getRowState().isDisabledCheck||a.set("_button",!0)}},this)},_onCheckChange:function(a){var b,c=(this.grid.columnModel.getColumnModel("_button"),this.grid.option("selectType")),d=a.get("rowKey");"radio"===c&&(b=this.where({_button:!0}),_.each(b,function(a){d!=a.get("rowKey")&&a.set({_button:!1},{silent:!0})}))},isSortedByField:function(){return"rowKey"!==this._sortKey},sortByField:function(a){this._sortKey=a,this.sort()},comparator:function(a){return this.isSortedByField()?1*a.get(this._sortKey):void 0},setValue:function(a,b,c,d){var e=this.get(a),f={};return e?(f[b]=c,e.set(f,{silent:d}),!0):!1},setColumnValue:function(a,b,c){var d={};d[a]=b,this.forEach(function(a){a.set(d,{silent:c})},this)},setRowState:function(a,b,c){this.setExtraData(a,{rowState:b},c)},setExtraData:function(a,b,c){var d,e=this.get(a),f={};return e?(d=_.clone(e.get("_extraData")),d=$.extend(d,b),f._extraData=d,e.set(f,{silent:c}),!0):!1},_onFocusChange:function(a){var b=!0,c=a.get("rowKey");_.each(a.changed,function(d,e){"rowKey"===e?(null===d&&(d=a.previous("rowKey"),b=!1),this.setExtraData(d,{selected:b})):"columnName"===e&&this.setExtraData(c,{focused:d})},this)},parse:function(a){return a=a&&a.contents||a,this.setOriginalRowList(this._format(a)),this._originalRowList},setOriginalRowList:function(a){this._originalRowList=a||this.toJSON(),this._originalRowMap=_.indexBy(this._originalRowList,"rowKey")},getOriginalRowList:function(a){return a=void 0===a?!0:a,a?_.clone(this._originalRowList):this._originalRowList},getOriginalRow:function(a){return _.clone(this._originalRowMap[a])},getOriginal:function(a,b){return _.clone(this._originalRowMap[a][b])},_filterRowList:function(a){for(var b,c=[],d=0,e=a.length;e>d;d++)b={},_.each(a[d],function(a,c){this._isPrivateProperty(c)||(b[c]=a)},this),c.push(b);return c},getModifiedRowList:function(){var a=_.indexBy(this._filterRowList(this._originalRowList),"rowKey"),b=_.indexBy(this._filterRowList(this.toJSON()),"rowKey"),c={inserted:[],edited:[],deleted:[]};return _.each(b,function(b,d){a[d]?JSON.stringify(b)!==JSON.stringify(a[d])&&c.edited.push(b):c.inserted.push(b)},this),_.each(a,function(a,d){b[d]||c.deleted.push(a)},this),c},_format:function(a){function b(a,b,c){a.rowSpanData=a&&a.rowSpanData||{},a.rowSpanData[b]=c}function c(a,b){return!(!a.rowSpanData||!a.rowSpanData[b])}var d,e,f,g,h,i,j,k,l,m=a,n=this.grid.columnModel.get("keyColumnName"),o=m.length;for(k=0;o>k;k++)g=m[k],i=null===n?k:g[n],g.rowKey=i,g._extraData=m[k]._extraData||{},f=g._extraData,e=g._extraData.rowSpan,j=g._extraData.rowState,g._button="CHECKED"===j,this.isSortedByField()?m[k]._extraData&&(m[k]._extraData.rowSpan=null):e&&_.each(e,function(a,e){if(!c(f,e))for(b(f,e,{count:a,isMainRow:!0,mainRowKey:i}),d=-1,l=k+1;k+a>l;l++)h=m[l],h[e]=g[e],h._extraData=h._extraData||{},b(h._extraData,e,{count:d--,isMainRow:!1,mainRowKey:i})},this);return m},_getEmptyRow:function(){for(var a=this.grid.columnModel.get("columnModelList"),b={},c=0;c<a.length;c++)b[a[c].columnName]="";return b},append:function(a,b){b=void 0!==b?b:this.length;var c,e=[],f=this.grid.columnModel.get("keyColumnName"),g=this.length,a=a||this._getEmptyRow();a instanceof Array||(a=[a]),c=this._format(a),_.each(c,function(a,b){a.rowKey=f?a[f]:g+b,e.push(new d.Row(a,{collection:this}))},this),this.add(e,{at:b,merge:!0}),this._refreshNumber()},prepend:function(a){this.append(a,0)}}),c.Renderer=c.Base.extend({defaults:{top:0,scrollTop:0,$scrollTarget:null,scrollLeft:0,maxScrollLeft:0,startIdx:0,endIdx:0,startNumber:1,lside:null,rside:null},initialize:function(){c.Base.prototype.initialize.apply(this,arguments),this.setOwnProperties({timeoutIdForRowListChange:0,timeoutIdForRefresh:0,isColumnModelChanged:!1}),this.listenTo(this.grid.columnModel,"all",this._onColumnModelChange,this),this.listenTo(this.grid.dataModel,"add remove sort reset",this._onRowListChange,this);var a=new c.RowList({grid:this.grid}),b=new c.RowList({grid:this.grid});this.set({lside:a,rside:b})},initializeVariables:function(){this.set({top:0,scrollTop:0,$scrollTarget:null,scrollLeft:0,startIdx:0,endIdx:0,startNumber:1})},test:function(a){console.log("change",a.changed)},getCollection:function(a){a=a?a.toUpperCase():void 0;var b;switch(a){case"L":b=this.get("lside");break;case"R":b=this.get("rside");break;default:b=this.get("rside")}return b},_onColumnModelChange:function(){this.set({scrollTop:0,top:0,startIdx:0,endIdx:0}),this.isColumnModelChanged=!0,clearTimeout(this.timeoutIdForRefresh),this.timeoutIdForRefresh=setTimeout($.proxy(this.refresh,this),0)},_onRowListChange:function(){this.grid.selection.endSelection(),clearTimeout(this.timeoutIdForRefresh),this.timeoutIdForRefresh=setTimeout($.proxy(this.refresh,this),0)},_setRenderingRange:function(){this.set({startIdx:0,endIdx:this.grid.dataModel.length-1})},refresh:function(){this.trigger("beforeRefresh"),this._setRenderingRange();var a,b,c=this.grid.columnModel.get("columnFixIndex"),d=this.grid.columnModel.get("visibleList"),e=_.pluck(d,"columnName"),f=e.slice(0,c),g=e.slice(c),h=[],i=[],j=[],k=[],l=this.get("startIdx"),m=this.get("endIdx"),n=(new Date,this.get("startNumber")+l);for(b=l;m+1>b;b++){var o=this.grid.dataModel.at(b),p=o.get("rowKey");j={_extraData:o.get("_extraData"),rowKey:p},k={_extraData:o.get("_extraData"),rowKey:p},_.each(f,function(a){j[a]="_number"==a?n++:o.get(a)},this),_.each(g,function(a){k[a]="_number"==a?n++:o.get(a)},this),h.push(j),i.push(k)}for(this.get("lside").clear().reset(h,{parse:!0}),this.get("rside").clear().reset(i,{parse:!0}),b=l,a=i.length+l;a>b;b++)this.executeRelation(b);new Date;this.isColumnModelChanged===!0?(this.trigger("columnModelChanged"),this.isColumnModelChanged=!1):this.trigger("rowListChanged"),this.trigger("afterRefresh")},_getRowListDivision:function(a){var b=this.get("lside"),c=this.get("rside");return b.at(0)&&b.at(0).get(a)?b:c},getCellData:function(a,b){var c=this._getRowListDivision(b),d=c.get(a);return d?d.get(b):void 0},executeRelation:function(a){var b,c=this.grid.dataModel.at(a).getRelationResult(),d=a-this.get("startIdx");_.each(c,function(a,c){b=this._getRowListDivision(c).at(d),b&&this._getRowListDivision(c).at(d).setCell(c,a)},this)}}),c.Cell=c.Base.extend({defaults:{rowKey:"",columnName:"",value:"",rowSpan:0,isMainRow:!0,mainRowKey:"",isEditable:!1,optionList:[],isDisabled:!1,className:"",selected:!1,focused:!1},initialize:function(a){c.Base.prototype.initialize.apply(this,arguments),this.setOwnProperties({_model:a._model||null,attrProperties:["isDisabled","className","selected","focused"]});var b=a.columnName;this.listenTo(this._model,"change:"+b,this._onModelChange,this),this.on("change",this._onChange,this)},_onModelChange:function(a,b){var c=this.grid.columnModel.getColumnModel(this.get("columnName"));c.affectOption,this.set("value",b)},_onChange:function(a){var b=!1;_.each(a.changed,function(a,c){-1===$.inArray(c,this.attrProperties)&&(b=!0)},this),b===!0?this.trigger("render",a):this.trigger("changeAttr",a)},setValue:function(a){this._model.set(this.get("columnName"),a)}}),c.Dimension=c.Base.extend({models:null,columnModel:null,defaults:{offsetLeft:0,offsetTop:0,width:0,headerHeight:0,bodyHeight:0,toolbarHeight:0,rowHeight:0,rsideWidth:0,lsideWidth:0,columnWidthList:[],maxScrollLeft:0},initialize:function(){c.Base.prototype.initialize.apply(this,arguments),this.columnModel=this.grid.columnModel,this.listenTo(this.columnModel,"change",this._onWidthChange),this.on("change:width",this._onWidthChange,this),this._setColumnWidth(),this._setBodyHeight()},getCellPosition:function(a,b){var c,d,e,f,h,i=0,j=0,k=this.grid.dataModel,l=(this.get("offsetLeft"),this.get("offsetTop"),this.get("rowHeight")),m=k.get(a).getRowSpanData(b),n=this.get("columnWidthList"),o=this.grid.columnModel.get("columnFixIndex"),p=this.grid.columnModel.indexOfColumnName(b);for(m.isMainRow||(a=m.mainRowKey,m=k.get(a).getRowSpanData(b)),h=m.count||1,f=k.indexOfRowKey(a),c=g.getTBodyHeight(f,l),e=c+g.getTBodyHeight(h,l)-1,p>=o&&(j=o);p>j;j++)i+=n[j]+1;return d=i+n[j]+1,{top:c,left:i,right:d,bottom:e}},getDisplayRowCount:function(){return g.getDisplayRowCount(this.get("bodyHeight")-this.get("toolbarHeight"),this.get("rowHeight"))},_onWidthChange:function(){var a=this.get("columnWidthList");this._setColumnWidth(this._calculateColumnWidthList(a))},getScrollXSize:function(){return!!this.grid.option("scrollX")*this.grid.scrollBarSize},_setBodyHeight:function(){var a=g.getTBodyHeight(this.grid.option("displayRowCount"),this.get("rowHeight"));a+=this.grid.scrollBarSize,this.set("bodyHeight",a)},_setColumnWidth:function(a){var b,c=0,d=this.get("width"),e=this.columnModel.get("columnFixIndex");a=a||this._getOriginalWidthList();for(var f=0,g=a.length;g>f;f++)e>f&&(c+=a[f]+1);c+=1,b=d-c,this.set({rsideWidth:b,lsideWidth:c,columnWidthList:a}),this.trigger("columnWidthChanged")},getTotalWidth:function(a){var b,c=this.getColumnWidthList(a),d=c.length,e=0;for(b=0;d>b;b++)e+=c[b]+1;return e},setColumnWidth:function(a,b){b=Math.max(b,this.grid.option("minimumColumnWidth"));var c,d=this.get("columnWidthList");d[a]=b,c=this._calculateColumnWidthList(d),this._setColumnWidth(c)},getColumnWidthList:function(a){a=a?a.toUpperCase():void 0;var b=this.columnModel.get("columnFixIndex"),c=[];switch(a){case"L":c=this.get("columnWidthList").slice(0,b);break;case"R":c=this.get("columnWidthList").slice(b);break;default:c=this.get("columnWidthList")}return c},_getOriginalWidthList:function(){for(var a=this.columnModel.get("visibleList"),b=[],c=0,d=a.length;d>c;c++)b.push(a[c].width?a[c].width:-1);return this._calculateColumnWidthList(b)},_calculateColumnWidthList:function(a){for(var b,c,d=[],e=this.get("width"),f=0,g=0,h=0,i=0,j=a.length;j>i;i++)a[i]>0?(f=Math.max(this.grid.option("minimumColumnWidth"),a[i]),d.push(f),g+=f):(d.push(-1),h++);b=e-g,e>g&&0===h&&(d[d.length-1]+=b),e>g?(b=e-g,c=Math.max(this.grid.option("minimumColumnWidth"),Math.floor(b/h))):c=this.grid.option("minimumColumnWidth");for(var i=0,j=d.length;j>i;i++)-1===d[i]&&(d[i]=c);return d}}),c.Focus=c.Base.extend({defaults:{rowKey:null,columnName:"",prevRowKey:null,prevColumnName:""},initialize:function(){c.Base.prototype.initialize.apply(this,arguments)},_savePrevious:function(){null!==this.get("rowKey")&&this.set("prevRowKey",this.get("rowKey")),this.get("columnName")&&this.set("prevColumnName",this.get("columnName"))},_clearPrevious:function(){this.set({prevRowKey:null,prevColumnName:""})},select:function(a){return this.unselect().set("rowKey",a),this},unselect:function(){return this.set({rowKey:null}),this},focus:function(a,b,c){return a=void 0===a?this.get("rowKey"):a,b=void 0===b?this.get("columnName"):b,this._savePrevious(),a!==this.get("rowKey")&&this.blur().select(a),b&&b!==this.get("columnName")&&this.set("columnName",b),c&&this._adjustScroll(),this},_adjustScroll:function(){var a=this.which(),b=this.grid.dimensionModel,c=this.grid.renderModel,d=c.get("scrollTop"),e=c.get("scrollLeft"),f=b.get("bodyHeight"),g=(b.get("lsideWidth"),b.get("rsideWidth")),h=b.getCellPosition(a.rowKey,a.columnName),i=e,j=e+g;h.top<d?c.set({scrollTop:h.top}):h.bottom>f+d-this.grid.option("scrollX")*this.grid.scrollBarSize&&c.set({scrollTop:h.bottom-f+this.grid.option("scrollX")*this.grid.scrollBarSize}),this.grid.columnModel.isLside(a.columnName)||(h.left<i?c.set({scrollLeft:h.left}):h.right>j&&c.set({scrollLeft:h.right-g+this.grid.option("scrollY")*this.grid.scrollBarSize+1}))
},blur:function(){return null!==this.get("rowKey")&&this.set("columnName",""),this},which:function(){return{rowKey:this.get("rowKey"),columnName:this.get("columnName")}},indexOf:function(a){var b=this.get(a?"prevRowKey":"rowKey"),c=this.get(a?"prevColumnName":"columnName");return{rowIdx:this.grid.dataModel.indexOfRowKey(b),columnIdx:this.grid.columnModel.indexOfColumnName(c)}},has:function(){return!(void 0===this.get("rowKey")||!this.get("columnName"))},findRowKey:function(a){var b,c,d=this.grid.dataModel;return this.has()?(b=Math.max(Math.min(d.indexOfRowKey(this.get("rowKey"))+a,this.grid.dataModel.length-1),0),c=d.at(b),c&&c.get("rowKey")):void 0},findColumnName:function(a){var b,c=this.grid.columnModel,d=c.getVisibleColumnModelList();return this.has()?(b=Math.max(Math.min(c.indexOfColumnName(this.get("columnName"))+a,d.length-1),0),d[b]&&d[b].columnName):void 0},_getRowSpanData:function(a,b){return this.grid.dataModel.get(a).getRowSpanData(b)},nextRowIndex:function(a){var b=this.nextRowKey(a);return this.grid.dataModel.indexOfRowKey(b)},prevRowIndex:function(a){var b=this.prevRowKey(a);return this.grid.dataModel.indexOfRowKey(b)},nextColumnIndex:function(){var a=this.nextColumnName();return this.grid.columnModel.indexOfColumnName(a)},prevColumnIndex:function(){var a=this.prevColumnName();return this.grid.columnModel.indexOfColumnName(a)},nextRowKey:function(a){var b,c,d=this.which(),e=d.rowKey;return a="number"==typeof a?a:1,a>1?(e=this.findRowKey(a),c=this._getRowSpanData(e,d.columnName),c.isMainRow||(e=this.findRowKey(c.count+a))):(c=this._getRowSpanData(e,d.columnName),c.isMainRow&&c.count>0?e=this.findRowKey(c.count):c.isMainRow?e=this.findRowKey(1):(b=c.count,c=this._getRowSpanData(c.mainRowKey,d.columnName),e=this.findRowKey(c.count+b))),e},prevRowKey:function(a){var b,c=this.which(),d=c.rowKey;return a="number"==typeof a?a:1,a*=-1,-1>a?(d=this.findRowKey(a),b=this._getRowSpanData(d,c.columnName),b.isMainRow||(d=this.findRowKey(b.count+a))):(b=this._getRowSpanData(d,c.columnName),d=this.findRowKey(b.isMainRow?-1:b.count-1)),d},nextColumnName:function(){return this.findColumnName(1)},prevColumnName:function(){return this.findColumnName(-1)},firstRowKey:function(){return this.grid.dataModel.at(0).get("rowKey")},lastRowKey:function(){return this.grid.dataModel.at(this.grid.dataModel.length-1).get("rowKey")},firstColumnName:function(){var a=this.grid.columnModel.getVisibleColumnModelList();return a[0].columnName},lastColumnName:function(){var a=this.grid.columnModel.getVisibleColumnModelList(),b=a.length-1;return a[b].columnName}}),c.Renderer.Smart=c.Renderer.extend({initialize:function(){c.Renderer.prototype.initialize.apply(this,arguments),this.on("change:scrollTop",this._onChange,this),this.listenTo(this.grid.dimensionModel,"change:bodyHeight",this._onChange,this),this.setOwnProperties({hiddenRowCount:10,criticalPoint:3})},_onChange:function(){this._isRenderable()===!0&&this.refresh()},_setRenderingRange:function(){var a,b,c,d,e,f=this.get("scrollTop"),h=this.grid.dimensionModel.get("rowHeight"),i=(this.grid.dimensionModel.get("bodyHeight"),this.grid.dimensionModel.getDisplayRowCount()),j=Math.max(0,Math.ceil(f/(h+1))-this.hiddenRowCount),k=Math.min(this.grid.dataModel.length-1,Math.floor(j+this.hiddenRowCount+i+this.hiddenRowCount));this.grid.isSorted()||(d=[],e=[],b=this.grid.dataModel.at(j),c=this.grid.dataModel.at(k),b&&c&&(_.each(b.get("_extraData").rowSpanData,function(a){a.isMainRow||d.push(a.count)},this),_.each(c.get("_extraData").rowSpanData,function(a){a.count>0&&e.push(a.count)},this),d.length>0&&(j+=Math.min.apply(Math,d)),e.length>0&&(k+=Math.max.apply(Math,e)))),a=0===j?0:g.getTBodyHeight(j,h)-1,this.set({top:a,startIdx:j,endIdx:k})},_isRenderable:function(){var a=this.get("scrollTop"),b=this.grid.dimensionModel.get("rowHeight"),c=this.grid.dimensionModel.get("bodyHeight"),d=this.grid.dimensionModel.getDisplayRowCount(),e=this.grid.dataModel.length,f=Math.max(0,Math.ceil(a/(b+1))),g=Math.min(this.grid.dataModel.length-1,Math.floor((a+c)/(b+1))),h=this.get("startIdx"),i=this.get("endIdx");return console.log("#########GAP",i-h,d),0!==h&&h+this.criticalPoint>f||i!==e-1&&e>i&&i-this.criticalPoint<g?(console.log(h+this.criticalPoint,f),console.log(i-this.criticalPoint,g),!0):!1}}),c.Row=c.Base.extend({idAttribute:"rowKey",defaults:{},initialize:function(a){c.Base.prototype.initialize.apply(this,arguments);var b=a&&a.rowKey;this.grid.dataModel.get(b)&&(this.listenTo(this.grid.dataModel.get(b),"change",this._onDataModelChange,this),this.listenTo(this.grid.dataModel.get(b),"restore",this._onDataModelChange,this))},_onDataModelChange:function(a){_.each(a.changed,function(a,b){"_extraData"===b?this.updateRowSpanned():this.setCell(b,{value:a})},this)},updateRowSpanned:function(a){if(this.collection){var b,c=this.grid.columnModel.getVisibleColumnModelList(),d=this.grid.dataModel.get(this.get("rowKey")),e=d.get("_extraData"),f=e.selected||!1,g=e.focused,h=d.getRowState();_.each(c,function(c){var d=c.columnName,e=this.get(d),i=this,j=d===g,k="_button"===d?h.isDisabledCheck:h.isDisabled;e&&(this.grid.isSorted()||e.isMainRow||(i=this.collection.get(e.mainRowKey)),(i&&!a||a&&!e.isMainRow)&&(b={focused:j,selected:f,className:h.classNameList.join(" ")},k&&(b.isDisabled=!0),i.setCell(d,b)))},this)}},parse:function(a){var b=this.collection.grid,c=b.dataModel,d=a.rowKey;return _.each(a,function(e,f){var g,h=a._extraData.focused===f,i=!!a._extraData.selected,j=c.get(d).getRowState(),k=j.isDisabled,l=b.isEditable(d,f),m={mainRowKey:d,count:0,isMainRow:!0};"rowKey"!==f&&"_extraData"!==f&&(g=b.isSorted()?m:a._extraData&&a._extraData.rowSpanData&&a._extraData.rowSpanData[f]||m,k="_button"===f?j.isDisabledCheck:k,a[f]={rowKey:d,columnName:f,value:e,rowSpan:g.count,isMainRow:g.isMainRow,mainRowKey:g.mainRowKey,isEditable:l,isDisabled:k,optionList:[],className:j.classNameList.join(" "),focused:h,selected:i,changed:[]})},this),a},setCell:function(a,b){if(this.get(a)){var c,d=_.clone(this.get(a)),e=!1,f=[],h=this.get(a).rowKey;for(var i in b)g.isEqual(d[i],b[i])||(e="value"===i?!0:e,d[i]=b[i],f.push(i));f.length&&(d.changed=f,this.set(a,d),e&&(c=this.grid.dataModel.indexOfRowKey(h),this.grid.renderModel.executeRelation(c)))}}}),c.RowList=e.Base.extend({model:c.Row,initialize:function(){e.Base.prototype.initialize.apply(this,arguments),this.on("reset",this._onReset,this)},_onReset:function(){var a=this.grid.focusModel.which(),b=this.get(a.rowKey);b&&b.updateRowSpanned()}}),b.Layer.Base=b.Base.extend({initialize:function(){b.Base.prototype.initialize.apply(this,arguments),this.setOwnProperties({text:"기본 텍스트"}),this.listenTo(this.grid.dimensionModel,"change",this._resize,this)},template:_.template('<div>    <%=text%>    <div class="loading_img"></div></div>'),render:function(a){return this.$el.html(this.template({text:a||this.text})).css("display","none"),this},show:function(a){this.render(a).$el.css("display","block").css("zIndex",1),this._resize()},hide:function(){this.$el.css("display","none")},_resize:function(){if("block"===this.$el.css("display")){var a=this.grid.dimensionModel.get("headerHeight"),b=this.grid.dimensionModel.get("bodyHeight");this.$el.css("marginTop",a+"px").css("height",b+"px")}}}),b.Layer.Empty=b.Layer.Base.extend({className:"no_row_layer",initialize:function(){b.Layer.Base.prototype.initialize.apply(this,arguments),this.setOwnProperties({text:"데이터가 존재하지 않습니다."})},template:_.template("<%=text%>")}),b.Layer.Loading=b.Layer.Base.extend({className:"loading_layer",initialize:function(){b.Layer.Base.prototype.initialize.apply(this,arguments),this.text="요청을 처리 중입니다."},template:_.template('<div>    <%=text%>    <div class="loading_img"></div></div>')}),b.Layer.Ready=b.Layer.Base.extend({className:"initializing_layer",initialize:function(){b.Layer.Base.prototype.initialize.apply(this,arguments),this.text="초기화 중 입니다."}}),b.Layout.Frame=b.Base.extend({tagName:"div",className:"lside_area",initialize:function(){b.Base.prototype.initialize.apply(this,arguments),this.listenTo(this.grid.renderModel,"columnModelChanged",this.render,this),this.listenTo(this.grid.dimensionModel,"columnWidthChanged",this._onColumnWidthChanged,this),this.setOwnProperties({header:null,body:null})},render:function(){this.destroyChildren(),this.beforeRender();var a=this.header=this.createView(b.Layout.Header,{grid:this.grid,whichSide:this.whichSide}),c=this.body=this.createView(b.Layout.Body,{grid:this.grid,whichSide:this.whichSide});return this.$el.append(a.render().el).append(c.render().el),this.afterRender(),this.trigger("afterRender"),this},beforeRender:function(){},afterRender:function(){}}),b.Layout.Body=b.Base.extend({tagName:"div",className:"data",template:_.template('<div class="table_container" style="top: 0px">    <table width="100%" border="0" cellspacing="1" cellpadding="0" bgcolor="#EFEFEF">        <colgroup><%=colGroup%></colgroup>        <tbody></tbody>    </table></div>'),events:{scroll:"_onScroll",mousedown:"_onMouseDown"},initialize:function(a){b.Base.prototype.initialize.apply(this,arguments),this.setOwnProperties({whichSide:a&&a.whichSide||"R"}),this.listenTo(this.grid.dimensionModel,"columnWidthChanged",this._onColumnWidthChanged,this).listenTo(this.grid.dimensionModel,"change:bodyHeight",this._onBodyHeightChange,this).listenTo(this.grid.renderModel,"change:top",this._onTopChange,this).listenTo(this.grid.renderModel,"change:scrollTop",this._onScrollTopChange,this).listenTo(this.grid.renderModel,"change:scrollLeft",this._onScrollLeftChange,this).listenTo(this.grid.renderModel,"beforeRefresh",this._onBeforeRefresh,this)},_onBodyHeightChange:function(a,b){this.$el.css("height",b+"px")},_onColumnWidthChanged:function(){for(var a=this.grid.dimensionModel.getColumnWidthList(this.whichSide),b=this.$el.find("col"),c=0;c<b.length;c++)b.eq(c).css("width",a[c]+"px")},_onMouseDown:function(a){var b,c,d=this.grid.selection;a.shiftKey?(b=this.grid.focusModel.indexOf(!0),d.hasSelection()||d.startSelection(b.rowIdx,b.columnIdx),d.attachMouseEvent(a.pageX,a.pageY),c=d.getIndexFromMousePosition(a.pageX,a.pageY),d.updateSelection(c.row,c.column),this.grid.focusAt(c.row,c.column)):(d.endSelection(),this.grid.selection.attachMouseEvent(a.pageX,a.pageY))},_onScroll:function(a){var b={};b.scrollTop=a.target.scrollTop,"R"===this.whichSide&&(b.scrollLeft=a.target.scrollLeft),this.grid.renderModel.set("$scrollTarget",this.$el),this.grid.renderModel.set(b)},_onScrollLeftChange:function(a,b){"R"===this.whichSide&&(this.el.scrollLeft=b)},_onScrollTopChange:function(a,b){this.el.scrollTop=b},_onTopChange:function(a,b){this.$el.children(".table_container").css("top",b+"px")},_onBeforeRefresh:function(){this.el.scrollTop=this.grid.renderModel.previous("scrollTop")},_getViewCollection:function(){return this.grid.renderModel.getCollection(this.whichSide)},render:function(){var a,c;return this.destroyChildren(),this.$el.css({height:this.grid.dimensionModel.get("bodyHeight")}).html(this.template({colGroup:this._getColGroupMarkup()})),c=this.createView(b.RowList,{grid:this.grid,collection:this._getViewCollection(),el:this.$el.find("tbody"),whichSide:this.whichSide}),c.render(),a=this.addView(this.grid.selection.createLayer(this.whichSide)),this.$el.append(a.render().el),this},_getColGroupMarkup:function(){for(var a=this.grid.columnModel,b=this.grid.dimensionModel,c=b.getColumnWidthList(this.whichSide),d=a.getVisibleColumnModelList(this.whichSide),e="",f=0,g=c.length;g>f;f++)e+='<col columnname="'+d[f].columnName+'" style="width:'+c[f]+'px">';return e}}),b.Layout.Frame.Lside=b.Layout.Frame.extend({className:"lside_area",initialize:function(){b.Layout.Frame.prototype.initialize.apply(this,arguments),this.setOwnProperties({whichSide:"L"})},_onColumnWidthChanged:function(){var a=this.grid.dimensionModel.get("lsideWidth");this.$el.css({width:a+"px"})},beforeRender:function(){var a=this.grid.dimensionModel.get("lsideWidth");this.$el.css({display:"block",width:a+"px"})}}),b.Layout.Frame.Rside=b.Layout.Frame.extend({className:"rside_area",initialize:function(){b.Layout.Frame.prototype.initialize.apply(this,arguments),this.setOwnProperties({whichSide:"R"})},_onColumnWidthChanged:function(){var a=this.grid.dimensionModel,b=a.get("lsideWidth"),c=a.get("rsideWidth");this.$el.css({width:c+"px",marginLeft:b+"px"})},beforeRender:function(){var a=this.grid.dimensionModel,b=a.get("lsideWidth"),c=a.get("rsideWidth");this.$el.css({display:"block",width:c+"px",marginLeft:b+"px"})},afterRender:function(){var a,c=$("<div></div>");c.css({height:this.grid.dimensionModel.get("headerHeight")-2}).addClass("space"),this.$el.append(c),this.grid.option("notUseSmartRendering")===!1&&(a=this.createView(b.Layout.Frame.Rside.VirtualScrollBar,{grid:this.grid}),this.$el.append(a.render().el))}}),b.Layout.Frame.Rside.VirtualScrollBar=b.Base.extend({tagName:"div",className:"virtual_scrollbar",initialize:function(){b.Base.prototype.initialize.apply(this,arguments),this.listenTo(this.grid.dataModel,"sort add remove reset",this._setHeight,this),this.listenTo(this.grid.dimensionModel,"change",this._onDimensionChange,this),this.listenTo(this.grid.renderModel,"change:scrollTop",this._onScrollTopChange,this),this.timeoutForScroll=0},template:_.template('<div class="content"></div>'),events:{scroll:"_onScroll"},_onScroll:function(a){clearTimeout(this.timeoutForScroll),this.timeoutForScroll=setTimeout($.proxy(function(){this.grid.renderModel.set("$scrollTarget",this.$el),this.grid.renderModel.set("scrollTop",a.target.scrollTop)},this),10)},_onDimensionChange:function(a){(a.changed.headerHeight||a.changed.bodyHeight)&&this.render()},_onScrollTopChange:function(a,b){var c;this.el.scrollTop=b,c=this.el.scrollTop,c!==b&&this.grid.renderModel.set("scrollTop",c)},render:function(){return this.$el.css({height:this.grid.dimensionModel.get("bodyHeight")-this.grid.scrollBarSize,top:this.grid.dimensionModel.get("headerHeight"),display:"block"}).html(this.template()),this._setHeight(),this},_setHeight:function(){var a=this.grid.dimensionModel.get("rowHeight"),b=this.grid.dataModel.length,c=a*this.grid.dataModel.length+(b+1);this.$el.find(".content").height(c)}}),b.Layout.Header=b.Base.extend({tagName:"div",className:"header",viewList:[],whichSide:"R",events:{click:"_onClick"},initialize:function(a){b.Base.prototype.initialize.apply(this,arguments),this.whichSide=a.whichSide,this.viewList=[],this.setOwnProperties({timeoutForAllChecked:0}),this.listenTo(this.grid.renderModel,"change:scrollLeft",this._onScrollLeftChange,this).listenTo(this.grid.dimensionModel,"columnWidthChanged",this._onColumnWidthChanged,this).listenTo(this.grid.dataModel,"change:_button",this._onCheckCountChange,this)},_onCheckCountChange:function(){"checkbox"===this.grid.option("selectType")&&(clearTimeout(this.timeoutForAllChecked),this.timeoutForAllChecked=setTimeout($.proxy(this._syncCheckstate,this),10))},_syncCheckstate:function(){if("checkbox"===this.grid.option("selectType")){var a=this.$el.find('th[columnname="_button"] input');a.length&&a.prop("checked",this.grid.dataModel.length===this.grid.getCheckedRowList().length)}},_onColumnWidthChanged:function(){for(var a=this._getColumnData(),b=a.widthList,c=this.$el.find("col"),d=0;d<c.length;d++)c.eq(d).css("width",b[d]+"px")},_onScrollLeftChange:function(a,b){"R"===this.whichSide&&(this.el.scrollLeft=b)},_onClick:function(a){var b,c=$(a.target);"_button"===c.closest("th").attr("columnname")&&c.is("input")&&(b=c.prop("checked"),b?this.grid.checkAll():this.grid.uncheckAll())},template:_.template('    <table width="100%" border="0" cellspacing="1" cellpadding="0" bgcolor="#EFEFEF">        <colgroup><%=colGroup%></colgroup>        <tbody><%=tBody%></tbody>    </table>'),render:function(){this.destroyChildren();var a=this.createView(b.Layout.Header.ResizeHandler,{whichSide:this.whichSide,grid:this.grid});return this.$el.css({height:this.grid.dimensionModel.get("headerHeight")}).html(this.template({colGroup:this._getColGroupMarkup(),tBody:this._getTableBodyMarkup()})),this.$el.append(a.render().el),this},_getColumnData:function(){var a=this.grid.columnModel,b=this.grid.dimensionModel,c=b.getColumnWidthList(this.whichSide),d=a.getVisibleColumnModelList(this.whichSide);return{widthList:c,modelList:d}},_getColGroupMarkup:function(){for(var a=this._getColumnData(),b=a.widthList,c=a.modelList,d="",e=0,f=b.length;f>e;e++)d+='<col columnname="'+c[e].columnName+'" style="width:'+b[e]+'px">';return d},_getHeaderHeight:function(){return this.grid.dimensionModel.get("headerHeight")},_getTableBodyMarkup:function(){for(var a,b,c,d,e,f=this._getColumnHierarchyList(),h=this._getHierarchyMaxRowCount(f),i=(this._getColumnData(),this._getHeaderHeight()),j=new Array(h),k=[],l="",m="",n="",o="",p="",q=new Array(h),r=[],s=1,t=g.getRowHeight(h,i)-1,u=0;u<f.length;u++){d=f[u].length,b=0;for(var v=0;d>v;v++)s=d-1==v&&h-d+1>1?h-d+1:1,c=f[u][v],a=t*s,v===d-1?a=i-b-2:b+=a+1,q[v]==c.columnName?(j[v].pop(),r[v]+=1):r[v]=1,q[v]=c.columnName,l=" columnName='"+c.columnName+"'",n=" height='"+a+"'",p=s>1?" rowSpan='"+s+"'":"",o=r[v]>1?" colSpan='"+r[v]+"'":"",j[v]=j[v]||[],e=c.title,j[v].push("<th"+l+m+n+p+o+">"+e+"</th>")}for(var u=0;u<j.length;u++)k.push("<tr>"+j[u].join("")+"</tr>");return k.join("")},_getHierarchyMaxRowCount:function(a){var b=[];return _.each(a,function(a){b.push(a.length)},this),Math.max.apply(Math,b)},_getColumnHierarchyList:function(){var a=this._getColumnData().modelList,b=[];return _.each(a,function(a){b.push(this._getColumnHierarchy(a).reverse())},this),b},_getColumnHierarchy:function(a,b){var c=this.grid.option("columnMerge"),b=b||[];if(a&&(b.push(a),c))for(var d=0;d<c.length;d++)-1!==$.inArray(a.columnName,c[d].columnNameList)&&(b=this._getColumnHierarchy(c[d],b));return b}}),b.Layout.Header.ResizeHandler=b.Base.extend({tagName:"div",className:"resize_handle_container",viewList:[],whichSide:"R",events:{"mousedown .resize_handle":"_onMouseDown"},initialize:function(a){b.Base.prototype.initialize.apply(this,arguments),this.setOwnProperties({whichSide:a.whichSide,isResizing:!1,$target:null,differenceLeft:0,initialWidth:0,initialOffsetLeft:0,initialLeft:0}),this.listenTo(this.grid.dimensionModel,"columnWidthChanged",this._refreshHandlerPosition,this)},_getColumnData:function(){var a=this.grid.columnModel,b=this.grid.dimensionModel,c=b.getColumnWidthList(this.whichSide),d=a.getVisibleColumnModelList(this.whichSide);return{widthList:c,modelList:d}},_getResizeHandler:function(){for(var a=this._getColumnData(),b=a.modelList,c=[],d=this.grid.dimensionModel.get("headerHeight"),e=0;e<b.length;e++)c.push("<div columnIndex='"+e+"' columnName='"+b[e].columnName+"' class='resize_handle"+(e+1==b.length?" resize_handle_last":"")+"' style='height:"+d+"px;' title='마우스 드래그를 통해 컬럼의 넓이를 변경할 수 있고,\n더블클릭을 통해 넓이를 초기화할 수 있습니다.'></div>");return c.join("")},render:function(){var a=this.grid.dimensionModel.get("headerHeight");return this.$el.empty(),this.$el.show().css({marginTop:-a+"px",height:a+"px"}).html(this._getResizeHandler()),this._refreshHandlerPosition(),this},_refreshHandlerPosition:function(){for(var a=this._getColumnData(),b=a.widthList,c=this.$el.find(".resize_handle"),d=0,e=0,f=c.length;f>e;e++)d+=b[e]+1,c.eq(e).css("left",d-3+"px")},_isResizing:function(){return!!this.isResizing},_onMouseDown:function(a){this._startResizing(a)},_onMouseUp:function(){this._stopResizing(),this.isResizing=!1},_onMouseMove:function(a){if(this._isResizing()){a.preventDefault();var b=a.pageX-this.initialOffsetLeft;this.$target.css("left",b+"px");var c=this._calculateWidth(a.pageX),d=parseInt(this.$target.attr("columnindex"),10);this.grid.dimensionModel.setColumnWidth(this._getColumnIndex(d),c)}},_calculateWidth:function(a){var b=a-this.initialOffsetLeft-this.initialLeft;return this.initialWidth+b},_getColumnIndex:function(a){return"R"===this.whichSide?a+this.grid.columnModel.get("columnFixIndex"):a},_startResizing:function(a){var b=this._getColumnData(),c=b.widthList,d=$(a.target);this.isResizing=!0,this.$target=d,this.initialLeft=parseInt(d.css("left").replace("px",""),10),this.initialOffsetLeft=this.$el.offset().left,this.initialWidth=c[d.attr("columnindex")],this.grid.$el.bind("mousemove",$.proxy(this._onMouseMove,this)).bind("mouseup",$.proxy(this._onMouseUp,this)).css("cursor","col-resize")},_stopResizing:function(){this.isResizing=!1,this.$target=null,this.initialLeft=0,this.initialOffsetLeft=0,this.initialWidth=0,this.grid.$el.unbind("mousemove",$.proxy(this._onMouseMove,this)).unbind("mouseup",$.proxy(this._onMouseUp,this)).css("cursor","default")}}),b.Layout.Toolbar=b.Base.extend({tagName:"div",className:"toolbar",initialize:function(){b.Base.prototype.initialize.apply(this,arguments),this.setOwnProperties({controlPanel:null,resizeHandler:null,pagination:null})},render:function(){this.destroyChildren();var a,c,d,e=this.grid.option("toolbar");return this.$el.empty(),e&&e.hasControlPanel&&(c=this.createView(b.Layout.Toolbar.ControlPanel,{grid:this.grid}),this.$el.append(c.render().el).css("display","block")),e&&e.hasResizeHandler&&(a=this.createView(b.Layout.Toolbar.ResizeHandler,{grid:this.grid}),this.$el.append(a.render().el).css("display","block")),e&&e.hasPagination&&(d=this.createView(b.Layout.Toolbar.Pagination,{grid:this.grid}),this.$el.append(d.render().el).css("display","block")),this.setOwnProperties({controlPanel:c,resizeHandler:a,pagination:d}),this}}),b.Layout.Toolbar.Pagination=b.Base.extend({tagName:"div",className:"pagination",template:_.template('<a href="#" class="pre_end">맨앞</a><a href="#" class="pre">이전</a> <a href="#" class="next">다음</a><a href="#" class="next_end">맨뒤</a>'),initialize:function(){b.Base.prototype.initialize.apply(this,arguments)},render:function(){return this.destroyChildren(),this.$el.empty().html(this.template()),this._setPaginationInstance(),this},_setPaginationInstance:function(){var b=a&&a.Component&&a.Component.Pagination,c=null;!this.instance&&b&&(c=new b({itemCount:1,itemPerPage:1},this.$el)),this.setOwnProperties({instance:c})}}),b.Layout.Toolbar.ResizeHandler=b.Base.extend({tagName:"div",className:"height_resize_bar",events:{mousedown:"_onMouseDown"},template:_.template('<a href="#" class="height_resize_handle">높이 조절</a>'),initialize:function(){b.Base.prototype.initialize.apply(this,arguments)},_attachMouseEvent:function(){$(document).on("mousemove",$.proxy(this._onMouseMove,this)),$(document).on("mouseup",$.proxy(this._onMouseUp,this)),$(document).on("selectstart",$.proxy(this._onSelectStart,this))},_detachMouseEvent:function(){$(document).off("mousemove",$.proxy(this._onMouseMove,this)),$(document).off("mouseup",$.proxy(this._onMouseUp,this)),$(document).off("selectstart",$.proxy(this._onSelectStart,this))},_onMouseDown:function(a){a.preventDefault(),$(document.body).css("cursor","row-resize"),this.grid.updateLayoutData(),this._attachMouseEvent()},_onMouseMove:function(a){var b=this.grid.dimensionModel,c=b.get("offsetTop"),d=b.get("headerHeight"),e=b.get("rowHeight"),f=b.get("toolbarHeight"),g=a.pageY-c-d-f;g=Math.max(g,e+b.getScrollXSize()),b.set({bodyHeight:g})},_onMouseUp:function(){$(document.body).css("cursor","default"),this._detachMouseEvent()},_onSelectStart:function(a){return a.preventDefault(),!1},render:function(){return this.destroyChildren(),this.$el.html(this.template()),this}}),b.Layout.Toolbar.ControlPanel=b.Base.extend({tagName:"div",className:"btn_setup",template:_.template('<a href="#" class="excel_download_button btn_text excel_all" style="display: inline-block;"><span><em class="f_bold p_color5">전체엑셀다운로드</em></span></a><a href="#" class="excel_download_button btn_text excel_grid" style="display: inline-block;"><span><em class="excel">엑셀다운로드</em></span></a><a href="#" class="grid_configurator_button btn_text" style="display: none;"><span><em class="grid">그리드설정</em></span></a>'),initialize:function(){b.Base.prototype.initialize.apply(this,arguments)},render:function(){return this.destroyChildren(),this.$el.html(this.template()),this}}),b.Renderer.Row=b.Base.Renderer.extend({eventHandler:{click:"_onClick",mousedown:"_onMouseDown"},baseTemplate:_.template('<tr key="<%=key%>" style="height: <%=height%>px;"><%=contents%>class="<%=className%>" </tr>'),initialize:function(a){b.Base.Renderer.prototype.initialize.apply(this,arguments);var c=a&&a.whichSide||"R";this.setOwnProperties({$parent:a.$parent,collection:a.collection,whichSide:c,columnModelList:this.grid.columnModel.getVisibleColumnModelList(c),cellHandlerList:[],_isEventAttached:!1}),this.collection.forEach(function(a){this.listenTo(a,"change",this._onModelChange,this)},this)},destroy:function(){this.detachHandler(),this.destroyChildren(),this.remove()},attachHandler:function(){this._attachHandler(this.$parent),this.grid.cellFactory.attachHandler(this.$parent),this._isEventAttached=!0},detachHandler:function(){this._isEventAttached&&(this._detachHandler(this.$parent),this.grid.cellFactory.detachHandler(this.$parent))},_onClick:function(a){console.log("click",a)},_onMouseDown:function(a){var b=$(a.target).closest("td"),c=$(a.target).closest("tr"),d=b.attr("columnName"),e=c.attr("key");this.grid.focus(e,d),"radio"===this.grid.option("selectType")&&this.grid.check(e)},_onModelChange:function(a){var b,c,d;_.each(a.changed,function(a,e){"_extraData"!==e?(b=this._getEditType(e,a),c=this.grid.cellFactory.getInstance(b),c.onModelChange(a,this._getTrElement(a.rowKey))):(d=a.rowState,d&&this._setRowState(d,this._getTrElement(a.rowKey)))},this)},_setRowState:function(){},_getTrElement:function(a){return this.$parent.find('tr[key="'+a+'"]')},_getEditType:function(a,b){var c=this.grid.columnModel.getEditType(a);return b.isEditable||"_number"===a||(c="normal"),c},getHtml:function(a){var b,c,d,e,f=this.columnModelList,g=(this.grid.columnModel,this.grid.cellFactory),h="";this.cellHandlerList=[];for(var i=0,j=f.length;j>i;i++)b=f[i].columnName,c=a.get(b),c&&c.isMainRow&&(d=this._getEditType(b,c),e=g.getInstance(d),h+=e.getHtml(c),this.cellHandlerList.push({selector:'td[columnName="'+b+'"]',cellInstance:e}));return this.baseTemplate({key:a.get("rowKey"),height:this.grid.dimensionModel.get("rowHeight"),contents:h,className:""})}}),b.Base.Renderer.Cell=b.Base.Renderer.extend({rerenderAttributes:["isEditable","optionList","value"],_defaultKeyDownSwitch:{ESC:function(a,b){this.focusOut(b.$target)},ENTER:function(a,b){this.focusOut(b.$target)},TAB:function(a,b){this.grid.focusClipboard(),a.shiftKey?this.grid.focusIn(b.rowKey,b.focusModel.prevColumnName(),!0):this.grid.focusIn(b.rowKey,b.focusModel.nextColumnName(),!0)},_default:function(){}},eventHandler:{},initialize:function(){b.Base.Renderer.prototype.initialize.apply(this,arguments),this._initializeEventHandler(),this.setOwnProperties({_keyDownSwitch:$.extend({},this._defaultKeyDownSwitch)})},baseTemplate:_.template('<td  columnName="<%=columnName%>" <%=rowSpan%> class="<%=className%>" <%=attributes%> data-edit-type="<%=editType%>"><%=content%></td>'),focusOut:function(){this.grid.focusClipboard()},onModelChange:function(a,b){{var c,d=b.attr("key"),e=this.grid.getElement(d,a.columnName),f=!1;-1!==$.inArray("value",a.changed)}this._setFocusedClass(a,e);for(var g=0;g<this.rerenderAttributes.length;g++)if(-1!==$.inArray(this.rerenderAttributes[g],a.changed)){f=!0;break}e.attr("class",this._getClassNameList(a).join(" ")),c=!!e.find(":focus").length,f===!0?(this.render(a,e,c),c&&this.focusIn(e)):this.setElementAttribute(a,e,c)},attachHandler:function(a){this._attachHandler(a)},detachHandler:function(a){this._detachHandler(a)},render:function(a,b,c){this._detachHandler(b),b.data("edit-type",this.getEditType()).html(this.getContentHtml(a,b,c)),this._attachHandler(b)},_getKeyDownSwitchVariables:function(a){var b=this.grid,c=a.keyCode||a.which,d=b.focusModel.which(),e=d.rowKey,f=d.columnName;return{keyDownEvent:a,$target:$(a.target),focusModel:b.focusModel,rowKey:e,columnName:f,keyName:b.keyName[c]}},_setKeyDownSwitch:function(a,b){"object"==typeof a?this._keyDownSwitch=$.extend(this._keyDownSwitch,a):this._keyDownSwitch[a]=b},_executeKeyDownSwitch:function(a){var b=a.keyCode||a.which,c=this.grid.keyName[b];return(this._keyDownSwitch[c]||this._keyDownSwitch._default).call(this,a,this._getKeyDownSwitchVariables(a)),!!this._keyDownSwitch[c]},_onKeyDown:function(a){this._executeKeyDownSwitch(a)&&a.preventDefault()},_setFocusedClass:function(a,b){a.selected===!0?b.addClass("selected"):b.removeClass("selected"),a.focused===!0?b.addClass("focused"):b.removeClass("focused")},_getClassNameList:function(a){var b,c,d=[],e={},f=a.columnName,g=["_button","_number"],h=-1!==$.inArray(f,g);for(a.className?d.push(a.className):null,a.selected?d.push("selected"):null,a.focused?d.push("focused"):null,a.isEditable&&!h?d.push("editable"):null,a.isDisabled&&!h?d.push("disabled"):null,c=d.length,b=0;c>b;b++)e[d[b]]=!0;return d=[],_.each(e,function(a,b){d.push(b)},this),d},getHtml:function(a){return this.baseTemplate({columnName:a.columnName,rowSpan:a.rowSpan?'rowSpan="'+a.rowSpan+'"':"",className:this._getClassNameList(a).join(" "),attributes:this.getAttributes(a),editType:this.getEditType(),content:this.getContentHtml(a)})},getAttributesString:function(a){var b="";return _.each(a,function(a,c){b+=" "+c+'="'+a+'"'},this),b},getEventHandler:function(){return this._eventHandler},getAttributes:function(){return""},_getColumnName:function(a){return a.closest("td").attr("columnName")},_getRowKey:function(a){return a.closest("tr").attr("key")},_getCellData:function(a){return this.grid.renderModel.getCellData(this._getRowKey(a),this._getColumnName(a))},_getCellAddress:function(a){return{rowKey:this._getRowKey(a),columnName:this._getColumnName(a)}}}),b.Base.Renderer.Cell.Interface=function(){},b.Base.Renderer.Cell.Interface.prototype.getEditType=function(){},b.Base.Renderer.Cell.Interface.prototype.focusIn=function(){},b.Base.Renderer.Cell.Interface.prototype.getContentHtml=function(){},b.Base.Renderer.Cell.Interface.prototype.setElementAttribute=function(){},b.Renderer.Cell.List=b.Base.Renderer.Cell.extend({rerenderAttributes:["isEditable","optionList"],eventHandler:{},initialize:function(){b.Base.Renderer.Cell.prototype.initialize.apply(this,arguments)},focusIn:function(){},getEditType:function(){},getContentHtml:function(){throw this.error("Implement getContentHtml(cellData, $target) method. On re-rendering")},setElementAttribute:function(){throw this.error("Implement setElementAttribute(cellData, $target) method. ")},_getOptionList:function(a){var b=this.grid.columnModel.getColumnModel(a.columnName);return a.optionList&&a.optionList.length?a.optionList:b.editOption.list},_onBlur:function(a){var b=$(a.target);b.closest("td").data("isFocused",!1)},_onFocus:function(a){var b=$(a.target);b.closest("td").data("isFocused",!0)}}),b.Renderer.Cell.List.Select=b.Renderer.Cell.List.extend({initialize:function(){b.Renderer.Cell.List.prototype.initialize.apply(this,arguments),this._setKeyDownSwitch({ESC:function(a,b){this.focusOut(b.$target)},ENTER:function(a,b){this.focusOut(b.$target)}})},eventHandler:{"change select":"_onChange","keydown select":"_onKeyDown","blur select":"_onBlur","focus select":"_onFocus"},focusIn:function(a){a.find("select").focus()},getEditType:function(){return"select"},getContentHtml:function(a){var b=this._getOptionList(a),c="",d=a.isDisabled,e=b.length;c+='<select name="'+g.getUniqueKey()+'"',c+=d?" disabled ":"",c+=">";for(var f=0;e>f;f++)c+="<option ",c+='value="'+b[f].value+'"',a.value==b[f].value&&(c+=" selected"),c+=" >",c+=b[f].text,c+="</option>";return c+="</select>"},setElementAttribute:function(a,b,c){var d=b.find("select");c?d.blur():null,d.val(a.value),c?d.focus():null},_onChange:function(a){var b=$(a.target),c=this._getCellAddress(b),d=this.grid;d.setValue(c.rowKey,c.columnName,b.val())}}),b.Renderer.Cell.List.Button=b.Renderer.Cell.List.extend({initialize:function(){b.Renderer.Cell.List.prototype.initialize.apply(this,arguments),this._setKeyDownSwitch({UP_ARROW:function(){},DOWN_ARROW:function(){},PAGE_UP:function(){},PAGE_DOWN:function(){},ENTER:function(a,b){b.$target.trigger("click")
},LEFT_ARROW:function(a,b){this._focusPrevInput(b.$target)},RIGHT_ARROW:function(a,b){this._focusNextInput(b.$target)},ESC:function(a,b){this.focusOut(b.$target)},TAB:function(a,b){a.shiftKey?this._focusPrevInput(b.$target)||this.grid.focusIn(b.rowKey,b.focusModel.prevColumnName(),!0):this._focusNextInput(b.$target)||this.grid.focusIn(b.rowKey,b.focusModel.nextColumnName(),!0)}})},eventHandler:{"change input":"_onChange","keydown input":"_onKeyDown"},template:{input:_.template('<input type="<%=type%>" name="<%=name%>" id="<%=id%>" value="<%=value%>" <%=checked%> <%=disabled%> />'),label:_.template('<label for="<%=id%>" style="margin-right:10px"><%=text%></label>')},getEditType:function(){return"button"},focusIn:function(a){a.find("input").eq(0).focus()},_focusNextInput:function(a){var b=a;do b=b.next();while(b.length&&!b.is("input"));return b.length?(b.focus(),!0):!1},_focusPrevInput:function(a){var b=a;do b=b.prev();while(b.length&&!b.is("input"));return b.length?(b.focus(),!0):!1},getContentHtml:function(a){for(var b,c=this._getOptionList(a),d=c.length,e=this.grid.columnModel.getColumnModel(a.columnName),f=a.value,h=(""+f).split(","),i="",j=g.getUniqueKey(),k=a.isDisabled,l=0;d>l;l++)b=j+"_"+c[l].value,i+=this.template.input({type:e.editOption.type,name:j,id:b,value:c[l].value,checked:-1===$.inArray(""+c[l].value,h)?"":"checked",disabled:k?"disabled":""}),c[l].text&&(i+=this.template.label({id:b,text:c[l].text}));return i},setElementAttribute:function(a,b){var c,d=a.value,e=(""+d).split(","),f=e.length;for(b.find("input:checked").prop("checked",!1),c=0;f>c;c++)b.find('input[value="'+e[c]+'"]').prop("checked",!0)},_getCheckedList:function(a){for(var b=a.closest("td").find("input:checked"),c=[],d=0;d<b.length;d++)c.push(b.eq(d).val());return c},_onChange:function(a){var b=$(a.target),c=this._getCellAddress(b);this.grid.setValue(c.rowKey,c.columnName,this._getCheckedList(b).join(","))}}),b.Renderer.Cell.Normal=b.Base.Renderer.Cell.extend({initialize:function(){b.Base.Renderer.Cell.prototype.initialize.apply(this,arguments)},getEditType:function(){return"normal"},getContentHtml:function(a){var b=a.columnName,c=this.grid.columnModel.getColumnModel(b),d=this.grid.dataModel.get(a.rowKey).getTagFiltered(b),e=a.rowKey;return"function"==typeof c.formatter&&(d=c.formatter(d,this.grid.dataModel.get(e).toJSON(),c)),d},focusIn:function(){this.grid.focusClipboard()},setElementAttribute:function(){}}),b.Renderer.Cell.Normal.Number=b.Renderer.Cell.Normal.extend({rerenderAttributes:[],initialize:function(){b.Renderer.Cell.Normal.prototype.initialize.apply(this,arguments)},getEditType:function(){return"_number"},getContentHtml:function(a){return a.value}}),b.Renderer.Cell.MainButton=b.Base.Renderer.Cell.extend({rerenderAttributes:["isEditable","optionList"],eventHandler:{mousedown:"_onMouseDown","change input":"_onChange","keydown input":"_onKeyDown"},initialize:function(){b.Base.Renderer.Cell.prototype.initialize.apply(this,arguments),this._setKeyDownSwitch({UP_ARROW:function(){},DOWN_ARROW:function(){},ENTER:function(a,b){this.focusOut(b.$target)},LEFT_ARROW:function(a,b){this._focusPrevInput(b.$target)},RIGHT_ARROW:function(a,b){this._focusPrevInput(b.$target)},ESC:function(a,b){this._restore(b.$target),this.focusOut(b.$target)}})},template:_.template('<input type="<%=type%>" name="<%=name%>" <%=checked%> <%=disabled%>/>'),getEditType:function(){return"_button"},getContentHtml:function(a){var b=a.isDisabled;return this.template({type:this.grid.option("selectType"),name:this.grid.id,checked:a.value?"checked":"",disabled:b?"disabled":""})},focusIn:function(){},toggle:function(a){var b=a.find("input");"checkbox"===this.grid.option("selectType")&&b.trigger("click")},setElementAttribute:function(a,b){var c=b.find("input"),d=c.prop("checked");d!==!!a.value&&c.prop("checked",a.value)},getAttributes:function(){return this.getAttributesString({align:"center"})},_onChange:function(a){var b=$(a.target),c=this._getRowKey(b);this.grid.setValue(c,"_button",b.prop("checked"))},_onMouseDown:function(a){var b=$(a.target);b.is("input")||b.find("input").trigger("click")}}),b.Renderer.Cell.Text=b.Base.Renderer.Cell.extend({rerenderAttributes:["isEditable"],eventHandler:{"blur input":"_onBlur","keydown input":"_onKeyDown","focus input":"_onFocus"},initialize:function(){b.Base.Renderer.Cell.prototype.initialize.apply(this,arguments),this.setOwnProperties({originalText:""}),this._setKeyDownSwitch({UP_ARROW:function(){},DOWN_ARROW:function(){},PAGE_UP:function(){},PAGE_DOWN:function(){},ENTER:function(a,b){this.focusOut(b.$target)},ESC:function(a,b){this._restore(b.$target),this.focusOut(b.$target)}})},template:_.template('<input type="text" value="<%=value%>" name="<%=name%>" <%=disabled%>/>'),getEditType:function(){return"text"},_onFocus:function(a){var b=$(a.target);this.originalText=b.val(),this.grid.selection.disable()},focusIn:function(a){var b=a.find("input");g.setCursorToEnd(b.get(0)),b.focus().select()},focusOut:function(){this.grid.focusClipboard()},getContentHtml:function(a){var b=this.grid.dataModel.get(a.rowKey).getTagFiltered(a.columnName);return this.template({value:b,disabled:a.isDisabled?"disabled":"",name:g.getUniqueKey()})},setElementAttribute:function(a,b){var c=-1!==$.inArray("value",a.changed),d=b.find("input");c?d.val(a.value):null,d.prop("disabled",a.isDisabled)},_isEdited:function(a){return a.val()!==this.originalText},_restore:function(a){a.val(this.originalText)},_onBlur:function(a){console.log("!!!!!!!!!!!!!!!!!!!!!!!!!blur");var b=$(a.target),c=this._getRowKey(b),d=this._getColumnName(b);this._isEdited(b)&&this.grid.setValue(c,d,b.val()),this.grid.selection.enable()}}),b.Renderer.Cell.Text.Convertible=b.Renderer.Cell.Text.extend({rerenderAttributes:["isEditable","value"],eventHandler:{click:"_onClick","blur input":"_onBlurConvertible","keydown input":"_onKeyDown","focus input":"_onFocus"},initialize:function(){b.Renderer.Cell.Text.prototype.initialize.apply(this,arguments),this.setOwnProperties({timeoutIdForClick:0})},getEditType:function(){return"text-convertible"},focusIn:function(a){this._startEdit(a)},focusOut:function(a){this._endEdit(a),this.grid.focusClipboard()},getContentHtml:function(a){var b=this.grid.dataModel.get(a.rowKey).getTagFiltered(a.columnName),c=this.grid.getElement(a.rowKey,a.columnName),d=!(!c.length||!c.data("isEdit"));return d?this.template({value:b,disabled:a.isDisabled?"disabled":"",name:g.getUniqueKey()}):b},setElementAttribute:function(){},_onBlurConvertible:function(a){var b=$(a.target),c=b.closest("td");this._onBlur(a),this._endEdit(c)},_startEdit:function(a){var b,c=a.data("isEdit");!c&&this.grid.isEditable(this._getRowKey(a),this._getColumnName(a))&&(a.data("isEdit",!0),this.render(this._getCellData(a),a),b=a.find("input"),this.originalText=b.val(),g.setCursorToEnd(b.get(0)),b.focus().select())},_endEdit:function(a){var b=a.data("isEdit");b&&(a.data("isEdit",!1),this.render(this._getCellData(a),a))},_onClick:function(a){var b=$(a.target),c=b.closest("td"),d=c.data("clicked");d?this._startEdit(c):(c.data("clicked",!0),clearTimeout(this.timeoutIdForClick),this.timeoutIdForClick=setTimeout(function(){c.data("clicked",!1)},400))}}),b.CellFactory=b.Base.extend({initialize:function(){b.Base.prototype.initialize.apply(this,arguments);({grid:this.grid});this._initializeInstances()},_initializeInstances:function(){var a={},c={grid:this.grid},d=[new b.Renderer.Cell.MainButton(c),new b.Renderer.Cell.Normal.Number(c),new b.Renderer.Cell.Normal(c),new b.Renderer.Cell.Text(c),new b.Renderer.Cell.List.Button(c),new b.Renderer.Cell.List.Select(c),new b.Renderer.Cell.Text.Convertible(c)];_.each(d,function(b){a[b.getEditType()]=b},this),this.setOwnProperties({instances:a})},getInstance:function(a){var b=this.instances[a];return b||(b="radio"===a||"checkbox"===a?this.instances.button:this.instances.normal),b},attachHandler:function(a){for(var b,c,d=a.find("td"),e=0;e<d.length;e++)b=d.eq(e),c=b.data("edit-type"),this.instances[c].attachHandler(b)},detachHandler:function(a){for(var b,c,d=a.find("td"),e=0;e<d.length;e++)b=d.eq(e),c=b.data("edit-type"),this.instances[c].detachHandler(b)}}),b.Clipboard=b.Base.extend({tagName:"textarea",className:"clipboard",events:{keydown:"_onKeydown",focus:"_onFocus",blur:"_onBlur"},_onFocus:function(){console.log("clipboard focus")},_onBlur:function(){console.log("clipboard blur")},initialize:function(){b.Base.prototype.initialize.apply(this,arguments),this.setOwnProperties({timeoutIdForCopy:0,timeoutIdForKeyIn:0,isLocked:!1})},render:function(){return this},_lock:function(){clearTimeout(this.timeoutIdForKeyIn),this.isLocked=!0,this.timeoutIdForKeyIn=setTimeout($.proxy(this._unlock,this),10)},_unlock:function(){this.isLocked=!1},_onKeydown:function(a){a.keyCode||a.which;return this.isLocked?(a.preventDefault(),!1):(a.shiftKey&&(a.ctrlKey||a.metaKey)?this._keyInWithShiftAndCtrl(a):a.shiftKey?this._keyInWithShift(a):a.ctrlKey||a.metaKey?this._keyInWithCtrl(a):this._keyIn(a),void this._lock())},_keyIn:function(a){var b=this.grid,c=b.keyMap,d=b.focusModel,e=b.selection,f=d.which(),g=f.rowKey,h=f.columnName,i=b.dimensionModel.getDisplayRowCount(),j=!0,k=a.keyCode||a.which;switch(k){case c.UP_ARROW:b.focus(d.prevRowKey(),h,!0);break;case c.DOWN_ARROW:b.focus(d.nextRowKey(),h,!0);break;case c.LEFT_ARROW:b.focus(g,d.prevColumnName(),!0);break;case c.RIGHT_ARROW:b.focus(g,d.nextColumnName(),!0);break;case c.PAGE_UP:b.focus(d.prevRowKey(i-1),h,!0);break;case c.PAGE_DOWN:b.focus(d.nextRowKey(i-1),h,!0);break;case c.HOME:b.focus(g,d.firstColumnName(),!0);break;case c.END:b.focus(g,d.lastColumnName(),!0);break;case c.SPACE:case c.ENTER:this._onEnterSpace(g,h);break;case c.DEL:this._del(g,h);break;case c.TAB:b.focusIn(g,d.nextColumnName(),!0);break;case c.CHAR_V:break;default:j=!1}return a.preventDefault(),e.endSelection(),j},_onEnterSpace:function(a,b){var c,d=this.grid,e=this.grid.columnModel.getEditType(b);"_button"===e?(c=this.grid.cellFactory.getInstance(e),c.toggle(d.getElement(a,b))):d.focusIn(a,b)},_keyInWithShift:function(a){var b=this.grid,c=b.keyMap,d=b.focusModel,e=b.columnModel.getVisibleColumnModelList(),f=b.focusModel.indexOf(),g=d.which(),h=!0,i=b.dimensionModel.getDisplayRowCount(),j=a.keyCode||a.which;switch(j){case c.UP_ARROW:this._updateSelectionByKeyIn(d.prevRowIndex(),f.columnIdx);break;case c.DOWN_ARROW:this._updateSelectionByKeyIn(d.nextRowIndex(),f.columnIdx);break;case c.LEFT_ARROW:this._updateSelectionByKeyIn(f.rowIdx,d.prevColumnIndex());break;case c.RIGHT_ARROW:this._updateSelectionByKeyIn(f.rowIdx,d.nextColumnIndex());break;case c.PAGE_UP:this._updateSelectionByKeyIn(d.prevRowIndex(i-1),f.columnIdx);break;case c.PAGE_DOWN:this._updateSelectionByKeyIn(d.nextRowIndex(i-1),f.columnIdx);break;case c.HOME:this._updateSelectionByKeyIn(f.rowIdx,0);break;case c.END:this._updateSelectionByKeyIn(f.rowIdx,e.length-1);break;case c.ENTER:break;case c.TAB:b.focusIn(g.rowKey,d.prevColumnName(),!0);break;case c.CHAR_V:break;default:h=!1}return a.preventDefault(),h},_keyInWithCtrl:function(a){var b=this.grid,c=b.keyMap,d=b.focusModel,e=!0,f=a.keyCode||a.which;switch(f){case c.CHAR_A:this.grid.selection.selectAll();break;case c.CHAR_C:this._copyToClipboard();break;case c.HOME:b.focus(d.firstRowKey(),d.firstColumnName(),!0);break;case c.END:b.focus(d.lastRowKey(),d.lastColumnName(),!0);break;case c.CHAR_V:break;default:e=!1}return e},_keyInWithShiftAndCtrl:function(a){var b=this.grid,c=b.keyMap,d=!0,e=b.columnModel.getVisibleColumnModelList(),f=a.keyCode||a.which;switch(f){case c.HOME:this._updateSelectionByKeyIn(0,0);break;case c.END:this._updateSelectionByKeyIn(b.dataModel.length-1,e.length-1);break;default:d=!1}return a.preventDefault(),d},_del:function(){var a,b,c,d=this.grid,e=d.selection,f=d.dataModel,g=d.focusModel.which(),h=d.columnModel.getVisibleColumnModelList(),i=g.rowKey,j=g.columnName;if(e.hasSelection()){for(a=e.getRange(),b=a.row[0];b<a.row[1]+1;b++)for(i=f.at(b).get("rowKey"),c=a.column[0];c<a.column[1]+1;c++)j=h[c].columnName,d.del(i,j,!0);d.renderModel.refresh()}else d.del(i,j)},_updateSelectionByKeyIn:function(a,b){var c=this.grid.selection,d=this.grid.focusModel.indexOf();c.hasSelection()||c.startSelection(d.rowIdx,d.columnIdx),c.updateSelection(a,b),this.grid.focusAt(a,b,!0)},_getClipboardString:function(){var a,b=this.grid.selection,c=this.grid.focusModel.which();return a=b.isShown()?this.grid.selection.getSelectionToString():this.grid.dataModel.get(c.rowKey).getVisibleText(c.columnName)},_copyToClipboard:function(){var a=this._getClipboardString();window.clipboardData?window.clipboardData.setData("Text",a)?this.$el.select():this.$el.val("").select():this.$el.val(a).select(),this.timeoutIdForCopy=setTimeout($.proxy(function(){this.$el.val("")},this),0)}}),b.RowList=b.Base.extend({initialize:function(a){b.Base.prototype.initialize.apply(this,arguments),this.setOwnProperties({whichSide:a&&a.whichSide||"R",timeoutIdForCollection:0,rowRenderer:null}),this._createRowRenderer(),this.listenTo(this.grid.renderModel,"rowListChanged",this._onRowListChange,this)},_createRowRenderer:function(){this.rowRenderer=this.createView(b.Renderer.Row,{grid:this.grid,$parent:this.$el,collection:this.collection,whichSide:this.whichSide})},_onRowListChange:function(){var a=this.grid.renderModel.get("$scrollTarget");clearTimeout(this.timeoutIdForCollection),a&&a.hasClass("virtual_scrollbar")?this.timeoutIdForCollection=setTimeout($.proxy(this.render,this),0):this.render()},render:function(){var a="",b=this.collection.at(0),c=new Date;console.log("View.RowList.render start"),this.rowRenderer.detachHandler(),this.destroyChildren(),this._createRowRenderer(),b&&"undefined"!==b.get("rowKey")&&this.collection.forEach(function(b){a+=this.rowRenderer.getHtml(b)},this),this.$el.html("").prepend(a),this.rowRenderer.attachHandler();var d=new Date;return console.log("View.RowList.addAll end",d-c),this._showLayer(),this},_showLayer:function(){this.grid.dataModel.length?this.grid.hideGridLayer():this.grid.showGridLayer("empty")}}),b.Selection=b.Base.extend({events:{},initialize:function(){b.Base.prototype.initialize.apply(this,arguments),this.setOwnProperties({range:{column:[-1,-1],row:[-1,-1]},spannedRange:{column:[-1,-1],row:[-1,-1]},lside:null,rside:null,pageX:0,pageY:0,intervalIdForAutoScroll:0,isEnable:!0,_isShown:!1}),this.listenTo(this.grid.dimensionModel,"columnWidthChanged",this._onColumnWidthChanged,this)},enable:function(){this.isEnable=!0},disable:function(){this.endSelection(),this.isEnable=!1},attachMouseEvent:function(a,b){this.isEnable&&(this.setOwnProperties({pageX:a,pageY:b}),this.grid.updateLayoutData(),$(document).on("mousemove",$.proxy(this._onMouseMove,this)),$(document).on("mouseup",$.proxy(this._onMouseUp,this)),$(document).on("selectstart",$.proxy(this._onSelectStart,this)))},detachMouseEvent:function(){clearInterval(this.intervalIdForAutoScroll),$(document).off("mousemove",$.proxy(this._onMouseMove,this)),$(document).off("mouseup",$.proxy(this._onMouseUp,this)),$(document).off("selectstart",$.proxy(this._onSelectStart,this))},_onMouseMove:function(a){var b;clearInterval(this.intervalIdForAutoScroll),this.hasSelection()?(b=this.getIndexFromMousePosition(a.pageX,a.pageY),this.updateSelection(b.row,b.column),this.grid.focusAt(b.row,b.column),this._isAutoScrollable(b.overflowX,b.overflowY)&&(this.intervalIdForAutoScroll=setInterval($.proxy(this._adjustScroll,this,b.overflowX,b.overflowY)))):this._getDistance(a)>10&&(b=this.getIndexFromMousePosition(this.pageX,this.pageY),this.startSelection(b.row,b.column))},_isAutoScrollable:function(a,b){return!(0===a&&0===b)},_adjustScroll:function(a,b){var c=this.grid.renderModel,d=c.get("scrollLeft"),e=c.get("maxScrollLeft"),f=c.get("scrollTop");0>a?c.set("scrollLeft",Math.min(Math.max(0,d-40),e)):a>0&&c.set("scrollLeft",Math.min(Math.max(0,d+40),e)),0>b?c.set("scrollTop",Math.max(0,f-40)):b>0&&c.set("scrollTop",Math.max(0,f+40))},_getDistance:function(a){var b=a.pageX,c=a.pageY,d=Math.abs(this.pageX-b),e=Math.abs(this.pageY-c);return Math.round(Math.sqrt(Math.pow(d,2)+Math.pow(e,2)))},_onMouseUp:function(){this.detachMouseEvent()},getIndexFromMousePosition:function(a,b){var c,d,e,f=this._getContainerPosition(a,b),g=this.grid.dimensionModel,h=this.grid.renderModel,i=g.getColumnWidthList(),j=h.get("scrollTop"),k=h.get("scrollLeft"),l=g.getTotalWidth(),m=f.pageY+j,n=f.pageX,o=0,p=0,q=g.get("lsideWidth")>f.pageX,r=i.length,s=0,t=this.grid.option("scrollX")?g.get("bodyHeight")-this.grid.scrollBarSize:g.get("bodyHeight"),u=this.grid.option("scrollY")?g.get("width")-this.grid.scrollBarSize:g.get("width");if(q||(n+=k),c=Math.max(0,Math.min(Math.floor(m/(g.get("rowHeight")+1)),this.grid.dataModel.length-1)),f.pageY<0?p=-1:f.pageY>t&&(p=1),f.pageX<0?o=-1:f.pageX>u&&(o=1),0>n)d=0;else if(n>l)d=r-1;else for(e=0;r>e;e++)if(s+=i[e]+1,s>=n){d=e;break}return{row:c,column:d,overflowX:o,overflowY:p}},getRange:function(){return $.extend(!0,{},this.spannedRange)},getSelectionToString:function(){var a,b,c,d,e,f=this.grid.columnModel.get("columnModelList").slice(this.spannedRange.column[0],this.spannedRange.column[1]+1),g={_button:!0},h=f.length,i=[],j=[],k=[];for(b=0;h>b;b++)i.push(f[b].columnName);for(d=this.grid.dataModel.slice(this.spannedRange.row[0],this.spannedRange.row[1]+1),h=d.length,a=i.length,b=0;h>b;b++){for(j=[],c=0;a>c;c++)g[i[c]]||j.push(d[b].getVisibleText(i[c]));k.push(j.join("	"))}return e=k.join("\n")},createLayer:function(a){var c="R"===a?b.Selection.Layer.Rside:b.Selection.Layer.Lside,d=this._getLayer(a);return d&&d.destroy?d.destroy():null,d=this.createView(c,{grid:this.grid,columnWidthList:this.grid.dimensionModel.getColumnWidthList(a)}),"R"===a?this.rside=d:this.lside=d,d},selectAll:function(){this.startSelection(0,0),this.updateSelection(this.grid.dataModel.length-1,this.grid.columnModel.getVisibleColumnModelList().length-1)},startSelection:function(a,b){this.range.row[0]=this.range.row[1]=a,this.range.column[0]=this.range.column[1]=b,this.show()},updateSelection:function(a,b){this.range.row[1]=a,this.range.column[1]=b,this.show()},endSelection:function(){this.range.row[0]=this.range.row[1]=this.range.column[0]=this.range.column[1]=-1,this.spannedRange.row[0]=this.spannedRange.row[1]=this.spannedRange.column[0]=this.spannedRange.column[1]=-1,this.hide(),this.detachMouseEvent()},_onColumnWidthChanged:function(){this.show()},show:function(){if(this.hasSelection()){this._isShown=!0;var a,b=this.grid.columnModel.get("columnFixIndex"),c=(this.grid.dimensionModel.get("rowHeight"),Math.min.apply(Math,this.range.row)),d=Math.max.apply(Math,this.range.row),e=Math.min.apply(Math,this.range.column),f=Math.max.apply(Math,this.range.column),g={row:[c,d],column:[e,f]};if(!this.grid.isSorted()){a=$.extend([],g.row);do a=$.extend([],g.row),g=this._getRowSpannedIndex(g);while(g.row[0]!==a[0]||g.row[1]!==a[1])}this.spannedRange=g,this.lside.show(g),this.rside.show({row:g.row,column:[Math.max(-1,g.column[0]-b),Math.max(-1,g.column[1]-b)]}),this.grid.focusClipboard()}},hide:function(){this._isShown=!1,this.lside.hide(),this.rside.hide()},isShown:function(){return this._isShown},_getLayer:function(a){return"R"===a?this.rside:this.lside},_getContainerPosition:function(a,b){var c=this.grid.dimensionModel,d=a-c.get("offsetLeft"),e=b-(c.get("offsetTop")+c.get("headerHeight")+2);return{pageX:d,pageY:e}},_onSelectStart:function(a){a.preventDefault()},hasSelection:function(){return!(-1===this.range.row[0])},_getRowSpannedIndex:function(a){function b(a){var b,c=a.startIndex,d=a.endIndex,e=a.startRowSpanDataMap&&a.startRowSpanDataMap[l],f=a.startIndexList,g=a.endIndexList;e&&(e.isMainRow?(b=c+e.count-1,b>d&&g.push(b)):(b=c+e.count,f.push(b)))}function c(a){var b,c,d=a.endIndex,e=a.columnName,f=a.endRowSpanDataMap&&a.endRowSpanDataMap[e],g=a.endIndexList,h=a.dataModel;f&&(f.isMainRow?(b=d+f.count-1,g.push(b)):(b=d+f.count,c=h.at(b).getRowSpanData(e),b+=c.count-1,b>d&&g.push(b)))}var d=this.grid.columnModel.get("columnModelList").slice(a.column[0],a.column[1]+1),e=this.grid.dataModel,f=d.length,g=[a.row[0]],h=[a.row[1]],i=e.at(a.row[0]),j=e.at(a.row[1]),k=$.extend({},a);if(i&&j){for(var l,m,n=e.at(a.row[0]).getRowSpanData(),o=e.at(a.row[1]).getRowSpanData(),p=0;f>p;p++)l=d[p].columnName,m={columnName:l,startIndex:a.row[0],endIndex:a.row[1],endRowSpanDataMap:o,startRowSpanDataMap:n,startIndexList:g,endIndexList:h,dataModel:e},b(m),c(m);k.row=[Math.min.apply(Math,g),Math.max.apply(Math,h)]}return k}}),b.Selection.Layer=b.Base.extend({tagName:"div",className:"selection_layer",initialize:function(a){b.Base.prototype.initialize.apply(this,arguments),this.listenTo(this.grid.renderModel,"change:scrollTop",this._onScrollTopChange,this),this.listenTo(this.grid.renderModel,"beforeRefresh",this._onBeforeRefresh,this),this.listenTo(this.grid.dimensionModel,"columnWidthChanged",this._updateColumnWidthList,this),this.setOwnProperties({columnWidthList:a.columnWidthList,spannedRange:{row:[-1,-1],column:[-1,-1]},whichSide:"R"})},_updateColumnWidthList:function(){this.columnWidthList=this.grid.dimensionModel.getColumnWidthList(this.whichSide)},_onScrollTopChange:function(){},_onBeforeRefresh:function(){},_getGeometryStyles:function(a){a=a||this.indexObj;var b,c,d=this.columnWidthList,e=a.row,f=a.column,h=this.grid.dimensionModel.get("rowHeight"),i=g.getTBodyHeight(e[0],h)+1,j=g.getTBodyHeight(e[1]-e[0]+1,h)-3,k=d.length,l="block",m=0,n=0;for(c=0;c<f[1]+1&&k>c;c++)c<f[0]?m+=d[c]+1:n+=d[c]+1;return n-=1,(0>=n||0>=j)&&(l="none"),b={display:l,width:n+"px",height:j+"px",top:i+"px",left:m+"px"}},show:function(a){this.indexObj=a,this.$el.css(this._getGeometryStyles(a))},hide:function(){this.$el.css({display:"none",width:"0px",height:"0px",top:0,left:0})},render:function(){return this}}),b.Selection.Layer.Lside=b.Selection.Layer.extend({initialize:function(){b.Selection.Layer.prototype.initialize.apply(this,arguments),this.setOwnProperties({whichSide:"L"})}}),b.Selection.Layer.Rside=b.Selection.Layer.extend({initialize:function(){b.Selection.Layer.prototype.initialize.apply(this,arguments),this.setOwnProperties({whichSide:"R"})}}),f.Net=b.Base.extend({events:{submit:"_onSubmit"},initialize:function(a){b.Base.prototype.initialize.apply(this,arguments);var c={initialRequest:!0,api:{read:"http://fetech.nhnent.com/svnrun/fetech/shopping/demo/php/api/dummy_request.php",update:"","delete":"",modify:"",download:"",downloadAll:""},perPage:500,enableAjaxHistory:!0},d=$.extend(!0,c,a),e=this.grid.getPaginationInstance();this.setOwnProperties({curPage:1,perPage:d.perPage,options:d,router:null,pagination:e,requestedFormData:null,isLocked:!1}),this._initializeDataModelNetwork(),this._initializeRouter(),this._initializePagination()},_initializePagination:function(){var a=this.pagination;a&&(a._setOption("itemPerPage",this.perPage),a._setOption("itemCount",1),a.attach("beforeMove",$.proxy(this._onPageBeforeMove,this)))},_initializeDataModelNetwork:function(){this.grid.dataModel.url=this.options.api.read,this.grid.dataModel.sync=$.proxy(this._sync,this)},_initializeRouter:function(){this.options.enableAjaxHistory&&(this.router=new f.Net.Router({grid:this.grid,net:this}),Backbone.history.start())},_onPageBeforeMove:function(a){var b=a.page;this.curPage!==b&&this.readDataAt(b,!0)},_onSubmit:function(a){a.preventDefault(),this.readDataAt(1,!1)},setFormData:function(a){g.setFormData(this.$el,a)},_sync:function(a,b,c){var d;"read"===a?(c=c||{},d=$.extend({},c),c.url||(d.url=_.result(b,"url")),this._ajax(d)):Backbone.sync.call(Backbone,a,b,c)},lock:function(){this.grid.showGridLayer("loading"),this.isLocked=!0},unlock:function(){this.isLocked=!1},_getFormData:function(){return g.getFormData(this.$el)},_onReadSuccess:function(a,b){var c,d,e=this.pagination;e&&b.pagination&&(c=b.pagination.page,d=b.pagination.totalCount,e._setOption("itemPerPage",this.perPage),e._setOption("itemCount",d),e.movePageTo(c),this.curPage=c)},_onReadError:function(){},readData:function(a){var b=1,c=this.grid;this.isLocked||(c.renderModel.initializeVariables(),this.lock(),this.requestedFormData=_.clone(a),this.curPage=a.page||this.curPage,b=(this.curPage-1)*this.perPage+1,c.renderModel.set({startNumber:b}),a.columnModel=JSON.stringify(this.grid.columnModel.get("columnModelList")),c.dataModel.fetch({requestType:"read",data:a,type:"POST",success:$.proxy(this._onReadSuccess,this),error:$.proxy(this._onReadError,this),reset:!0}))},readDataAt:function(a,b){b=void 0===b?!0:b;var c=b?this.requestedFormData:this._getFormData();c.page=a,c.perPage=this.perPage,this.router&&this.router.navigate("read/"+g.toQueryString(c),{trigger:!1}),this.readData(c)},updateData:function(){},deleteData:function(){},modifyData:function(){},downloadData:function(){},downloadAllData:function(){},_ajax:function(a){var b=this.grid;b.trigger("beforeRequest",a.data),a=$.extend({requestType:""},a);var c={url:a.url,data:a.data||{},type:a.type||"POST",dataType:a.dataType||"json",complete:$.proxy(this._onComplete,this,a.complete,a),success:$.proxy(this._onSuccess,this,a.success,a),error:$.proxy(this._onError,this,a.error,a)};$.ajax(c)},_onComplete:function(){this.unlock()},_onSuccess:function(a,b,c,d,e){var f=c&&c.message,g=this.createEventData({httpStatus:d,requestType:b.requestType,requestParameter:b.data,responseData:c});if(this.grid.trigger("onResponse",g),!g.isStopped())if(c&&c.result){if(this.grid.trigger("onSuccessResponse",g),g.isStopped())return;a&&"function"==typeof a?a(c.data||{},d,e):null}else{if(this.grid.trigger("onFailResponse",g),g.isStopped())return;f?alert(f):null}},_onError:function(a,b,c,d){var e=this.createEventData({httpStatus:d,requestType:b.requestType,requestParameter:b.data,responseData:null});this.grid.showGridLayer("empty"),this.grid.trigger("onResponse",e),e.isStopped()||(this.grid.trigger("onErrorResponse",e),e.isStopped()||c.readyState>1&&alert("데이터 요청 중에 에러가 발생하였습니다.\n\n다시 시도하여 주시기 바랍니다."))}}),f.Net.Router=Backbone.Router.extend({routes:{"read/:queryStr":"read"},initialize:function(a){this.setOwnProperties({grid:a&&a.grid||null,net:a&&a.net||null})},read:function(a){var b=g.toQueryObject(a);this.net.setFormData(b),this.net.readData(b)},setOwnProperties:function(a){_.each(a,function(a,b){this[b]=a},this)}});var h=b.Base.extend({scrollBarSize:17,minimumHeight:150,lside:null,rside:null,toolbar:null,cellFactory:null,events:{click:"_onClick",mousedown:"_onMouseDown"},keyMap:{TAB:9,ENTER:13,CTRL:17,ESC:27,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,CHAR_A:65,CHAR_C:67,CHAR_F:70,CHAR_R:82,CHAR_V:86,LEFT_WINDOW_KEY:91,F5:116,BACKSPACE:8,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,DEL:46,UNDEFINED:229},keyName:{9:"TAB",13:"ENTER",17:"CTRL",27:"ESC",37:"LEFT_ARROW",38:"UP_ARROW",39:"RIGHT_ARROW",40:"DOWN_ARROW",65:"CHAR_A",67:"CHAR_C",70:"CHAR_F",82:"CHAR_R",86:"CHAR_V",91:"LEFT_WINDOW_KEY",116:"F5",8:"BACKSPACE",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",36:"HOME",35:"END",46:"DEL",229:"UNDEFINED"},initialize:function(a){b.Base.prototype.initialize.apply(this,arguments);var c=g.getUniqueKey();this.__instance[c]=this,console.log(a);var d={form:null,debug:!1,columnFixIndex:0,columnModelList:[],keyColumnName:null,selectType:"",autoNumbering:!0,headerHeight:35,rowHeight:27,displayRowCount:10,minimumColumnWidth:50,notUseSmartRendering:!1,columnMerge:[],minimumWidth:300,scrollX:!0,scrollY:!0,useDataCopy:!0,toolbar:{hasResizeHandler:!0,hasControlPanel:!0,hasPagination:!0}};a=$.extend(!0,d,a),this.setOwnProperties({cellFactory:null,selection:null,columnModel:null,dataModel:null,renderModel:null,layoutModel:null,focusModel:null,addOn:{},view:{lside:null,rside:null,toolbar:null,clipboard:null,layer:{ready:null,loading:null,empty:null}},id:c,options:a,timeoutIdForResize:0,timeoutIdForSetRowList:0,__$el:this.$el.clone()}),this._initializeModel(),this._initializeListener(),this._initializeView(),this._initializeScrollBar(),this._attachExtraEvent(),this.render(),this.updateLayoutData()},getValue:function(){},getColumnValue:function(){},getRow:function(a,b){var c=this.grid.dataModel.get(a).toJSON();return c=b?$.toJSON(c):c},getRowAt:function(a){return this.grid.dataModel.at(a).toJSON()},getRowCount:function(){return this.grid.dataModel.length},getRowSpan:function(){},getSelectedRowKey:function(){return this.grid.focusModel.which().rowKey},getElement:function(a,b){var c=this.columnModel.isLside(b)?this.view.lside.$el:this.view.rside.$el;return c.find('tr[key="'+a+'"]').find('td[columnname="'+b+'"]')},setValue:function(a,b,c,d){c="string"==typeof c?$.trim(c):c,this.dataModel.setValue(a,b,c,d)},setColumnValue:function(a,b,c){b="string"==typeof b?$.trim(b):b,this.dataModel.setColumnValue(a,b,c)},setRowList:function(a,b){this.showGridLayer("loading"),b=void 0===b?!0:b,clearTimeout(this.timeoutIdForSetRowList),this.timeoutIdForSetRowList=setTimeout($.proxy(function(){this.dataModel.set(a,{parse:b})},this),0)},focus:function(a,b,c){this.focusModel.focus(a,b,c)},focusIn:function(a,b,c){var d;this.focus(a,b,c),a=this.getMainRowKey(a,b),this.isEditable(a,b)?(d=this.cellFactory.getInstance(this.columnModel.getEditType(b)),d.focusIn(this.getElement(a,b))):this.focusClipboard()},focusAt:function(a,b,c){var d=this.dataModel.at(a),e=this.columnModel.at(b);d&&e&&this.focus(d.get("rowKey"),e.columnName,c)},focusInAt:function(a,b,c){var d=this.dataModel.at(a),e=this.columnModel.at(b);d&&e&&this.focusIn(d.get("rowKey"),e.columnName,c)},blur:function(){this.focusModel.blur()},checkAll:function(){this.dataModel.setColumnValue("_button",!0)},check:function(a){this.setValue(a,"_button",!0)},uncheckAll:function(){this.dataModel.setColumnValue("_button",!1)},uncheck:function(a){this.setValue(a,"_button",!1)},checkRowState:function(){},clear:function(){this.setRowList([])},removeRow:function(){},enable:function(){},disable:function(){},enableRow:function(a){this.grid.dataModel.setRowState(a,"")},disableRow:function(a){this.grid.dataModel.setRowState(a,"DISABLED")},enableCheck:function(a){this.grid.dataModel.setRowState(a,"")},disableCheck:function(a){this.grid.dataModel.setRowState(a,"DISABLED_CHECK")},filterData:function(){},getCheckedRowKeyList:function(){var a=[];return _.each(this.dataModel.where({_button:!0}),function(b){a.push(b.get("rowKey"))},this),a},getCheckedRowList:function(){return this.dataModel.where({_button:!0})},getColumnModel:function(){return this.grid.columnModel.get("columnModelList")},getDisabledRowKeyList:function(){},getModifiedRowList:function(){return this.dataModel.getModifiedRowList()},appendRow:function(a){this.dataModel.append(a)},prependRow:function(a){this.dataModel.prepend(a)},setColumnFixIndex:function(a){this.option({columnFixIndex:a}),this.columnModel.set({columnFixIndex:a})},isChanged:function(){},restore:function(){var a=this.grid.dataModel.getOriginalRowList();this.grid.setRowList(a,!1)},refreshLayout:function(){},addClassNameToColumn:function(){},addClassNameToRow:function(){},removeClassNameFromColumn:function(){},removeClassNameFromRow:function(){},replaceRowList:function(){},select:function(){},setGridSize:function(a){var b=this.grid.dimensionModel,c=(a&&a.width||b.get("width"),b.get("bodyHeight")),d=b.get("headerHeight"),e=b.get("toolbarHeight");a&&a.height&&(c=height-(d+e))},setHeaderColumnTitle:function(){},setScrollBarPosition:function(){},hideGridLayer:function(){_.each(this.view.layer,function(a){a.hide()},this)},showGridLayer:function(a){this.hideGridLayer(),this.view.layer[a]?this.view.layer[a].show():null},getPaginationInstance:function(){var a=this.view.toolbar.pagination;return a?a.instance:void 0},use:function(a,b){return b=$.extend({grid:this},b),f[a]&&(this.addOn[a]=new f[a](b)),this},_attachExtraEvent:function(){$(window).on("resize",$.proxy(this._onWindowResize,this))},_onWindowResize:function(){var a=Math.max(this.option("minimumWidth"),this.$el.css("width","100%").width());this.dimensionModel.set("width",a)},_initializeListener:function(){this.listenTo(this.dimensionModel,"change:width",this._onWidthChange),this.listenTo(this.dimensionModel,"change:bodyHeight",this._setHeight)},updateLayoutData:function(){var a=this.$el.offset(),b=this.dimensionModel.getTotalWidth("R"),c=b-this.dimensionModel.get("rsideWidth");
this.renderModel.set({maxScrollLeft:c}),this.dimensionModel.set({offsetTop:a.top,offsetLeft:a.left,width:this.$el.width(),height:this.$el.height(),toolbarHeight:this.view.toolbar.$el.height()})},_onWidthChange:function(){this.updateLayoutData()},option:function(a,b){return void 0===b?this.options[a]:(this.options[a]=b,this)},_onClick:function(a){var b=$(a.target);!(b.is("input")||b.is("a")||b.is("button")||b.is("select")||b.is("label"))},_onMouseDown:function(a){var b=$(a.target);b.is("input")||b.is("a")||b.is("button")||b.is("select")||(a.preventDefault(),this.focusClipboard(),this.selection.show())},focusClipboard:function(){this.view.clipboard.$el.focus()},_initializeModel:function(){var a=this.$el.offset();this.columnModel=new d.ColumnModel({grid:this,keyColumnName:this.option("keyColumnName"),columnFixIndex:this.option("columnFixIndex")}),this.setColumnModelList(this.option("columnModelList")),this.dimensionModel=new c.Dimension({grid:this,offsetTop:a.top,offsetLeft:a.left,width:this.$el.width(),height:this.$el.height(),headerHeight:this.option("headerHeight"),rowHeight:this.option("rowHeight")}),this.focusModel=new c.Focus({grid:this}),this.dataModel=new d.RowList({grid:this}),this.dataModel.reset([]),this.renderModel=this.option("notUseSmartRendering")===!0?new c.Renderer({grid:this}):new c.Renderer.Smart({grid:this}),this.cellFactory=this.createView(b.CellFactory,{grid:this})},_initializeView:function(){this.cellFactory=this.createView(b.CellFactory,{grid:this}),this.selection=this.createView(b.Selection,{grid:this}),this.view.lside=this.createView(b.Layout.Frame.Lside,{grid:this}),this.view.rside=this.createView(b.Layout.Frame.Rside,{grid:this}),this.view.toolbar=this.createView(b.Layout.Toolbar,{grid:this}),this.view.layer.ready=this.createView(b.Layer.Ready,{grid:this}),this.view.layer.empty=this.createView(b.Layer.Empty,{grid:this}),this.view.layer.loading=this.createView(b.Layer.Loading,{grid:this}),this.view.clipboard=this.createView(b.Clipboard,{grid:this})},_initializeScrollBar:function(){},render:function(){var a=$("<div>").addClass("left_line"),b=$("<div>").addClass("right_line");this.$el.addClass("grid_wrapper").addClass("uio_grid").attr("instanceId",this.id).append(this.view.layer.empty.render().el).append(this.view.layer.loading.render().el).append(this.view.layer.ready.render().el),this.view.layer.loading.show("초기화 중입니다."),this.$el.append(this.view.lside.render().el).append(this.view.rside.render().el).append(this.view.toolbar.render().el).append(a).append(b).append(this.view.clipboard.render().el),this._setHeight()},_setHeight:function(){var a=this.dimensionModel.get("bodyHeight"),b=this.dimensionModel.get("headerHeight"),c=this.view.toolbar.$el.height(),d=c+b+a;this.$el.css("height",d+"px"),this.dimensionModel.set({toolbarHeight:c})},isSorted:function(){return this.dataModel.isSortedByField()},isEditable:function(a,b){var c=this.focusModel.which(),d=["_number","normal"];a=void 0!==a?a:c.rowKey,b=void 0!==b?b:c.columnName;var e,f,g=this.columnModel,h=this.dataModel,i=g.getEditType(b);return-1!==$.inArray(i,d)?!1:(e=h.get(a),f=e.getRelationResult()[b],!(f&&(f.isDisabled||f.isEditable===!1)))},setColumnModelList:function(a){this.columnModel.set("columnModelList",a)},sort:function(a){this.dataModel.sortByField(a)},getRowList:function(){return this.dataModel.toJSON()},getMainRowKey:function(a,b){var c=this.dataModel.get(a);return this.isSorted()||(a=c?c.getRowSpanData(b).mainRowKey:a),a},del:function(a,b,c){a=this.getMainRowKey(a,b);var d=this.columnModel.getEditType(b),e=this.dataModel.get(a).getRowState().isDisabledCheck,f=["text","text-convertible"],g=-1!==$.inArray(d,f),h=this.option("selectType");g&&this.isEditable(a,b)&&(this.setValue(a,b,"",c),c&&"checkbox"===h&&!e&&this.setValue(a,"_button",!0,c))},_getDataCollection:function(a){return this.renderModel.get(a)},destroy:function(){this.stopListening(),this.destroyChildren(),this.$el.replaceWith(this.__$el);for(var a in this)this[a]=null,delete this[a]}});h.prototype.__instance=h.prototype.__instance||{};var a=window.ne=a||{};a.Grid=b.Base.extend({initialize:function(a){this.grid=new h(a),this.listenTo(this.grid,"all",this._relayEvent,this)},_relayEvent:function(){this.trigger.apply(this,arguments)},get:function(){},getColumn:function(){},getRow:function(a,b){var c=this.grid.dataModel.get(a).toJSON(),d=b?$.toJSON(c):c;return d},getRowAt:function(a){return this.grid.dataModel.at(a).toJSON()},getRowCount:function(){return this.grid.dataModel.length},getRowSpan:function(){},getSelectedRowKey:function(){return this.grid.focusModel.which().rowKey},getElement:function(a,b){return this.grid.getElement(a,b)},set:function(){},setColumn:function(){},setRowList:function(a){this.grid.setRowList(a)},focus:function(a,b,c){this.grid.focus(a,b,c)},focusIn:function(a,b,c){this.grid.focusIn(a,b,c)},blur:function(){this.grid.blur()},checkAll:function(){this.grid.checkAll()},check:function(a){this.grid.check(a)},uncheckAll:function(){},uncheck:function(){},checkRowState:function(){},clear:function(){},removeRow:function(){},enable:function(){},disable:function(){},enableRow:function(a){this.grid.dataModel.setRowState(a,"")},disableRow:function(a){this.grid.dataModel.setRowState(a,"DISABLED")},enableCheck:function(a){this.grid.dataModel.setRowState(a,"")},disableCheck:function(a){this.grid.dataModel.setRowState(a,"DISABLED_CHECK")},filterData:function(){},getCheckedRowKeyList:function(a){var b=this.grid.getCheckedRowKeyList();return a?$.toJSON(b):b},getCheckedRowList:function(a){var b=this.grid.getCheckedRowList();return a?$.toJSON(b):b},getColumnModel:function(){return this.grid.columnModel.get("columnModelList")},getDisabledRowKeyList:function(){},getModifiedRowList:function(){return this.grid.getModifiedRowList()},appendRow:function(a){this.grid.appendRow(a)},prependRow:function(a){this.grid.prependRow(a)},isChanged:function(){},restore:function(){var a=this.grid.dataModel.getOriginalRowList();this.grid.setRowList(a,!1)},refreshLayout:function(){},addClassNameToColumn:function(){},addClassNameToRow:function(){},removeClassNameFromColumn:function(){},removeClassNameFromRow:function(){},replaceRowList:function(){},select:function(){},setColumnFixIndex:function(a){this.grid.setColumnFixIndex(a)},setGridSize:function(a){var b=this.grid.dimensionModel,c=(a&&a.width||b.get("width"),b.get("bodyHeight")),d=b.get("headerHeight"),e=b.get("toolbarHeight");a&&a.height&&(c=height-(d+e))},setHeaderColumnTitle:function(){},setScrollBarPosition:function(){},use:function(a,b){return this.grid.use(a,b),this}}),a.Grid.getInstanceById=function(a){return h.prototype.__instance[a]}}();