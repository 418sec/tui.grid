/**
 * @fileoverview tui-grid
 * @author NHN Ent. FE Development Team
 * @version 1.1.1
 * @license MIT
 * @link https://github.com/nhnent/tui.grid
 */
!function t(e,i,n){function o(a,l){if(!i[a]){if(!e[a]){var r="function"==typeof require&&require;if(!l&&r)return r(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[a]={exports:{}};e[a][0].call(d.exports,function(t){var i=e[a][1][t];return o(i?i:t)},d,d.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,i){"use strict";var n=(t("../base/common"),t("../common/util"),Backbone.Router.extend({initialize:function(t){this.net=t.net},routes:{"read/:queryStr":"read"},read:function(t){}}));e.exports=n},{"../base/common":4,"../common/util":10}],2:[function(t,e,i){"use strict";var n=t("../base/view"),o=t("./net-router"),s=t("../common/util"),a=t("../common/formUtil"),l=t("../common/constMap").renderState,r=n.extend({tagName:"form",events:{submit:"_onSubmit"},initialize:function(t){var e,t;e={initialRequest:!0,api:{readData:"",createData:"",updateData:"",deleteData:"",modifyData:"",downloadExcel:"",downloadExcelAll:""},perPage:500,enableAjaxHistory:!0},t=$.extend(!0,e,t),this.setOwnProperties({dataModel:t.dataModel,toolbarModel:t.toolbarModel,renderModel:t.renderModel,router:null,pagination:t.toolbarModel.get("pagination"),api:t.api,enableAjaxHistory:t.enableAjaxHistory,perPage:t.perPage,curPage:1,requestedFormData:null,isLocked:!1,lastRequestedReadData:null}),this._initializeDataModelNetwork(),this._initializeRouter(),this._initializePagination(),this._showToolbarExcelBtns(),this.listenTo(this.dataModel,"sortChanged",this._onSortChanged,this),t.initialRequest&&(this.lastRequestedReadData||this._readDataAt(1,!1))},_initializePagination:function(){var t=this.pagination;t&&(t.setOption("itemPerPage",this.perPage),t.setOption("itemCount",1),t.on("beforeMove",$.proxy(this._onPageBeforeMove,this)))},_onRouterRead:function(t){var e=s.toQueryObject(t);this._requestReadData(e)},_initializeDataModelNetwork:function(){this.dataModel.url=this.api.readData,this.dataModel.sync=$.proxy(this._sync,this)},_initializeRouter:function(){this.enableAjaxHistory&&(this.router=new o({net:this}),this.listenTo(this.router,"route:read",this._onRouterRead),Backbone.History.started||Backbone.history.start())},_showToolbarExcelBtns:function(){var t=this.toolbarModel,e=this.api;t&&(e.downloadExcel&&t.set("isExcelButtonVisible",!0),e.downloadExcelAll&&t.set("isExcelAllButtonVisible",!0))},_onPageBeforeMove:function(t){var e=t.page;this.curPage!==e&&this._readDataAt(e,!0)},_onSubmit:function(t){t.preventDefault(),this._readDataAt(1,!1)},_setFormData:function(t){var e=_.clone(t);_.each(this.lastRequestedReadData,function(t,i){(_.isUndefined(e[i])||_.isNull(e[i]))&&t&&(e[i]="")}),a.setFormData(this.$el,e)},_sync:function(t,e,i){var n;"read"===t?(i=i||{},n=$.extend({},i),i.url||(n.url=_.result(e,"url")),this._ajax(n)):Backbone.sync.call(Backbone,t,e,i)},_lock:function(){this.renderModel.set("state",l.LOADING),this.isLocked=!0},_unlock:function(){this.isLocked=!1},_getFormData:function(){return a.getFormData(this.$el)},_onReadSuccess:function(t,e){var i,n,o=this.pagination;t.setOriginalRowList(),o&&e.pagination&&(i=e.pagination.page,n=e.pagination.totalCount,o.setOption("itemPerPage",this.perPage),o.setOption("itemCount",n),o.movePageTo(i),this.curPage=i)},_onReadError:function(t,e,i){},reloadData:function(){this._requestReadData(this.lastRequestedReadData)},readData:function(t,e,i){i?(e||(e={}),e.perPage=this.perPage,this._changeSortOptions(e,this.dataModel.sortOptions)):e=_.assign({},this.lastRequestedReadData,e),e.page=t,this._requestReadData(e)},_requestReadData:function(t){var e=1;this._setFormData(t),this.isLocked||(this.renderModel.initializeVariables(),this._lock(),this.requestedFormData=_.clone(t),this.curPage=t.page||this.curPage,e=(this.curPage-1)*this.perPage+1,this.renderModel.set({startNumber:e}),this.lastRequestedReadData=_.clone(t),this.dataModel.fetch({requestType:"readData",data:t,type:"POST",success:$.proxy(this._onReadSuccess,this),error:$.proxy(this._onReadError,this),reset:!0}),this.dataModel.setSortOptionValues(t.sortColumn,t.sortAscending)),this.router&&this.router.navigate("read/"+s.toQueryString(t),{trigger:!1})},_onSortChanged:function(t){t.isRequireFetch&&this._readDataAt(1,!0,t)},_changeSortOptions:function(t,e){e&&("rowKey"===e.columnName?(delete t.sortColumn,delete t.sortAscending):(t.sortColumn=e.columnName,t.sortAscending=e.isAscending))},_readDataAt:function(t,e,i){var n;e=void 0===e?!0:e,n=e?this.requestedFormData:this._getFormData(),n.page=t,n.perPage=this.perPage,this._changeSortOptions(n,i),this._requestReadData(n)},request:function(t,e){var i={url:this.api[t],type:null,hasDataParam:!0,isOnlyChecked:!0,isOnlyModified:!0,isSkipConfirm:!1},n=$.extend(i,e),o=this._getRequestParam(t,n);o&&this._ajax(o)},download:function(t){var e,i="download"+s.toUpperCaseFirstLetter(t),n=this.requestedFormData,o=this.api[i];"excel"===t?(n.page=this.curPage,n.perPage=this.perPage):n=_.omit(n,"page","perPage"),e=$.param(n),window.location=o+"?"+e},setPerPage:function(t){this.perPage=t,this._readDataAt(1)},_getDataParam:function(t,e){var i,n=this.dataModel,o={createData:["createList"],updateData:["updateList"],deleteData:["deleteList"],modifyData:["createList","updateList","deleteList"]},s=o[t],a={},l=0;return e=_.defaults(e||{},{hasDataParam:!0,isOnlyModified:!0,isOnlyChecked:!0}),e.hasDataParam&&(e.isOnlyModified?(i=n.getModifiedRowList({isOnlyChecked:e.isOnlyChecked}),_.each(i,function(t,e){_.contains(s,e)&&t.length&&(l+=t.length,a[e]=$.toJSON(t))},this)):(a.rowList=n.getRowList(e.isOnlyChecked),l=a.rowList.length)),{data:a,count:l}},_getRequestParam:function(t,e){var i,n={url:this.api[t],type:null,hasDataParam:!0,isOnlyModified:!0,isOnlyChecked:!0},o=$.extend(n,e),s=this._getDataParam(t,o);return o.isSkipConfirm||this._isConfirmed(t,s.count)?i={requestType:t,url:o.url,data:s.data,type:o.type}:void 0},_isConfirmed:function(t,e){var i=!1;return e>0?i=confirm(this._getConfirmMessage(t,e)):alert(this._getConfirmMessage(t,e)),i},_getConfirmMessage:function(t,e){var i,n={createData:"입력",updateData:"수정",deleteData:"삭제",modifyData:"반영"},o=n[t];return i=e>0?e+"건의 데이터를 "+o+"하시겠습니까?":o+"할 데이터가 없습니다."},_ajax:function(t){var e,i=this.createEventData(t.data);this.trigger("beforeRequest",i),i.isStopped()||(t=$.extend({requestType:""},t),e={url:t.url,data:t.data||{},type:t.type||"POST",dataType:t.dataType||"json",complete:$.proxy(this._onComplete,this,t.complete,t),success:$.proxy(this._onSuccess,this,t.success,t),error:$.proxy(this._onError,this,t.error,t)},t.url&&$.ajax(e))},_onComplete:function(t,e,i){this._unlock()},_onSuccess:function(t,e,i,n,o){var s=i&&i.message,a=this.createEventData({httpStatus:n,requestType:e.requestType,requestParameter:e.data,responseData:i});if(this.trigger("response",a),!a.isStopped())if(i&&i.result){if(this.trigger("successResponse",a),a.isStopped())return;_.isFunction(t)&&t(i.data||{},n,o)}else{if(this.trigger("failResponse",a),a.isStopped())return;s&&alert(s)}},_onError:function(t,e,i,n){var o=this.createEventData({httpStatus:n,requestType:e.requestType,requestParameter:e.data,responseData:null});this.renderModel.set("state",l.DONE),this.trigger("response",o),o.isStopped()||(this.trigger("errorResponse",o),o.isStopped()||i.readyState>1&&alert("데이터 요청 중에 에러가 발생하였습니다.\n\n다시 시도하여 주시기 바랍니다."))}});e.exports=r},{"../base/view":7,"../common/constMap":8,"../common/formUtil":9,"../common/util":10,"./net-router":1}],3:[function(t,e,i){"use strict";var n=t("./common"),o=Backbone.Collection.extend({initialize:function(t,e){},clear:function(){return this.each(function(t){t.stopListening(),t=null}),this.reset([],{silent:!0}),this}});_.assign(o.prototype,n),e.exports=o},{"./common":4}],4:[function(t,e,i){"use strict";var n={setOwnProperties:function(t){_.each(t,function(t,e){this[e]=t},this)}};e.exports=n},{}],5:[function(t,e,i){"use strict";var n=t("./common"),o=Backbone.Model.extend({initialize:function(t){}});_.assign(o.prototype,n),e.exports=o},{"./common":4}],6:[function(t,e,i){"use strict";var n=t("./common"),o=tui.util.defineClass({init:function(t){var e=t&&t.grid||this.collection&&this.collection.grid||null;this.setOwnProperties({grid:e}),this.initializeEventHandler()},eventHandler:{},initializeEventHandler:function(){var t={};_.each(this.eventHandler,function(e,i){var n=i.split(" "),o=n[0],s=n[1]||"";t[o]={selector:s,handler:$.proxy(this[e],this)}},this),this.setOwnProperties({_eventHandler:t})},getEventHandlerInfo:function(){return this._eventHandler},getHtml:function(){throw this.error("implement getHtml() method")}});_.assign(o.prototype,n),e.exports=o},{"./common":4}],7:[function(t,e,i){"use strict";var n=t("./common"),o=Backbone.View.extend({initialize:function(t){this._children=[]},error:function(t){var e=function(){this.name="Grid Exception",this.message=t||"error"};return e.prototype=new Error,new e},_addChildren:function(t){_.isArray(t)||(t=[t]),_.each(t,function(t){this._children.push(t)},this)},_renderChildren:function(){var t=[];return _.each(this._children,function(e){t.push(e.render().el)}),t},destroy:function(){this.stopListening(),this._destroyChildren(),this.remove()},createEventData:function(t){var e=$.extend({},t);return e.stop=function(){this._isStopped=!0},e.isStopped=function(){return this._isStopped},e._isStopped=e._isStopped||!1,e},_destroyChildren:function(){if(_.isArray(this._children))for(;this._children.length>0;)this._children.pop().destroy()}});_.assign(o.prototype,n),e.exports=o},{"./common":4}],8:[function(t,e,i){"use strict";var n={TAB:9,ENTER:13,CTRL:17,ESC:27,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,CHAR_A:65,CHAR_C:67,CHAR_F:70,CHAR_R:82,CHAR_V:86,LEFT_WINDOW_KEY:91,F5:116,BACKSPACE:8,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,DEL:46,UNDEFINED:229};e.exports={keyCode:n,keyName:_.invert(n),renderState:{LOADING:"LOADING",DONE:"DONE",EMPTY:"EMPTY"}}},{}],9:[function(t,e,i){"use strict";var n={setInput:{_changeToStringInArray:function(t){return _.each(t,function(e,i){t[i]=String(e)}),t},radio:function(t,e){t.checked=t.value===e},checkbox:function(t,e){_.isArray(e)?t.checked=-1!==$.inArray(t.value,this._changeToStringInArray(e)):t.checked=t.value===e},"select-one":function(t,e){var i=tui.util.toArray(t.options);tui.util.forEach(i,function(i,n){return i.value===e||i.text===e?(t.selectedIndex=n,!1):void 0})},"select-multiple":function(t,e){var i=tui.util.toArray(t.options);_.isArray(e)?(e=this._changeToStringInArray(e),_.each(i,function(t){t.selected=-1!==$.inArray(t.value,e)||-1!==$.inArray(t.text,e)})):this["select-one"].apply(this,arguments)},defaultAction:function(t,e){t.value=e}},getFormData:function(t){var e={},i=t.serializeArray(),n=tui.util.isExisty;return _.each(i,function(t){var i=t.value||"",o=t.name;n(e[o])?e[o]=[].concat(e[o],i):e[o]=i}),e},getFormElement:function(t,e){var i;return t&&t.length&&(i=e?t.prop("elements")[e+""]:t.prop("elements")),$(i)},setFormData:function(t,e){_.each(e,function(e,i){this.setFormElementValue(t,i,e)},this)},setFormElementValue:function(t,e,i){var n,o=this.getFormElement(t,e);o.length&&(_.isArray(i)||(i=String(i)),o=tui.util.isHTMLTag(o)?[o]:o,o=tui.util.toArray(o),_.each(o,function(t){n=this.setInput[t.type]?t.type:"defaultAction",this.setInput[n](t,i)},this))},setCursorToEnd:function(t){var e,i=t.value.length;if(t.focus(),t.setSelectionRange)try{t.setSelectionRange(i,i)}catch(n){}else if(t.createTextRange){e=t.createTextRange(),e.collapse(!0),e.moveEnd("character",i),e.moveStart("character",i);try{e.select()}catch(n){}}}};e.exports=n},{}],10:[function(t,e,i){"use strict";var n={uniqueId:0,getAttributesString:function(t){var e="";return _.each(t,function(t,i){e+=" "+i+'="'+t+'"'},this),e},sum:function(t){return _.reduce(t,function(t,e){return t+=e},0)},getMinMax:function(t){return{min:Math.min.apply(null,t),max:Math.max.apply(null,t)}},getHeight:function(t,e){return 0===t?t:t*(e+1)+1},getDisplayRowCount:function(t,e){return Math.ceil((t-1)/(e+1))},getRowHeight:function(t,e){return 0===t?0:Math.floor((e-1)/t)-1},isEqual:function(t,e){var i,n=function(t,e){var i=!1;return tui.util.forEach(t,function(t,n){return i=t===e[n]}),i};return typeof t!=typeof e?!1:_.isArray(t)&&t.length!==e.length?!1:_.isObject(t)?(i=!n(t,e)||!n(e,t),!i):t!==e?!1:!0},isBlank:function(t){return _.isString(t)?!t.length:void 0===t||null===t},stripTags:function(t){var e;return t=t.replace(/[\n\r\t]/g,""),tui.util.hasEncodableString(t)&&(/<img/i.test(t)?(e=t.match(/<img[^>]*\ssrc=[\"']?([^>\"']+)[\"']?[^>]*>/i),t=e?e[1]:""):t=t.replace(/<button.*?<\/button>/gi,""),t=$.trim(tui.util.decodeHTMLEntity(t.replace(/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/gi,"")))),t},getUniqueKey:function(){return this.uniqueId+=1,this.uniqueId},toQueryString:function(t){var e=[];return _.each(t,function(t,i){_.isString(t)||_.isNumber(t)||(t=$.toJSON(t)),t=encodeURIComponent(t),t&&e.push(i+"="+t)}),e.join("&")},toQueryObject:function(t){var e=t.split("&"),i={};return _.each(e,function(t){var e,n,o=t.split("=");e=o[0],n=decodeURIComponent(o[1]);try{n=$.parseJSON(n)}catch(s){}_.isNull(n)||(i[e]=n)}),i},convertValueType:function(t,e){return"string"===e?t.toString():"number"===e?+t:t},toUpperCaseFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},clamp:function(t,e,i){var n;return e>i&&(n=e,e=i,i=n),Math.max(e,Math.min(t,i))},isBrowserIE7:function(){var t=tui.util.browser;return t.msie&&7===t.version}};e.exports=n},{}],11:[function(t,e,i){"use strict";var n=tui.util.defineClass({init:function(t){this.$el=t},getElement:function(t,e){return this.$el.find('tr[key="'+t+'"]').find('td[columnname="'+e+'"]')},getOffset:function(){return this.$el.offset()},getWidth:function(){return this.$el.width()},hasFocusedElement:function(){return!!this.$el.find(":focus").length}});e.exports=n},{}],12:[function(t,e,i){"use strict";var n=t("./base/view"),o=t("./model/manager"),s=t("./view/factory"),a=t("./domState"),l=t("./publicEventEmitter"),r=t("./painter/manager"),u=t("./addon/net"),d=t("./common/util"),c={};tui=window.tui=tui||{},tui.Grid=n.extend({initialize:function(t){this.id=d.getUniqueKey(),this.modelManager=this._createModelManager(t),this.painterManager=this._createPainterManager(),this.container=this._createContainerView(t),this.publicEventEmitter=this._createPublicEventEmitter(),this.container.render(),this.refreshLayout(),this.addOn={},c[this.id]=this},_createModelManager:function(t){var e=new a(this.$el),i=_.assign({},t,{gridId:this.id});return _.omit(i,"el","singleClickEdit"),new o(i,e)},_createPainterManager:function(){return new r({modelManager:this.modelManager})},_createContainerView:function(t){var e=new s({modelManager:this.modelManager,painterManager:this.painterManager});return e.createContainer({el:this.$el,singleClickEdit:t.singleClickEdit})},_createPublicEventEmitter:function(){var t=new l(this);return t.listenToFocusModel(this.modelManager.focusModel),t.listenToContainerView(this.container),t},disableRow:function(t){this.modelManager.dataModel.disableRow(t)},enableRow:function(t){this.modelManager.dataModel.enableRow(t)},getValue:function(t,e,i){return this.modelManager.dataModel.getValue(t,e,i)},getColumnValues:function(t,e){return this.modelManager.dataModel.getColumnValues(t,e)},getRow:function(t,e){return this.modelManager.dataModel.getRowData(t,e)},getRowAt:function(t,e){return this.modelManager.dataModel.getRowData(t,e)},getRowCount:function(){return this.modelManager.dataModel.length},getSelectedRowKey:function(){return this.modelManager.focusModel.which().rowKey},getElement:function(t,e){return this.modelManager.dataModel.getElement(t,e)},setValue:function(t,e,i){this.modelManager.dataModel.setValue(t,e,i)},setColumnValues:function(t,e,i){this.modelManager.dataModel.setColumnValues(t,e,i)},replaceRowList:function(t){this.modelManager.dataModel.replaceRowList(t)},setRowList:function(t,e){this.modelManager.dataModel.setRowList(t,!0,e)},focus:function(t,e,i){this.modelManager.focusModel.focusClipboard(),this.modelManager.focusModel.focus(t,e,i)},focusAt:function(t,e,i){this.modelManager.focusModel.focusAt(t,e,i)},focusIn:function(t,e,i){this.modelManager.focusModel.focusIn(t,e,i)},focusInAt:function(t,e,i){this.modelManager.focusModel.focusInAt(t,e,i)},readyForKeyControl:function(){this.modelManager.focusModel.focusClipboard()},blur:function(){this.modelManager.focusModel.blur()},checkAll:function(){this.modelManager.dataModel.checkAll()},check:function(t){this.modelManager.dataModel.check(t)},uncheckAll:function(){this.modelManager.dataModel.uncheckAll()},uncheck:function(t){this.modelManager.dataModel.uncheck(t)},clear:function(){this.modelManager.dataModel.setRowList([])},removeRow:function(t,e){tui.util.isBoolean(e)&&e&&(e={removeOriginalData:!0}),this.modelManager.dataModel.removeRow(t,e)},removeCheckedRows:function(t){var e=this.modelManager.getCheckedRowKeyList(),i=e.length+"건의 데이터를 삭제하시겠습니까?";return e.length>0&&(!t||confirm(i))?(_.each(e,function(t){this.modelManager.dataModel.removeRow(t)},this),!0):!1},enableCheck:function(t){this.modelManager.dataModel.enableCheck(t)},disableCheck:function(t){this.modelManager.dataModel.disableCheck(t)},getCheckedRowKeyList:function(t){var e=this.modelManager.dataModel.getRowList(!0),i=_.pluck(e,"rowKey");return t?$.toJSON(i):i},getCheckedRowList:function(t){var e=this.modelManager.dataModel.getRowList(!0);return t?$.toJSON(e):e},getColumnModelList:function(){return this.modelManager.columnModel.get("dataColumnModelList")},getModifiedRowList:function(t){return this.modelManager.dataModel.getModifiedRowList(t)},appendRow:function(t,e){this.modelManager.dataModel.append(t,e)},prependRow:function(t){this.modelManager.dataModel.prepend(t)},isChanged:function(){return this.modelManager.dataModel.isChanged()},getAddOn:function(t){return t?this.addOn[t]:this.addOn},restore:function(){this.modelManager.dataModel.restore()},select:function(t){this.modelManager.focusModel.select(t)},unselect:function(){this.modelManager.focusModel.unselect(!0)},setColumnFixCount:function(t){this.modelManager.columnModel.set("columnFixCount",t)},setColumnModelList:function(t){this.modelManager.columnModel.set("columnModelList",t)},use:function(t,e){return"Net"===t&&(e=$.extend({toolbarModel:this.modelManager.toolbarModel,renderModel:this.modelManager.renderModel,dataModel:this.modelManager.dataModel},e),this.addOn.Net=new u(e),this.publicEventEmitter.listenToNetAddon(this.addOn.Net)),this},getRowList:function(){return this.modelManager.dataModel.getRowList()},sort:function(t){this.modelManager.dataModel.sortByField(t)},unSort:function(){this.sort("rowKey")},addCellClassName:function(t,e,i){this.modelManager.dataModel.get(t).addCellClassName(e,i)},addRowClassName:function(t,e){this.modelManager.dataModel.get(t).addClassName(e)},removeCellClassName:function(t,e,i){this.modelManager.dataModel.get(t).removeCellClassName(e,i)},removeRowClassName:function(t,e){this.modelManager.dataModel.get(t).removeClassName(e)},getRowSpanData:function(t,e){return this.modelManager.dataModel.getRowSpanData(t,e)},getIndexOfRow:function(t){return this.modelManager.dataModel.indexOfRowKey(t)},setDisplayRowCount:function(t){this.modelManager.dimensionModel.set("displayRowCount",t)},setSize:function(t,e){this.modelManager.dimensionModel.setSize(t,e)},refreshLayout:function(){this.modelManager.dimensionModel.refreshLayout()},showColumn:function(){var t=tui.util.toArray(arguments);this.modelManager.columnModel.setHidden(t,!1)},hideColumn:function(){var t=tui.util.toArray(arguments);this.modelManager.columnModel.setHidden(t,!0)},destroy:function(){this.modelManager.destroy(),this.container.destroy(),this.modelManager=this.container=null}}),tui.Grid.getInstanceById=function(t){return c[t]}},{"./addon/net":2,"./base/view":7,"./common/util":10,"./domState":11,"./model/manager":19,"./painter/manager":36,"./publicEventEmitter":38,"./view/factory":41}],13:[function(t,e,i){"use strict";var n=t("../../base/model"),o=["_button","_number"],s=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.textType={normal:!0,text:!0,"text-password":!0,"text-convertible":!0},this._setColumnModelList(this.get("columnModelList")),this.on("change",this._onChange,this)},defaults:{keyColumnName:null,columnFixCount:0,metaColumnModelList:[],dataColumnModelList:[],visibleList:[],hasNumberColumn:!0,selectType:"",columnModelMap:{},relationListMap:{},columnMerge:[]},_initializeMetaColumns:function(t){var e=[];return this._initializeButtonColumn(e),this._initializeNumberColumn(e),this._overwriteColumnModelList(e,t),e},_overwriteColumnModelList:function(t,e){_.each(e,function(e){this._extendColumnList(e,t)},this)},_initializeNumberColumn:function(t){var e=this.get("hasNumberColumn"),i={columnName:"_number",align:"center",title:"No.",isFixedWidth:!0,width:60};e||(i.isHidden=!0),this._extendColumnList(i,t)},_initializeButtonColumn:function(t){var e=this.get("selectType"),i={columnName:"_button",isHidden:!1,editOption:{type:e,list:[{value:"selected"}]},isFixedWidth:!0,width:40};"checkbox"===e?i.title='<input type="checkbox"/>':"radio"===e?i.title="선택":i.isHidden=!0,this._extendColumnList(i,t)},_extendColumnList:function(t,e){var i=t.columnName,n=_.findIndex(e,{columnName:i});-1===n?e.push(t):e[n]=$.extend(e[n],t)},at:function(t,e){var i=e?this.getVisibleColumnModelList():this.get("dataColumnModelList");return i[t]},indexOfColumnName:function(t,e){var i;return i=e?this.getVisibleColumnModelList():this.get("dataColumnModelList"),_.findIndex(i,{columnName:t})},isLside:function(t){var e=this.indexOfColumnName(t,!0);return e>-1&&e<this.get("columnFixCount")},getVisibleColumnModelList:function(t,e){var i,n=e?0:this.getVisibleMetaColumnCount(),o=this.getVisibleColumnFixCount(e);return t=t&&t.toUpperCase(),i="L"===t?this.get("visibleList").slice(n,o):"R"===t?this.get("visibleList").slice(o):this.get("visibleList").slice(n)},getVisibleMetaColumnCount:function(){var t=this.get("metaColumnModelList"),e=t.length,i=_.where(t,{isHidden:!0}).length;return e-i},getVisibleColumnFixCount:function(t){var e=this.get("columnFixCount"),i=e;return tui.util.forEach(this.get("dataColumnModelList"),function(t,n){return n>=e?!1:void(t.isHidden&&(i-=1))}),t?i+this.getVisibleMetaColumnCount():i},getColumnModel:function(t){return this.get("columnModelMap")[t]},isTextType:function(t){return!!this.textType[this.getEditType(t)]},getEditType:function(t){var e=this.getColumnModel(t),i="normal";return"_button"===t||"_number"===t?i=t:e&&e.editOption&&e.editOption.type&&(i=e.editOption.type),i},_makeVisibleColumnModelList:function(t,e){return t=t||this.get("metaColumnModelList"),e=e||this.get("dataColumnModelList"),_.filter(t.concat(e),function(t){return!t.isHidden})},_getRelationListMap:function(t){var e,i={};return _.each(t,function(t){e=t.columnName,t.relationList&&(i[e]=t.relationList)}),i},getIgnoredColumnNameList:function(){var t=this.get("dataColumnModelList"),e=[];return _.each(t,function(t){t.isIgnore&&e.push(t.columnName)}),e},_setColumnModelList:function(t,e){var i,n,o,s,a;t=$.extend(!0,[],t),tui.util.isUndefined(e)&&(e=this.get("columnFixCount")),i=_.partition(t,function(t){return this.isMetaColumn(t.columnName)},this),s=this._initializeMetaColumns(i[0]),a=i[1],n=this._getRelationListMap(a),o=this._makeVisibleColumnModelList(s,a),this.set({metaColumnModelList:s,dataColumnModelList:a,columnModelMap:_.indexBy(s.concat(a),"columnName"),relationListMap:n,columnFixCount:Math.max(0,e),visibleList:o},{silent:!0}),this.unset("columnModelList",{silent:!0}),this.trigger("columnModelChange")},_onChange:function(t){var e=t.changed,i=e.columnFixCount,n=e.columnModelList;n||(n=this.get("dataColumnModelList")),this._setColumnModelList(n,i)},setHidden:function(t,e){for(var i,n,o,s;t.length;)i=t.shift(),o=this.getColumnModel(i),o?o.isHidden=e:(n=this.getUnitColumnNamesIfMerged(i),t.push.apply(t,n));s=this._makeVisibleColumnModelList(this.get("metaColumnModelList"),this.get("dataColumnModelList")),this.set("visibleList",s,{silent:!0}),this.trigger("columnModelChange")},getUnitColumnNamesIfMerged:function(t){var e,i,n,o=this.get("columnMerge"),s=[],a=[];for(s.push(t);s.length;)e=s.shift(),i=this.getColumnModel(e),i?a.push(e):(n=_.findWhere(o,{columnName:e}),n&&s.push.apply(s,n.columnNameList));return _.uniq(a)},isMetaColumn:function(t){return _.indexOf(o,t)>=0}});e.exports=s},{"../../base/model":5}],14:[function(t,e,i){"use strict";var n=(t("../../base/model"),t("../../common/util"),tui.util.defineClass({init:function(t){this.data=t},getRowSpanData:function(t,e,i){var n=null;return i&&(n=this.data.rowSpanData,t&&n&&(n=n[t])),!n&&t&&(n={count:0,isMainRow:!0,mainRowKey:e}),n},getRowState:function(){var t={isDisabledCheck:!1,isDisabled:!1,isChecked:!1};switch(this.data.rowState){case"DISABLED":t.isDisabled=!0;case"DISABLED_CHECK":t.isDisabledCheck=!0;break;case"CHECKED":t.isChecked=!0}return t},setRowState:function(t){this.data.rowState=t},setRowSpanData:function(t,e){var i=_.assign({},this.data.rowSpanData);t&&(e?i[t]=e:i[t]&&delete i[t],this.data.rowSpanData=i)},addCellClassName:function(t,e){var i,n;i=this.data.className||{},i.column=i.column||{},n=i.column[t]||[],_.contains(n,e)||(n.push(e),i.column[t]=n,this.data.className=i)},addClassName:function(t){var e,i;e=this.data.className||{},i=e.row||[],-1===tui.util.inArray(t,i)&&(i.push(t),e.row=i,this.data.className=e)},getClassNameList:function(t){var e=this.data.className,i=Array.prototype.push,n=[];return e&&(e.row&&i.apply(n,e.row),t&&e.column&&e.column[t]&&i.apply(n,e.column[t])),n},_removeClassNameFromArray:function(t,e){var i=t.join(" ").split(" ");return _.without(i,e)},removeCellClassName:function(t,e){var i=this.data.className;tui.util.pick(i,"column",t)&&(i.column[t]=this._removeClassNameFromArray(i.column[t],e),this.data.className=i)},removeClassName:function(t){var e=this.data.className;e&&e.row&&(e.row=this._removeClassNameFromArray(e.row,t),this.className=e)}}));e.exports=n},{"../../base/model":5,"../../common/util":10}],15:[function(t,e,i){"use strict";var n=t("../../base/model"),o=t("./extraDataManager"),s=t("../../common/util"),a=["_button","_number","_extraData"],l=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.extraDataManager=new o(this.get("_extraData")),this.columnModel=this.collection.columnModel,this.on("change",this._onChange,this)},idAttribute:"rowKey",parse:function(t){return t._extraData||(t._extraData={}),t},_triggerExtraDataChangeEvent:function(){this.trigger("extraDataChanged",this.get("_extraData"))},_onChange:function(){var t=_.omit(this.changed,a);this.isDuplicatedPublicChanged(t)||_.each(t,function(t,e){var i=this.columnModel.getColumnModel(e);i&&this._executeChangeBeforeCallback(e)&&(this.collection.syncRowSpannedData(this,e,t),this._executeChangeAfterCallback(e),this.getRowState().isDisabledCheck||i.isIgnore||this.set("_button",!0))},this)},_createChangeCallbackEvent:function(t){return{rowKey:this.get("rowKey"),columnName:t,value:this.get(t),instance:tui.Grid.getInstanceById(this.collection.gridId)}},_executeChangeBeforeCallback:function(t){var e,i,n=this.columnModel.getColumnModel(t);return n.editOption&&n.editOption.changeBeforeCallback&&(e=this._createChangeCallbackEvent(t),n.editOption.changeBeforeCallback(e)===!1)?(i={},i[t]=this.previous(t),this.set(i),this.trigger("restore",{changed:i}),!1):!0},_executeChangeAfterCallback:function(t){var e,i=this.columnModel.getColumnModel(t);return i.editOption&&i.editOption.changeAfterCallback?(e=this._createChangeCallbackEvent(t),!!i.editOption.changeAfterCallback(e)):!0},getPrivateProperties:function(){return a},getRowState:function(){return this.extraDataManager.getRowState()},getClassNameList:function(t){var e=this.columnModel.getColumnModel(t),i=this.extraDataManager.getClassNameList(t);return e.className&&i.push(e.className),e.isEllipsis&&i.push("ellipsis"),this._makeUniqueStringArray(i)},_makeUniqueStringArray:function(t){var e=_.uniq(t.join(" ").split(" "));return _.without(e,"")},getCellState:function(t){var e,i,n=["_number","normal"],o=this.columnModel,s=!1,a=!0,l=o.getEditType(t);return i=this.getRelationResult(["isDisabled","isEditable"])[t],e=this.getRowState(),s="_button"===t?e.isDisabledCheck:e.isDisabled,s=s||!(!i||!i.isDisabled),a=-1!==$.inArray(l,n)?!1:!(i&&i.isEditable===!1),{isEditable:a,isDisabled:s}},isEditable:function(t){var e=["_number","normal"],i=this.columnModel.getEditType(t),n=!1;return-1===$.inArray(i,e)&&(n=this.getCellState(t).isEditable),n},isDisabled:function(t){var e;return e=this.getCellState(t),e.isDisabled},getRowSpanData:function(t){var e=this.collection.isRowSpanEnable(),i=this.get("rowKey");return this.extraDataManager.getRowSpanData(t,i,e)},setRowSpanData:function(t,e){this.extraDataManager.setRowSpanData(t,e),this._triggerExtraDataChangeEvent()},setRowState:function(t,e){this.extraDataManager.setRowState(t),e||this._triggerExtraDataChangeEvent()},addCellClassName:function(t,e){this.extraDataManager.addCellClassName(t,e),this._triggerExtraDataChangeEvent()},addClassName:function(t){this.extraDataManager.addClassName(t),this._triggerExtraDataChangeEvent()},removeCellClassName:function(t,e){this.extraDataManager.removeCellClassName(t,e),this._triggerExtraDataChangeEvent()},removeClassName:function(t){this.extraDataManager.removeClassName(t),this._triggerExtraDataChangeEvent()},getHTMLEncodedString:function(t){var e=this.columnModel.getColumnModel(t),i=this.columnModel.isTextType(t),n=this.get(t),o=e.notUseHtmlEntity;return!o&&i&&tui.util.hasEncodableString(n)&&(n=tui.util.encodeHTMLEntity(n)),n},_getListTypeVisibleText:function(t){var e,i,n,o,a=this.get(t),l=this.columnModel.getColumnModel(t);return tui.util.isExisty(tui.util.pick(l,"editOption","list"))?(e=this.getRelationResult(["optionListChange"])[t],i=e&&e.optionList?e.optionList:l.editOption.list,n=typeof i[0].value,o=a.toString().split(","),n!==typeof o[0]&&(o=_.map(o,function(t){return s.convertValueType(t,n)})),_.each(o,function(t,e){var n=_.findWhere(i,{value:t});o[e]=n&&n.text||""},this),o.join(",")):void 0},isDuplicatedPublicChanged:function(t){return this._timeoutIdForChanged&&_.isEqual(this._lastPublicChanged,t)?!0:(clearTimeout(this._timeoutIdForChanged),this._timeoutIdForChanged=setTimeout(_.bind(function(){this._timeoutIdForChanged=null},this),10),this._lastPublicChanged=t,!1)},getVisibleText:function(t){var e,i,n=this.columnModel,o=this.get(t),a={select:!0,radio:!0,checkbox:!0};if(n)if(e=n.getEditType(t),i=n.getColumnModel(t),a[e]){if(!tui.util.isExisty(tui.util.pick(i,"editOption","list",0,"value")))throw this.error('Check "'+t+"\"'s editOption.list property out in your ColumnModel.");o=this._getListTypeVisibleText(t)}else _.isFunction(i.formatter)&&(o=s.stripTags(i.formatter(this.getHTMLEncodedString(t),this.toJSON(),i)));return o=tui.util.isUndefined(o)?o:o.toString()},getRelationResult:function(t){var e,i,n,o,s=this.attributes,a=this.columnModel.get("relationListMap"),l={},r=this.getRowState();return t=t&&t.length?t:["optionListChange","isDisabled","isEditable"],_.each(a,function(a,u){o=s[u],_.each(a,function(a){n=a.columnList,_.each(t,function(t){r.isDisabled&&"isDisabled"===t||(e=a[t],"function"==typeof e&&(i="","optionListChange"===t?i="optionList":"isDisabled"===t?i="isDisabled":"isEditable"===t&&(i="isEditable"),i&&_.each(n,function(t){l[t]=l[t]||{},l[t][i]=e(o,s)},this)))},this)},this)},this),l}},{privateProperties:a});e.exports=l},{"../../base/model":5,"../../common/util":10,"./extraDataManager":14}],16:[function(t,e,i){"use strict";var n=t("../../base/collection"),o=t("./row"),s=n.extend({model:o,initialize:function(t,e){n.prototype.initialize.apply(this,arguments),this.setOwnProperties({columnModel:e.columnModel,domState:e.domState,gridId:e.gridId,lastRowKey:-1,originalRowList:[],originalRowMap:{},startIndex:e.startIndex||1,sortOptions:{columnName:"rowKey",isAscending:!0,useClient:_.isBoolean(e.useClientSort)?e.useClientSort:!0}}),this.sortOptions.useClient||(this.comparator=null);
},parse:function(t){return t=t&&t.contents||t,this._formatData(t)},_formatData:function(t){var e=_.filter(t,_.isObject);return _.each(e,function(t,i){e[i]=this._baseFormat(e[i]),this.isRowSpanEnable()&&this._setExtraRowSpanData(e,i)},this),e},_baseFormat:function(t){var e={rowSpan:null,rowSpanData:null,rowState:null},i=this.columnModel.get("keyColumnName"),n=null===i?this._createRowKey():t[i];return t._extraData=$.extend(e,t._extraData),t._button="CHECKED"===t._extraData.rowState,t.rowKey=n,t},_createRowKey:function(){return this.lastRowKey+=1,this.lastRowKey},_setExtraRowSpanData:function(t,e){function i(t,e){var i=t._extraData;return!(!i.rowSpanData||!i.rowSpanData[e])}function n(t,e,i){var n=t._extraData;return n.rowSpanData=n&&n.rowSpanData||{},n.rowSpanData[e]=i,n}var o,s,a,l=t[e],r=l&&l._extraData&&l._extraData.rowSpan,u=l&&l.rowKey;return r&&_.each(r,function(r,d){if(!i(l,d))for(n(l,d,{count:r,isMainRow:!0,mainRowKey:u}),o=-1,a=e+1;e+r>a;a+=1)s=t[a],s[d]=l[d],s._extraData=s._extraData||{},n(s,d,{count:o,isMainRow:!1,mainRowKey:u}),o-=1}),t},setOriginalRowList:function(t){return this.originalRowList=t?this._formatData(t):this.toJSON(),this.originalRowMap=_.indexBy(this.originalRowList,"rowKey"),this.originalRowList},getOriginalRowList:function(t){return t=void 0===t?!0:t,t?_.clone(this.originalRowList):this.originalRowList},getOriginalRow:function(t){return _.clone(this.originalRowMap[t])},getOriginal:function(t,e){return _.clone(this.originalRowMap[t][e])},getMainRowKey:function(t,e){var i,n=this.get(t);return this.isRowSpanEnable()&&(i=n&&n.getRowSpanData(e),t=i?i.mainRowKey:t),t},indexOfRowKey:function(t){return this.indexOf(this.get(t))},isRowSpanEnable:function(){return!this.isSortedByField()},isSortedByField:function(){return"rowKey"!==this.sortOptions.columnName},setSortOptionValues:function(t,e,i){var n=this.sortOptions,o=!1;_.isUndefined(t)&&(t="rowKey"),_.isUndefined(e)&&(e=!0),(n.columnName!==t||n.isAscending!==e)&&(o=!0),n.columnName=t,n.isAscending=e,o&&this.trigger("sortChanged",{columnName:t,isAscending:e,isRequireFetch:i})},sortByField:function(t,e){var i=this.sortOptions;_.isUndefined(e)&&(e=i.columnName===t?!i.isAscending:!0),this.setSortOptionValues(t,e,!i.useClient),i.useClient&&this.sort()},getRowList:function(t,e){var i,n;return t?(n=this.where({_button:!0}),i=[],_.each(n,function(t){i.push(t.attributes)},this)):i=this.toJSON(),e?i:this._removePrivateProp(i)},syncRowSpannedData:function(t,e,i){var n,o,s;if(this.isRowSpanEnable())if(o=t.getRowSpanData(e),o.isMainRow)for(n=this.indexOfRowKey(t.get("rowKey")),s=0;s<o.count-1;s+=1)this.at(s+1+n).set(e,i);else this.get(o.mainRowKey).set(e,i)},comparator:function(t,e){var i=this.sortOptions.columnName,n=this.sortOptions.isAscending,o=t.get(i),s=e.get(i),a=0;return s>o?a=-1:o>s&&(a=1),n||(a=-a),a},_removePrivateProp:function(t){return _.map(t,function(t){return _.omit(t,o.privateProperties)})},removeRow:function(t,e){var i,n,o,s=this.get(t);s&&(e&&e.keepRowSpanData&&(o=_.clone(s.attributes)),i=_.clone(s.getRowSpanData()),n=this.at(this.indexOf(s)+1),this.remove(s,{silent:!0}),this._syncRowSpanDataForRemove(i,n,o),e&&e.removeOriginalData&&this.setOriginalRowList(),this.trigger("remove"))},_syncRowSpanDataForRemove:function(t,e,i){t&&_.each(t,function(t,n){var o,s,a,l={};if(t.isMainRow){if(1===t.count)return;o=e,a=t.count-1,s=1,a>1&&(l.mainRowKey=o.get("rowKey"),l.isMainRow=!0),o.set(n,i?i[n]:"",{silent:!0})}else o=this.get(t.mainRowKey),a=o.getRowSpanData(n).count-1,s=-t.count;a>1?(l.count=a,o.setRowSpanData(n,l),this._updateSubRowSpanData(o,n,s,a)):o.setRowSpanData(n,null)},this)},_createDummyRow:function(){var t=this.columnModel.get("dataColumnModelList"),e={};return _.each(t,function(t){e[t.columnName]=""},this),e},append:function(t,e){var i,n=this._createModelList(t);return e=_.extend({at:this.length},e),i={at:e.at,add:!0,silent:!0},this.add(n,i),this._syncRowSpanDataForAppend(e.at,n.length,e.extendPrevRowSpan),this.trigger("add",n,i),n},prepend:function(t){return this.append(t,{at:0})},getRowData:function(t,e){var i=this.get(t),n=i?i.toJSON():null;return e?$.toJSON(n):n},getRowDataAt:function(t,e){var i=this.at(t),n=i?i.toJSON():null;return e?$.toJSON(i):n},getValue:function(t,e,i){var n,o;return i?n=this.getOriginal(t,e):(o=this.get(t),n=o&&o.get(e)),n},setValue:function(t,e,i,n){var o,s=this.get(t),a={};return i=_.isString(i)?$.trim(i):i,s?(a[e]=i,s.set(a,{silent:n}),o=!0):o=!1,o},getColumnValues:function(t,e){var i=this.pluck(t);return e?$.toJSON(i):i},setColumnValues:function(t,e,i,n){var o={},s={isDisabled:!1,isEditable:!0};o[t]=e,i=void 0===i?!0:i,this.forEach(function(e){i&&(s=e.getCellState(t)),!s.isDisabled&&s.isEditable&&e.set(o,{silent:n})},this)},getRowSpanData:function(t,e){var i=this.get(t);return i?i.getRowSpanData(e):null},isChanged:function(){var t=_.values(this.getModifiedRowList());return _.some(t,function(t){return t.length>0})},enableRow:function(t){this.get(t).setRowState("")},disableRow:function(t){this.get(t).setRowState("DISABLED")},enableCheck:function(t){this.get(t).setRowState("")},disableCheck:function(t){this.get(t).setRowState("DISABLED_CHECK")},check:function(t,e){var i=this.get(t).getRowState().isDisabledCheck,n=this.columnModel.get("selectType");!i&&n&&("radio"===n&&this.uncheckAll(),this.setValue(t,"_button",!0,e))},uncheck:function(t,e){this.setValue(t,"_button",!1,e)},checkAll:function(){this.setColumnValues("_button",!0)},uncheckAll:function(){this.setColumnValues("_button",!1)},_createModelList:function(t){var e,i=[];return t=t||this._createDummyRow(),_.isArray(t)||(t=[t]),e=this._formatData(t),_.each(e,function(t){var e;t._button=!0,e=new o(t,{collection:this,parse:!0}),i.push(e)},this),i},_syncRowSpanDataForAppend:function(t,e,i){var n=this.at(t-1);n&&_.each(n.getRowSpanData(),function(t,o){var s,a,l,r;0!==t.count&&(t.isMainRow?(s=n,a=t,l=1):(s=this.get(t.mainRowKey),a=s.getRowSpanData()[o],l=-t.count+1),(a.count>l||i)&&(a.count+=e,r=a.count,this._updateSubRowSpanData(s,o,l,r)))},this)},_updateSubRowSpanData:function(t,e,i,n){var o,s,a=this.indexOf(t),l=t.get("rowKey");for(s=i;n>s;s+=1)o=this.at(a+s),o.set(e,t.get(e),{silent:!0}),o.setRowSpanData(e,{count:-s,mainRowKey:l,isMainRow:!1})},_isModifiedRow:function(t,e,i){var n=_.omit(t,i),o=_.some(n,function(t,i){return"object"==typeof t?$.toJSON(t)!==$.toJSON(e[i]):t!==e[i]},this);return o},getModifiedRowList:function(t){var e=t&&t.isRaw,i=t&&t.isOnlyChecked,n=t&&t.isOnlyRowKeyList,o=e?this.originalRowList:this._removePrivateProp(this.originalRowList),s=e?this.toJSON():this._removePrivateProp(this.toJSON()),a=t&&t.filteringColumnList,l={createList:[],updateList:[],deleteList:[]};return o=_.indexBy(o,"rowKey"),s=_.indexBy(s,"rowKey"),a=_.union(a,this.columnModel.getIgnoredColumnNameList()),_.each(s,function(t,e){var s=o[e],r=n?t.rowKey:t;(!i||i&&this.get(e).get("_button"))&&(s?this._isModifiedRow(t,s,a)&&l.updateList.push(r):l.createList.push(r))},this),_.each(o,function(t,e){var i=n?t.rowKey:t;s[e]||l.deleteList.push(i)},this),l},_resetData:function(t,e,i){this.lastRowKey=-1,this.reset(t,{parse:e}),_.isFunction(i)&&i()},replaceRowList:function(t,e,i){_.isUndefined(e)&&(e=!0),this.trigger("beforeReset"),t&&t.length>500?_.defer(_.bind(this._resetData,this,t,e,i)):this._resetData(t,e,i)},setRowList:function(t,e,i){var n=_.bind(function(){this.setOriginalRowList(),_.isFunction(i)&&i()},this);this.replaceRowList(t,e,n)},restore:function(){var t=this.getOriginalRowList();this.replaceRowList(t,!0)},del:function(t,e,i){var n=this.getMainRowKey(t,e),o=this.get(n).getCellState(e),s=this.columnModel.getEditType(e),a=_.contains(["text","text-convertible","text-password"],s);a&&o.isEditable&&!o.isDisabled&&(this.setValue(n,e,"",i),i&&this.check(n,i))},paste:function(t,e){var i=this._getEndIndexToPaste(t,e);_.each(t,function(t,n){this._setValueForPaste(t,e.row+n,e.column,i.column)},this),this.trigger("paste",{startIdx:e,endIdx:i})},_getEndIndexToPaste:function(t,e){var i=this.columnModel.getVisibleColumnModelList(),n=t.length+e.row-1,o=Math.min(t[0].length+e.column,i.length)-1;return{row:n,column:o}},_setValueForPaste:function(t,e,i,n){var o,s,a,l,r=this.at(e),u=this.columnModel,d={};for(r||(r=this.append({})[0]),o=i;n>=o;o+=1)s=u.at(o,!0).columnName,a=r.getCellState(s),l=r.getRowSpanData(s),a.isEditable&&!a.isDisabled&&(!l||l.count>=0)&&(d[s]=t[o-i]);r.set(d)},getElement:function(t,e){var t=this.getMainRowKey(t,e);return this.domState.getElement(t,e)}});e.exports=s},{"../../base/collection":3,"./row":15}],17:[function(t,e,i){"use strict";var n=t("../base/model"),o=t("../common/util"),s=1,a=1,l=n.extend({initialize:function(t,e){n.prototype.initialize.apply(this,arguments),this._columnWidthFixedFlags=null,this._minColumnWidthList=null,this.columnModel=e.columnModel,this.dataModel=e.dataModel,this.domState=e.domState,this.listenTo(this.columnModel,"columnModelChange",this._initColumnWidthVariables),this.listenTo(this.dataModel,"add remove reset",this._resetTotalRowHeight),this.on("change:width",this._onWidthChange,this),this.on("change:displayRowCount",this._setBodyHeight,this),this._initColumnWidthVariables(),this._setBodyHeight()},models:null,columnModel:null,defaults:{offsetLeft:0,offsetTop:0,width:0,headerHeight:0,bodyHeight:0,toolbarHeight:65,rowHeight:0,totalRowHeight:0,rsideWidth:0,lsideWidth:0,columnWidthList:[],minimumColumnWidth:0,displayRowCount:1,scrollBarSize:17,scrollX:!0,scrollY:!0},_getAvailableTotalWidth:function(t){var e=this.get("width"),i=e-this.getScrollYWidth()-t-1;return this.columnModel.getVisibleColumnFixCount(!0)>0&&(i-=a),i},_applyMinimumColumnWidth:function(t){var e=this._minColumnWidthList,i=_.clone(t);return _.each(i,function(t,n){var o=e[n];o>t&&(i[n]=o)}),i},_resetTotalRowHeight:function(){var t=this.get("rowHeight"),e=this.dataModel.length,i=e+1;this.set("totalRowHeight",t*e+i)},_fillEmptyColumnWidth:function(t){var e=this._getAvailableTotalWidth(t.length),i=e-o.sum(t),n=[];return _.each(t,function(t,e){t||n.push(e)}),this._distributeExtraWidthEqually(t,i,n)},_addExtraColumnWidth:function(t,e){var i=this._columnWidthFixedFlags,n=[];return _.each(i,function(t,e){t||n.push(e)}),this._distributeExtraWidthEqually(t,e,n)},_reduceExcessColumnWidth:function(t,e){var i=this._minColumnWidthList,n=this._columnWidthFixedFlags,o=[];return _.each(t,function(t,e){n[e]||o.push({index:e,width:t-i[e]})}),this._reduceExcessColumnWidthSub(_.clone(t),e,o)},_reduceExcessColumnWidthSub:function(t,e,i){var n,o=Math.round(e/i.length),s=[];return _.each(i,function(i){i.width<Math.abs(o)?(e+=i.width,t[i.index]-=i.width):s.push(i)}),i.length>s.length?this._reduceExcessColumnWidthSub(t,e,s):(n=_.pluck(i,"index"),this._distributeExtraWidthEqually(t,e,n))},_distributeExtraWidthEqually:function(t,e,i){var n=i.length,o=Math.round(e/n),s=o*n-e,a=_.clone(t);return _.each(i,function(t){a[t]+=o}),a[_.last(i)]-=s,a},_adjustColumnWidthList:function(t,e){var i,n=t.length,s=this._getAvailableTotalWidth(n),a=s-o.sum(t),l=_.filter(this._columnWidthFixedFlags).length;return a>0?n>l?i=this._addExtraColumnWidth(t,a):(i=_.clone(t),i[n-1]+=a):i=e&&0>a?this._reduceExcessColumnWidth(t,a):t,i},_initColumnWidthVariables:function(){var t,e=this.columnModel.getVisibleColumnModelList(null,!0),i=this.get("minimumColumnWidth"),n=[],o=[],s=[];_.each(e,function(t){var e=t.width>0?t.width:0,a=Math.max(e,i);n.push(e?a:0),s.push(a),o.push(!!t.isFixedWidth)}),this._columnWidthFixedFlags=o,this._minColumnWidthList=s,t=_.compose(this._adjustColumnWidthList,this._applyMinimumColumnWidth,this._fillEmptyColumnWidth),this._setColumnWidthVariables(t.call(this,n),!0)},getFrameWidth:function(t){var e=this.columnModel.getVisibleColumnFixCount(!0),i=this.getColumnWidthList(t),n=this._getFrameWidth(i);return tui.util.isUndefined(t)&&e>0&&(n+=1),n},_getFrameWidth:function(t){var e=0;return t.length&&(e=o.sum(t)+(t.length+1)*a),e},_setColumnWidthVariables:function(t,e){var i,n,o,s,a=this.get("width"),l=this.columnModel.getVisibleColumnFixCount(!0),r=this._getMaxLeftSideWidth();o=t.slice(0,l),s=t.slice(l),n=this._getFrameWidth(o),r&&n>r&&(o=this._adjustLeftSideWidthList(o,r),n=this._getFrameWidth(o),t=o.concat(s)),i=a-n,this.set({columnWidthList:t,rsideWidth:i,lsideWidth:n}),e&&this.set("originalWidthList",_.clone(t)),this.trigger("columnWidthChanged")},_getMinLeftSideWidth:function(){var t,e=this.get("minimumColumnWidth"),i=this.columnModel.getVisibleColumnFixCount(!0),n=0;return i&&(t=(i+1)*a,n=t+e*i),n},_getMaxLeftSideWidth:function(){var t=Math.ceil(.9*this.get("width"));return t&&(t=Math.max(t,this._getMinLeftSideWidth())),t},getCellPosition:function(t,e){var i,n,s,l,r,u,d,c,h=this.dataModel,m=this.columnModel,g=this.get("rowHeight"),f=h.get(t),p=m.getVisibleMetaColumnCount(),M=this.get("columnWidthList").slice(p),_=m.getVisibleColumnFixCount(),w=m.indexOfColumnName(e,!0);if(!f)return{};for(i=h.get(t).getRowSpanData(e),i.isMainRow||(t=i.mainRowKey,i=h.get(t).getRowSpanData(e)),s=i.count||1,n=h.indexOfRowKey(t),l=o.getHeight(n,g),d=l+o.getHeight(s,g)-a,r=c=0,w>=_&&(c=_);w>c;c+=1)r+=M[c]+a;return u=r+M[c]+a,{top:l,left:r,right:u,bottom:d}},getScrollPosition:function(t,e){var i=!this.columnModel.isLside(e),n=this.getCellPosition(t,e),o=this._getBodySize(),s=this._judgeScrollDirection(n,i,o);return this._makeScrollPosition(s,n,o)},_getBodySize:function(){var t=this.get("lsideWidth"),e=this.get("rsideWidth")-this.getScrollYWidth(),i=this.get("bodyHeight")-this.getScrollXHeight();return{height:i,rsideWidth:e,totalWidth:t+e}},_judgeScrollDirection:function(t,e,i){var n,o,s,a,l=this.renderModel,r=l.get("scrollTop"),u=l.get("scrollLeft");return n=t.top<r,o=!n&&t.bottom>r+i.height,e?(s=t.left<u,a=!s&&t.right>u+i.rsideWidth-1):s=a=!1,{isUp:n,isDown:o,isLeft:s,isRight:a}},_makeScrollPosition:function(t,e,i){var n={};return t.isUp?n.scrollTop=e.top:t.isDown&&(n.scrollTop=e.bottom-i.height),t.isLeft?n.scrollLeft=e.left:t.isRight&&(n.scrollLeft=e.right-i.rsideWidth+s),n},getOverflowFromMousePosition:function(t,e){var i=this._rebasePositionToContainer(t,e),n=this._getBodySize();return this._judgeOverflow(i,n)},_judgeOverflow:function(t,e){var i=t.x,n=t.y,o=0,s=0;return 0>n?o=-1:n>e.height&&(o=1),0>i?s=-1:i>e.totalWidth&&(s=1),{x:s,y:o}},getIndexFromMousePosition:function(t,e,i){var n=this._rebasePositionToContainer(t,e);return{row:this._calcRowIndexFromPositionY(n.y),column:this._calcColumnIndexFromPositionX(n.x,i)}},_calcRowIndexFromPositionY:function(t){var e=t+this.renderModel.get("scrollTop"),i=Math.floor(e/(this.get("rowHeight")+a)),n=0,s=Math.max(n,this.dataModel.length-1);return o.clamp(i,n,s)},_calcColumnIndexFromPositionX:function(t,e){var i=this.getColumnWidthList(),n=this.getFrameWidth(),o=t,s=t>=this.get("lsideWidth"),a=e?0:this.columnModel.getVisibleMetaColumnCount(),l=0;return s&&(o+=this.renderModel.get("scrollLeft")),o>=n?l=i.length-1:tui.util.forEachArray(i,function(t,e){return t>=o?(l=e,!1):void(o-=t)}),Math.max(0,l-a)},_rebasePositionToContainer:function(t,e){var i=t-this.get("offsetLeft"),n=e-(this.get("offsetTop")+this.get("headerHeight")+2);return{x:i,y:n}},_adjustLeftSideWidthList:function(t,e){var i,n=t.length-1,o=this.get("minimumColumnWidth"),s=this._getFrameWidth(t),a=s-e;if(a>0)for(;n>=0&&a>0;)i=Math.max(o,t[n]-a),a-=t[n]-i,t[n]=i,n-=1;else 0>a&&(t[n]+=Math.abs(a));return t},_setBodyHeight:function(){var t=o.getHeight(this.get("displayRowCount"),this.get("rowHeight"));t+=this.getScrollXHeight(),this.set("bodyHeight",t)},getDisplayRowCount:function(){return o.getDisplayRowCount(this.get("bodyHeight")-this.getScrollXHeight(),this.get("rowHeight"))},getScrollXHeight:function(){return this.get("scrollX")?this.get("scrollBarSize"):0},getScrollYWidth:function(){return this.get("scrollY")?this.get("scrollBarSize"):0},_onWidthChange:function(){var t=this._adjustColumnWidthList(this.get("columnWidthList"),!0);this._setColumnWidthVariables(t)},setColumnWidth:function(t,e){var i,n=this.get("columnWidthList"),o=this._columnWidthFixedFlags,s=this._minColumnWidthList[t];!o[t]&&n[t]&&(n[t]=Math.max(e,s),o[t]=!0,i=this._adjustColumnWidthList(n),o[t]=!1,this._setColumnWidthVariables(i))},_calcRealBodyHeight:function(t){return t-this.get("headerHeight")-this.get("toolbarHeight")-s},_getMinBodyHeight:function(){return this.get("rowHeight")+2*a+this.getScrollXHeight()},_setHeight:function(t){this.set("bodyHeight",Math.max(this._calcRealBodyHeight(t),this._getMinBodyHeight())),this.set("displayRowCount",this.getDisplayRowCount(),{silent:!0})},setSize:function(t,e){t>0&&this.set("width",t),e>0&&this._setHeight(e),this.trigger("setSize")},getHeight:function(){return this.get("bodyHeight")+this.get("headerHeight")+this.get("toolbarHeight")},refreshLayout:function(){var t=this.domState,e=t.getOffset();this.set({offsetTop:e.top,offsetLeft:e.left,width:t.getWidth()})},restoreColumnWidth:function(t){var e=this.get("originalWidthList")[t];this.setColumnWidth(t,e)},getColumnWidthList:function(t){var e=this.columnModel.getVisibleColumnFixCount(!0),i=[];switch(t){case"l":case"L":i=this.get("columnWidthList").slice(0,e);break;case"r":case"R":i=this.get("columnWidthList").slice(e);break;default:i=this.get("columnWidthList")}return i}});e.exports=l},{"../base/model":5,"../common/util":10}],18:[function(t,e,i){"use strict";var n=t("../base/model"),o=t("../common/util"),s=n.extend({initialize:function(t,e){n.prototype.initialize.apply(this,arguments),this.dataModel=e.dataModel,this.columnModel=e.columnModel,this.dimensionModel=e.dimensionModel,this.renderModel=e.renderModel,this.cellFactory=e.cellFactory,this.domState=e.domState},defaults:{rowKey:null,columnName:"",prevRowKey:null,prevColumnName:""},_savePrevious:function(){return null!==this.get("rowKey")&&this.set("prevRowKey",this.get("rowKey")),this.get("columnName")&&this.set("prevColumnName",this.get("columnName")),this},_clearPrevious:function(){this.set({prevRowKey:null,prevColumnName:""})},select:function(t){return this.unselect().set("rowKey",t),"radio"===this.columnModel.get("selectType")&&this.dataModel.check(t),this.trigger("select",{rowKey:t,rowData:this.dataModel.getRowData(t)}),this},unselect:function(t){return t&&this.blur(),this.trigger("unselect",this.get("rowKey")),this.set({rowKey:null}),this},focus:function(t,e,i){return o.isBlank(t)||o.isBlank(e)||this.columnModel.isMetaColumn(e)||this.get("rowKey")===t&&this.get("columnName")===e?this:(this.blur().select(t).set("columnName",e).trigger("focus",t,e),i&&this.scrollToFocus(),this)},focusAt:function(t,e,i){var n=this.dataModel.at(t),o=this.columnModel.at(e,!0);n&&o&&this.focus(n.get("rowKey"),o.columnName,i)},focusIn:function(t,e,i){this.focus(t,e,i),t=this.dataModel.getMainRowKey(t,e),this.dataModel.get(t).isEditable(e)?this.trigger("focusIn",t,e):this.focusClipboard()},focusInAt:function(t,e,i){var n=this.dataModel.at(t),o=this.columnModel.at(e,!0);n&&o&&this.focusIn(n.get("rowKey"),o.columnName,i)},focusClipboard:function(){this.trigger("focusClipboard")},refreshState:function(){this.domState.hasFocusedElement()?this.has()||this.restore()||this.focusAt(0,0):this.blur()},scrollToFocus:function(){var t=this.get("rowKey"),e=this.get("columnName"),i=this.dimensionModel.getScrollPosition(t,e);tui.util.isEmpty(i)||this.renderModel.set(i)},blur:function(){return this.has()&&(this._savePrevious(),this.trigger("blur",this.get("rowKey"),this.get("columnName")),null!==this.get("rowKey")&&this.set("columnName","")),this},which:function(){return{rowKey:this.get("rowKey"),columnName:this.get("columnName")}},indexOf:function(t){var e=t?this.get("prevRowKey"):this.get("rowKey"),i=t?this.get("prevColumnName"):this.get("columnName");return{row:this.dataModel.indexOfRowKey(e),column:this.columnModel.indexOfColumnName(i,!0)}},has:function(){return this._isValidCell(this.get("rowKey"),this.get("columnName"))},restore:function(){var t=this.get("prevRowKey"),e=this.get("prevColumnName"),i=!1;return this._isValidCell(t,e)&&(this.focus(t,e),i=!0),i},_isValidCell:function(t,e){var i=!o.isBlank(t)&&!!this.dataModel.get(t),n=!o.isBlank(e)&&!!this.columnModel.getColumnModel(e);return i&&n},_findRowKey:function(t){var e,i,n=this.dataModel;return this.has()?(e=Math.max(Math.min(n.indexOfRowKey(this.get("rowKey"))+t,this.dataModel.length-1),0),i=n.at(e),i&&i.get("rowKey")):void 0},_findColumnName:function(t){var e,i=this.columnModel,n=i.getVisibleColumnModelList(),o=i.indexOfColumnName(this.get("columnName"),!0);return this.has()?(e=Math.max(Math.min(o+t,n.length-1),0),n[e]&&n[e].columnName):void 0},_getRowSpanData:function(t,e){return this.dataModel.get(t).getRowSpanData(e)},nextRowIndex:function(t){var e=this.nextRowKey(t);return this.dataModel.indexOfRowKey(e)},prevRowIndex:function(t){var e=this.prevRowKey(t);return this.dataModel.indexOfRowKey(e)},nextColumnIndex:function(){var t=this.nextColumnName();return this.columnModel.indexOfColumnName(t,!0)},prevColumnIndex:function(){var t=this.prevColumnName();return this.columnModel.indexOfColumnName(t,!0)},nextRowKey:function(t){var e,i,n=this.which(),o=n.rowKey;return t="number"==typeof t?t:1,t>1?(o=this._findRowKey(t),i=this._getRowSpanData(o,n.columnName),i.isMainRow||(o=this._findRowKey(i.count+t))):(i=this._getRowSpanData(o,n.columnName),i.isMainRow&&i.count>0?o=this._findRowKey(i.count):i.isMainRow?o=this._findRowKey(1):(e=i.count,i=this._getRowSpanData(i.mainRowKey,n.columnName),o=this._findRowKey(i.count+e))),o},prevRowKey:function(t){var e,i=this.which(),n=i.rowKey;return t="number"==typeof t?t:1,t*=-1,-1>t?(n=this._findRowKey(t),e=this._getRowSpanData(n,i.columnName),e.isMainRow||(n=this._findRowKey(e.count+t))):(e=this._getRowSpanData(n,i.columnName),n=e.isMainRow?this._findRowKey(-1):this._findRowKey(e.count-1)),n},nextColumnName:function(){return this._findColumnName(1)},prevColumnName:function(){return this._findColumnName(-1)},firstRowKey:function(){return this.dataModel.at(0).get("rowKey")},lastRowKey:function(){return this.dataModel.at(this.dataModel.length-1).get("rowKey")},firstColumnName:function(){var t=this.columnModel.getVisibleColumnModelList();return t[0].columnName},lastColumnName:function(){var t=this.columnModel.getVisibleColumnModelList(),e=t.length-1;return t[e].columnName}});e.exports=s},{"../base/model":5,"../common/util":10}],19:[function(t,e,i){"use strict";var n=t("./data/columnModel"),o=t("./data/rowList"),s=t("./toolbar"),a=t("./dimension"),l=t("./focus"),r=t("./renderer"),u=t("./renderer-smart"),d=t("./selection"),c=(t("../common/util"),t("../common/constMap").renderState,{columnFixCount:0,columnModelList:[],keyColumnName:null,selectType:"",autoNumbering:!0,headerHeight:35,rowHeight:27,displayRowCount:10,minimumColumnWidth:50,notUseSmartRendering:!1,columnMerge:[],scrollX:!0,scrollY:!0,useClientSort:!0,singleClickEdit:!1,toolbar:{hasResizeHandler:!0,hasControlPanel:!0,hasPagination:!0}}),h=tui.util.defineClass({init:function(t,e){t=$.extend(!0,{},c,t),this.gridId=t.gridId,this.columnModel=this._createColumnModel(t),this.dataModel=this._createDataModel(t,e),this.toolbarModel=this._createToolbarModel(t),this.dimensionModel=this._createDimensionModel(t,e),this.renderModel=this._createRenderModel(t),this.focusModel=this._createFocusModel(e),this.selectionModel=this._createSelectionModel(),this.dimensionModel.renderModel=this.renderModel},_createColumnModel:function(t){return new n({hasNumberColumn:t.autoNumbering,keyColumnName:t.keyColumnName,columnFixCount:t.columnFixCount,selectType:t.selectType,columnMerge:t.columnMerge,columnModelList:t.columnModelList})},_createDataModel:function(t,e){return new o([],{gridId:this.gridId,domState:e,columnModel:this.columnModel,useClientSort:t.useClientSort})},_createToolbarModel:function(t){return new s(t.toolbar)},_createDimensionModel:function(t,e){var i={headerHeight:t.headerHeight,rowHeight:t.rowHeight,scrollX:!!t.scrollX,scrollY:!!t.scrollY,minimumColumnWidth:t.minimumColumnWidth,displayRowCount:t.displayRowCount};return this.toolbarModel.isVisible()||(i.toolbarHeight=0),new a(i,{columnModel:this.columnModel,dataModel:this.dataModel,domState:e})},_createFocusModel:function(t){return new l(null,{columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel,renderModel:this.renderModel,domState:t})},_createSelectionModel:function(){return new d(null,{columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel,renderModel:this.renderModel,focusModel:this.focusModel})},_createRenderModel:function(t){var e,i,n;return e={emptyMessage:t.emptyMessage},i={columnModel:this.columnModel,dataModel:this.dataModel,dimensionModel:this.dimensionModel},new(n=t.notUseSmartRendering?r:u)(e,i)},destroy:function(){_.each(this,function(t,e){t&&tui.util.isFunction(t._destroy)&&t._destroy(),t&&tui.util.isFunction(t.stopListening)&&t.stopListening(),this[e]=null},this)}});e.exports=h},{"../common/constMap":8,"../common/util":10,"./data/columnModel":13,"./data/rowList":16,"./dimension":17,"./focus":18,"./renderer":21,"./renderer-smart":20,"./selection":24,"./toolbar":25}],20:[function(t,e,i){"use strict";var n=t("./renderer"),o=t("../common/util"),s=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.on("change:scrollTop",this._onChange,this),this.listenTo(this.dimensionModel,"change:bodyHeight",this._onChange,this),this.setOwnProperties({hiddenRowCount:10,criticalPoint:3})},_onChange:function(){this._isRenderable(this.get("scrollTop"))&&this.refresh()},_setRenderingRange:function(t){var e,i=this.dimensionModel,n=this.dataModel,s=i.get("rowHeight"),a=i.getDisplayRowCount(),l=Math.max(0,Math.ceil(t/(s+1))-this.hiddenRowCount),r=Math.min(n.length-1,l+a+2*this.hiddenRowCount);n.isRowSpanEnable()&&(l+=this._getStartRowSpanMinCount(l),r+=this._getEndRowSpanMaxCount(r)),e=0===l?0:o.getHeight(l,s)-1,this.set({top:e,startIndex:l,endIndex:r})},_getStartRowSpanMinCount:function(t){var e,i=this.dataModel.at(t),n=0;return i&&(e=_.pluck(i.getRowSpanData(),"count"),e.push(0),n=_.min(e)),n},_getEndRowSpanMaxCount:function(t){var e,i=this.dataModel.at(t),n=0;return i&&(e=_.pluck(i.getRowSpanData(),"count"),e.push(0),n=_.max(e)),n},_isRenderable:function(t){var e=this.dimensionModel,i=this.dataModel,n=e.get("rowHeight"),o=e.get("bodyHeight"),s=i.length,a=Math.max(0,Math.ceil(t/(n+1))),l=Math.min(i.length-1,Math.floor((t+o)/(n+1))),r=this.get("startIndex"),u=this.get("endIndex");return 0!==r&&r+this.criticalPoint>a?!0:u!==s-1&&u-this.criticalPoint<l?!0:!1}});e.exports=s},{"../common/util":10,"./renderer":21}],21:[function(t,e,i){"use strict";var n=t("../base/model"),o=t("./rowList"),s=t("../common/constMap").renderState,a=n.extend({initialize:function(t,e){var i,n,s;this.setOwnProperties({dataModel:e.dataModel,columnModel:e.columnModel,dimensionModel:e.dimensionModel,timeoutIdForRefresh:0,isColumnModelChanged:!1}),s={dataModel:this.dataModel,columnModel:this.columnModel},i=new o([],s),n=new o([],s),this.set({lside:i,rside:n}),this.listenTo(this.columnModel,"all",this._onColumnModelChange).listenTo(this.dataModel,"add remove sort reset",this._onRowListChange).listenTo(this.dataModel,"beforeReset",this._onBeforeResetData).listenTo(i,"valueChange",this._onValueChange).listenTo(n,"valueChange",this._onValueChange).listenTo(this.dimensionModel,"change:width",this._updateMaxScrollLeft).listenTo(this.dimensionModel,"change:totalRowHeight change:scrollBarSize change:bodyHeight",this._updateMaxScrollTop),this._updateMaxScrollLeft()},defaults:{top:0,scrollTop:0,scrollLeft:0,maxScrollLeft:0,maxScrollTop:0,startIndex:0,endIndex:0,startNumber:1,lside:null,rside:null,emptyMessage:null,state:s.EMPTY},_onValueChange:function(t){this.executeRelation(t)},_updateMaxScrollLeft:function(){var t=this.dimensionModel;this.set("maxScrollLeft",t.getFrameWidth("R")-t.get("rsideWidth"))},_updateMaxScrollTop:function(){var t=this.dimensionModel,e=t.get("totalRowHeight")-t.get("bodyHeight")+t.get("scrollBarSize");this.set("maxScrollTop",e)},_onBeforeResetData:function(){this.set("state",s.LOADING)},initializeVariables:function(){this.set({top:0,scrollTop:0,$scrollTarget:null,scrollLeft:0,startIndex:0,endIndex:0,startNumber:1})},getCollection:function(t){return this.get(tui.util.isString(t)?t.toLowerCase()+"side":"rside")},_onColumnModelChange:function(){this.set({scrollTop:0,top:0,startIndex:0,endIndex:0}),this.isColumnModelChanged=!0,clearTimeout(this.timeoutIdForRefresh),this.timeoutIdForRefresh=setTimeout($.proxy(this.refresh,this),0)},_onRowListChange:function(){clearTimeout(this.timeoutIdForRefresh),this.timeoutIdForRefresh=setTimeout($.proxy(this.refresh,this,!0),0)},_setRenderingRange:function(){this.set({startIndex:0,endIndex:this.dataModel.length-1})},refresh:function(t){this._setRenderingRange(this.get("scrollTop"));var e,i,n,o,s=this.columnModel.getVisibleColumnFixCount(!0),a=this.columnModel.getVisibleColumnModelList(null,!0),l=_.pluck(a,"columnName"),r=l.slice(0,s),u=l.slice(s),d=[],c=[],h=[],m=[],g=this.get("startIndex"),f=this.get("endIndex"),p=this.get("startNumber")+g;for(i=g;f+1>i;i+=1)n=this.dataModel.at(i),n&&(o=n.get("rowKey"),h={_extraData:n.get("_extraData"),rowKey:o},m={_extraData:n.get("_extraData"),rowKey:o},_.each(r,function(t){"_number"===t?h[t]=p++:h[t]=n.get(t)}),_.each(u,function(t){"_number"===t?m[t]=p++:m[t]=n.get(t)}),d.push(h),c.push(m));for(this.get("lside").clear().reset(d,{parse:!0}),this.get("rside").clear().reset(c,{parse:!0}),e=c.length+g,i=g;e>i;i+=1)this.executeRelation(i);this.isColumnModelChanged?(this.trigger("columnModelChanged"),this.isColumnModelChanged=!1):this.trigger("rowListChanged",t),this._refreshState(),this.trigger("refresh")},_refreshState:function(){this.dataModel.length?this.set("state",s.DONE):this.set("state",s.EMPTY)},_getCollectionByColumnName:function(t){var e,i=this.get("lside");return e=i.at(0)&&i.at(0).get(t)?i:this.get("rside")},getCellData:function(t,e){var i=this._getCollectionByColumnName(e),n=i.get(t);return n?n.get(e):void 0},executeRelation:function(t){var e,i,n=this.dataModel.at(t),o=t-this.get("startIndex");i=n.getRelationResult(),_.each(i,function(t,i){e=this._getCollectionByColumnName(i).at(o),e&&e.setCell(i,t)},this)},_destroy:function(){clearTimeout(this.timeoutIdForRefresh)}});e.exports=a},{"../base/model":5,"../common/constMap":8,"./rowList":23}],22:[function(t,e,i){"use strict";var n=t("../base/model"),o=t("../common/util"),s=n.extend({initialize:function(t,e){var i,n;i=t&&t.rowKey,n=this.collection.dataModel.get(i),n&&(this.listenTo(n,"change restore",this._onDataModelChange),this.listenTo(n,"extraDataChanged",this._setRowExtraData))},idAttribute:"rowKey",_onDataModelChange:function(t){_.each(t.changed,function(t,e){this.setCell(e,{value:t})},this)},_setRowExtraData:function(){var t,e=this.collection.dataModel,i=e.get(this.get("rowKey")),n=this.collection.columnModel.getVisibleColumnModelList(null,!0),o=i.getRowState();tui.util.isUndefined(this.collection)||_.each(n,function(n){var s,a,l=n.columnName,r=this.get(l),u=this;tui.util.isUndefined(r)||(s=i.isEditable(l),a="_button"===l?o.isDisabledCheck:o.isDisabled,e.isRowSpanEnable()&&!r.isMainRow&&(u=this.collection.get(r.mainRowKey)),u&&(t={isDisabled:a,isEditable:s,className:i.getClassNameList(l).join(" ")},u.setCell(l,t)))},this)},parse:function(t,e){return this._formatData(t,e.collection.dataModel)},_formatData:function(t,e){var i=t.rowKey,n=e.get(i),o=n.getRowState(),s=o.isDisabled;return _.each(t,function(a,l){var r,u=n.isEditable(l);"rowKey"!==l&&"_extraData"!==l&&(r=e.isRowSpanEnable()&&t._extraData&&t._extraData.rowSpanData&&t._extraData.rowSpanData[l]?t._extraData.rowSpanData[l]:{mainRowKey:i,count:0,isMainRow:!0},s="_button"===l?o.isDisabledCheck:s,t[l]={rowKey:i,columnName:l,value:a,rowSpan:r.count,isMainRow:r.isMainRow,mainRowKey:r.mainRowKey,isEditable:u,isDisabled:s,optionList:[],className:n.getClassNameList(l).join(" "),changed:[]})},this),t},setCell:function(t,e){var i,n,s,a=!1,l=[];this.get(t)&&(n=this.get("rowKey"),s=_.clone(this.get(t)),_.each(e,function(t,e){o.isEqual(s[e],t)||(a="value"===e?!0:a,s[e]=t,l.push(e))},this),
l.length&&(s.changed=l,this.set(t,s),a&&(i=this.collection.dataModel.indexOfRowKey(n),this.trigger("valueChange",i))))}});e.exports=s},{"../base/model":5,"../common/util":10}],23:[function(t,e,i){"use strict";var n=t("../base/collection"),o=t("./row"),s=n.extend({model:o,initialize:function(t,e){this.setOwnProperties({dataModel:e.dataModel,columnModel:e.columnModel})}});e.exports=s},{"../base/collection":3,"./row":22}],24:[function(t,e,i){"use strict";var n=t("../base/model"),o=t("../common/util"),s={cell:"cell",row:"row",column:"column"},a=n.extend({initialize:function(t,e){n.prototype.initialize.apply(this,arguments),this.setOwnProperties({dataModel:e.dataModel,columnModel:e.columnModel,dimensionModel:e.dimensionModel,focusModel:e.focusModel,renderModel:e.renderModel,inputRange:null,intervalIdForAutoScroll:null,scrollPixelScale:40,_isEnabled:!0,_selectionState:s.cell}),this.listenTo(this.dataModel,"add remove sort reset",this.end),this.listenTo(this.dataModel,"paste",this._onPasteData)},defaults:{range:null},_onPasteData:function(t){this.start(t.startIdx.row,t.startIdx.column),this.update(t.endIdx.row,t.endIdx.column)},setState:function(t){this._selectionState=s[t]||this._selectionState},getState:function(){return this._selectionState},enable:function(){this._isEnabled=!0},disable:function(){this.end(),this._isEnabled=!1},isEnabled:function(){return this._isEnabled},start:function(t,e,i){this._isEnabled&&(this.setState(i),this.inputRange={row:[t,t],column:[e,e]},this._resetRangeAttribute())},startByMousePosition:function(t,e,i){var n=this.dimensionModel.getIndexFromMousePosition(t,e);this.start(n.row,n.column,i)},update:function(t,e,i){var n;!this._isEnabled||0>t||0>e||(this.hasSelection()?this.setState(i):(n=this.focusModel.indexOf(),this.start(n.row,n.column,i)),this._updateInputRange(t,e),this._resetRangeAttribute())},_updateInputRange:function(t,e){var i=this.inputRange;i.row[1]=t,i.column[1]=e},extendColumnSelection:function(t,e,i){var n,s=this._minimumColumnRange,a=this.dimensionModel.getIndexFromMousePosition(e,i),l={row:[0,0],column:[]};t&&t.length||(t=[a.column]),this._setScrolling(e,i),s?n=o.getMinMax(t.concat(s)):(t.push(this.inputRange.column[0]),n=o.getMinMax(t)),l.column.push(n.min,n.max),this._resetRangeAttribute(l)},_setScrolling:function(t,e){var i=this.dimensionModel.getOverflowFromMousePosition(t,e);this.stopAutoScroll(),this._isAutoScrollable(i.x,i.y)&&(this.intervalIdForAutoScroll=setInterval(_.bind(this._adjustScroll,this,i.x,i.y)))},updateByMousePosition:function(t,e,i){var n=this.dimensionModel.getIndexFromMousePosition(t,e);this._setScrolling(t,e),this.update(n.row,n.column,i)},end:function(){this.inputRange=null,this.unset("range"),this.unsetMinimumColumnRange()},stopAutoScroll:function(){_.isNull(this.intervalIdForAutoScroll)||(clearInterval(this.intervalIdForAutoScroll),this.intervalIdForAutoScroll=null)},selectRow:function(t){this._isEnabled&&(this.focusModel.focusAt(t,0),this.start(t,0,s.row),this.update(t,this.columnModel.getVisibleColumnModelList().length-1))},selectColumn:function(t){this._isEnabled&&(this.focusModel.focusAt(0,t),this.start(0,t,s.column),this.update(this.dataModel.length-1,t))},selectAll:function(){this._isEnabled&&(this.start(0,0,s.cell),this.update(this.dataModel.length-1,this.columnModel.getVisibleColumnModelList().length-1))},getStartIndex:function(){var t=this.get("range");return{row:t.row[0],column:t.column[0]}},getEndIndex:function(){var t=this.get("range");return{row:t.row[1],column:t.column[1]}},hasSelection:function(){return!!this.get("range")},getValuesToString:function(){var t,e,i,n,o=this.get("range");return t=this.columnModel.getVisibleColumnModelList().slice(o.column[0],o.column[1]+1),e=this.dataModel.slice(o.row[0],o.row[1]+1),i=_.pluck(t,"columnName"),n=_.map(e,function(t){var e=_.map(i,function(e){return t.getVisibleText(e)});return e.join("	")}),n.join("\n")},_isAutoScrollable:function(t,e){return!(0===t&&0===e)},_adjustScroll:function(t,e){var i=this.renderModel;t&&this._adjustScrollLeft(t,i.get("scrollLeft"),i.get("maxScrollLeft")),e&&this._adjustScrollTop(e,i.get("scrollTop"),i.get("maxScrollTop"))},_adjustScrollLeft:function(t,e,i){var n=e,o=this.scrollPixelScale;0>t?n=Math.max(0,e-o):t>0&&(n=Math.min(i,e+o)),this.renderModel.set("scrollLeft",n)},_adjustScrollTop:function(t,e,i){var n=e,o=this.scrollPixelScale;0>t?n=Math.max(0,e-o):t>0&&(n=Math.min(i,e+o)),this.renderModel.set("scrollTop",n)},_resetRangeAttribute:function(t){var e,i,n,o=this.dataModel;if(t=t||this.inputRange,!t)return void this.set("range",null);if(i={row:_.sortBy(t.row),column:_.sortBy(t.column)},o.isRowSpanEnable())do n=_.assign([],i.row),i=this._getRowSpannedIndex(i),e=i.row[0]!==n[0]||i.row[1]!==n[1];while(e);switch(this._setRangeMinMax(i.row,i.column),this._selectionState){case s.column:i.row=[0,o.length-1];break;case s.row:i.column=[0,this.columnModel.getVisibleColumnModelList().length-1];break;case s.cell:}this.set("range",i)},setMinimumColumnRange:function(t){this._minimumColumnRange=_.extend(t)},unsetMinimumColumnRange:function(){this._minimumColumnRange=null},_setRangeMinMax:function(t,e){t&&(t[0]=Math.max(0,t[0]),t[1]=Math.min(this.dataModel.length-1,t[1])),e&&(e[0]=Math.max(0,e[0]),e[1]=Math.min(this.columnModel.getVisibleColumnModelList().length-1,e[1]))},_concatRowSpanIndexFromStart:function(t){var e,i=t.startIndex,n=t.endIndex,o=t.columnName,s=t.startRowSpanDataMap&&t.startRowSpanDataMap[o],a=t.startIndexList,l=t.endIndexList;s&&(s.isMainRow?(e=i+s.count-1,e>n&&l.push(e)):(e=i+s.count,a.push(e)))},_concatRowSpanIndexFromEnd:function(t){var e,i,n=t.endIndex,o=t.columnName,s=t.endRowSpanDataMap&&t.endRowSpanDataMap[o],a=t.endIndexList,l=t.dataModel;s&&(s.isMainRow?(e=n+s.count-1,a.push(e)):(e=n+s.count,i=l.at(e).getRowSpanData(o),e+=i.count-1,e>n&&a.push(e)))},_getRowSpannedIndex:function(t){var e,i,n,o,s=this.columnModel.getVisibleColumnModelList().slice(t.column[0],t.column[1]+1),a=this.dataModel,l=[t.row[0]],r=[t.row[1]],u=a.at(t.row[0]),d=a.at(t.row[1]),c=$.extend({},t);return u&&d?(e=a.at(t.row[0]).getRowSpanData(),i=a.at(t.row[1]).getRowSpanData(),_.each(s,function(s){n=s.columnName,o={columnName:n,startIndex:t.row[0],endIndex:t.row[1],endRowSpanDataMap:i,startRowSpanDataMap:e,startIndexList:l,endIndexList:r,dataModel:a},this._concatRowSpanIndexFromStart(o),this._concatRowSpanIndexFromEnd(o)},this),c.row=[Math.min.apply(null,l),Math.max.apply(null,r)],c):c}});e.exports=a},{"../base/model":5,"../common/util":10}],25:[function(t,e,i){"use strict";var n=t("../base/model"),o=(t("../common/util"),n.extend({initialize:function(t){n.prototype.initialize.apply(this,arguments)},defaults:{hasControlPanel:!1,hasPagination:!1,hasResizeHandler:!1,isExcelButtonVisible:!1,isExcelAllButtonVisible:!1,pagination:null},isVisible:function(){return this.get("hasControlPanel")||this.get("hasPagination")||this.get("hasResizeHandler")}}));e.exports=o},{"../base/model":5,"../common/util":10}],26:[function(t,e,i){"use strict";var n=t("../base/painter"),o=t("../common/util"),s=t("../common/constMap").keyName,a=tui.util.defineClass(n,{init:function(){n.apply(this,arguments),this.setOwnProperties({_keyDownSwitch:$.extend({},this._defaultKeyDownSwitch)})},redrawAttributes:["isEditable","optionList","value"],template:_.template('<td columnname="<%=columnName%>" class="<%=className%>" edit-type="<%=editType%>" <% if(rowSpan) print("rowSpan=" + rowSpan )%><%=attributeString%>><%=contentHtml%></td>'),_defaultKeyDownSwitch:{ESC:function(t,e){this.focusOut(e.$target)},ENTER:function(t,e){this.focusOut(e.$target)},TAB:function(t,e){t.shiftKey?this.grid.focusModel.focusIn(e.rowKey,e.focusModel.prevColumnName(),!0):this.grid.focusModel.focusIn(e.rowKey,e.focusModel.nextColumnName(),!0)},defaultAction:function(){}},eventHandler:{},onModelChange:function(t,e){var i,n=e.find('td[columnname="'+t.columnName+'"]'),o=!1;tui.util.forEachArray(this.redrawAttributes,function(e){return-1!==$.inArray(e,t.changed)?(o=!0,!1):void 0},this),n.attr("class",this._getClassNameList(t).join(" "));try{i=!!n.find(":focus").length}catch(s){i=!1}o?(this.redraw(t,n,i),i&&this.focusIn(n)):this.setElementAttribute(t,n,i)},_getParamForKeyDownSwitch:function(t){var e=this.grid,i=t.keyCode||t.which,n=e.focusModel.which(),o=n.rowKey,a=n.columnName;return{keyDownEvent:t,$target:$(t.target),focusModel:e.focusModel,rowKey:o,columnName:a,keyName:s[i]}},_executeKeyDownSwitch:function(t){var e=t.keyCode||t.which,i=s[e],n=this._getParamForKeyDownSwitch(t);return(this._keyDownSwitch[i]||this._keyDownSwitch.defaultAction).call(this,t,n),!!this._keyDownSwitch[i]},setKeyDownSwitch:function(t,e){"object"==typeof t?this._keyDownSwitch=$.extend(this._keyDownSwitch,t):this._keyDownSwitch[t]=e},_onKeyDown:function(t){this._executeKeyDownSwitch(t)&&t.preventDefault()},_getClassNameList:function(t){var e=this.grid.focusModel.which(),i=t.columnName,n=this.grid.dataModel.getMainRowKey(e.rowKey,i),o=[],s={},a={_button:!0,_number:!0},l=!!a[i];return n===t.rowKey&&(s.selected=!0,e.columnName===i&&(s.focused=!0)),t.className&&(s[t.className]=!0),t.isEditable&&!l&&(s.editable=!0),t.isDisabled&&(s.disabled=!0),tui.util.forEach(s,function(t,e){o.push(e)}),l&&o.push("meta_column"),o},_getContentHtml:function(t){var e,i,n,o=t.columnName,s=this.grid.columnModel.getColumnModel(o),a=s.editOption||{},l=s.defaultValue,r=tui.util.isExisty;return r(t.value)||(t.value=r(l)?defulatValue:""),e=this._getExtraContent(a.beforeContent||a.beforeText,t),i=this._getExtraContent(a.afterContent||a.afterText,t),n=e+this.getContentHtml(t)+i},_getExtraContent:function(t,e){var i,n,o=t;return tui.util.isFunction(t)&&(i=this.grid.dataModel.get(e.rowKey),n=i.getHTMLEncodedString(e.columnName),o=t(n,i.attributes)),tui.util.isExisty(o)||(o=""),o},_getSpanWrapContent:function(t,e){return tui.util.isFalsy(t)&&(t=""),'<span class="'+e+'">'+t+"</span>"},getHtml:function(t){var e,i=o.getAttributesString(this.getAttributes(t));return e=this.template({columnName:t.columnName,rowSpan:t.rowSpan,className:this._getClassNameList(t).join(" "),editType:this.getEditType(),attributeString:i,contentHtml:this._getContentHtml(t)})},redraw:function(t,e){var i={"class":this._getClassNameList(t).join(" ")};t.rowSpan&&(i.rowSpan=t.rowSpan),i["edit-type"]=this.getEditType(),i=$.extend(i,this.getAttributes(t)),e.attr(i),e.html(this._getContentHtml(t))},_getCellData:function(t){var e=this._getCellAddress(t);return this.grid.renderModel.getCellData(e.rowKey,e.columnName)},_getCellAddress:function(t){return{rowKey:this.getRowKey(t),columnName:this.getColumnName(t)}},_getConvertedHtml:function(t,e){var i,n=this.getColumnModel(e),o=n.editOption;return o&&tui.util.isFunction(o.converter)&&(i=o.converter(t,this.grid.dataModel.get(e.rowKey).attributes)),tui.util.isFalsy(i)&&(i=null),i},getColumnName:function(t){return t.closest("td").attr("columnName")},getRowKey:function(t){return t.closest("tr").attr("key")},getColumnModel:function(t){return this.grid.columnModel.getColumnModel(t.columnName)},getAttributes:function(t){var e=this.getColumnModel(t);return{align:e.align||"left"}},focusOut:function(){this.grid.focusModel.focusClipboard()},getEditType:function(){return"normal"},focusIn:function(t){},getContentHtml:function(t){return""},setElementAttribute:function(t,e,i){}});e.exports=a},{"../base/painter":6,"../common/constMap":8,"../common/util":10}],27:[function(t,e,i){"use strict";var n=t("./list"),o=t("../../common/util"),s=tui.util.defineClass(n,{init:function(){n.apply(this,arguments),this.setKeyDownSwitch({UP_ARROW:function(){},DOWN_ARROW:function(){},PAGE_UP:function(){},PAGE_DOWN:function(){},ENTER:function(t,e){e.$target.trigger("click")},LEFT_ARROW:function(t,e){this._focusPrevInput(e.$target)},RIGHT_ARROW:function(t,e){this._focusNextInput(e.$target)},ESC:function(t,e){this.focusOut(e.$target)},TAB:function(t,e){t.shiftKey?this._focusPrevInput(e.$target)||this.grid.focusModel.focusIn(e.rowKey,e.focusModel.prevColumnName(),!0):this._focusNextInput(e.$target)||this.grid.focusModel.focusIn(e.rowKey,e.focusModel.nextColumnName(),!0)}})},eventHandler:{"change input":"_onChange","keydown input":"_onKeyDown"},getEditType:function(){return"button"},contentTemplate:_.template('<input type="<%=type%>" name="<%=name%>" id="<%=id%>" value="<%=value%>" <% if (isChecked) print("checked"); %> <% if (isDisabled) print("disabled"); %>/>'),labelTemplate:_.template('<label for="<%=id%>" style="margin-right:10px;"><%=labelText%></label>'),focusIn:function(t){t.find("input").eq(0).prop("disabled")?this.grid.focusModel.focusClipboard():t.find("input").eq(0).focus()},getContentHtml:function(t){var e,i=this.getOptionList(t),n=this.grid.columnModel.getColumnModel(t.columnName),s=t.value,a=(""+s).split(","),l={},r=this._getConvertedHtml(s,t),u=o.getUniqueKey(),d=t.isDisabled,c=n.editOption.type;return _.isNull(r)&&(r="",_.each(a,function(t){l[t]=!0}),_.each(i,function(t){e=u+"_"+t.value,r+=this.contentTemplate({type:c,name:u,id:e,value:t.value,isChecked:!!l[t.value],isDisabled:d}),t.text&&(r+=this.labelTemplate({id:e,labelText:t.text}))},this)),r},setElementAttribute:function(t,e){var i=t.value,n=(""+i).split(",");e.find("input:checked").prop("checked",!1),tui.util.forEachArray(n,function(t){e.find('input[value="'+t+'"]').prop("checked",!0)})},_focusNextInput:function(t){return this._focusTargetInput(t,"next")},_focusPrevInput:function(t){return this._focusTargetInput(t,"prev")},_focusTargetInput:function(t,e){var i,n=t,o=!1;"next"===e?i=function(t){return t.next()}:"prev"===e&&(i=function(t){return t.prev()});do n=i(n);while(n.length&&!n.is("input"));return n.length&&(n.focus(),o=!0),o},_getCheckedValueList:function(t){var e=t.closest("td").find("input:checked"),i=[];return tui.util.forEachArray(e,function(t,n){i.push(e.eq(n).val())}),i},_onChange:function(t){var e=$(t.target),i=this._getCellAddress(e);this.grid.dataModel.setValue(i.rowKey,i.columnName,this._getCheckedValueList(e).join(","))}});e.exports=s},{"../../common/util":10,"./list":28}],28:[function(t,e,i){"use strict";var n=t("../cell"),o=tui.util.defineClass(n,{init:function(){n.apply(this,arguments)},redrawAttributes:["isDisabled","isEditable","optionList"],eventHandler:{},getEditType:function(){},focusIn:function(t){},getContentHtml:function(t){throw this.error("Implement getContentHtml(cellData, $target) method. On re-rendering")},setElementAttribute:function(t,e,i){throw this.error("Implement setElementAttribute(cellData, $target) method. ")},getOptionList:function(t){var e=this.grid.columnModel.getColumnModel(t.columnName);return t.optionList&&t.optionList.length?t.optionList:e.editOption.list}});e.exports=o},{"../cell":26}],29:[function(t,e,i){"use strict";var n=t("../cell"),o=tui.util.defineClass(n,{init:function(){n.apply(this,arguments),this.setKeyDownSwitch({UP_ARROW:function(){},DOWN_ARROW:function(){},ENTER:function(t,e){this.focusOut(e.$target)},LEFT_ARROW:function(){},RIGHT_ARROW:function(){},ESC:function(){}})},redrawAttributes:["isDisabled","isEditable","optionList"],eventHandler:{mousedown:"_onMouseDown","change input":"_onChange","keydown input":"_onKeyDown"},contentTemplate:_.template('<input type="<%=type%>" name="<%=name%>" <% if (isChecked) print("checked") %> <% if (isDisabled) print("disabled") %>/>'),getEditType:function(){return"_button"},getContentHtml:function(t){var e=t.isDisabled;return this.contentTemplate({type:this.grid.columnModel.get("selectType"),name:this.grid.id,isChecked:!!t.value,isDisabled:e})},focusIn:function(){},setElementAttribute:function(t,e){var i=e.find("input"),n=i.prop("checked");n!==!!t.value&&i.prop("checked",t.value)},toggle:function(t){var e=t.find("input");"checkbox"===this.grid.columnModel.get("selectType")&&e.prop("checked",!e.prop("checked"))},getAttributes:function(){return{align:"center"}},_onChange:function(t){var e=$(t.target),i=this.getRowKey(e);this.grid.dataModel.setValue(i,"_button",e.prop("checked"))},_onMouseDown:function(t){var e=$(t.target);e.is("input")||e.find("input").trigger("click")}});e.exports=o},{"../cell":26}],30:[function(t,e,i){"use strict";var n=t("../cell"),o=tui.util.defineClass(n,{init:function(){n.apply(this,arguments)},getEditType:function(){return"normal"},getContentHtml:function(t){var e=t.columnName,i=this.grid.columnModel.getColumnModel(e),n=this.grid.dataModel.get(t.rowKey).getHTMLEncodedString(e),o=t.rowKey;return tui.util.isFunction(i.formatter)&&(n=i.formatter(n,this.grid.dataModel.get(o).toJSON(),i)),tui.util.isExisty(n)||(n=""),n},focusIn:function(){this.grid.focusModel.focusClipboard()},setElementAttribute:function(t,e,i){}});e.exports=o},{"../cell":26}],31:[function(t,e,i){"use strict";var n=t("./normal"),o=tui.util.defineClass(n,{init:function(){n.apply(this,arguments)},redrawAttributes:[],getEditType:function(){return"_number"},getContentHtml:function(t){return t.value}});e.exports=o},{"./normal":30}],32:[function(t,e,i){"use strict";var n=t("./list"),o=t("../../common/util"),s=tui.util.defineClass(n,{init:function(){n.apply(this,arguments),this.setKeyDownSwitch({ESC:function(t,e){this.focusOut(e.$target)},ENTER:function(t,e){this.focusOut(e.$target)}})},eventHandler:{"change select":"_onChange","keydown select":"_onKeyDown"},contentTemplate:_.template('<select name="<%=name%>" <% if (isDisabled) print("disabled"); %>><%=options%></select>'),optionTemplate:_.template('<option value="<%=value%>" <% if (cellDataValue == value)  print("selected"); %>><%=text%></option>'),getEditType:function(){return"select"},focusIn:function(t){t.find("select").prop("disabled")?this.grid.focusModel.focusClipboard():t.find("select").eq(0).focus()},getContentHtml:function(t){var e=this.getOptionList(t),i=t.isDisabled,n=this._getConvertedHtml(t.value,t),s="";return tui.util.isNull(n)&&(_.each(e,function(e){s+=this.optionTemplate({value:e.value,cellDataValue:t.value,text:e.text})},this),n=this.contentTemplate({name:o.getUniqueKey(),isDisabled:i,options:s})),n},_getContentHtml:function(t){var e,i,n=t.columnName,o=this.grid.columnModel.getColumnModel(n),s=o.editOption||{},a="";return tui.util.isExisty(t.value)||(t.value=o.defaultValue),e=this._getExtraContent(s.beforeContent||s.beforeText,t),i=this._getExtraContent(s.afterContent||s.afterText,t),e&&(a+=this._getSpanWrapContent(e,"before",t)),i&&(a+=this._getSpanWrapContent(i,"after",t)),a+=this._getSpanWrapContent(this.getContentHtml(t),"input")},setElementAttribute:function(t,e,i){var n=e.find("select");i&&n.blur(),n.val(t.value),i&&n.focus()},_onChange:function(t){var e=$(t.target),i=this._getCellAddress(e),n=this.grid;n.dataModel.setValue(i.rowKey,i.columnName,e.val())}});e.exports=s},{"../../common/util":10,"./list":28}],33:[function(t,e,i){"use strict";var n=t("../cell"),o=t("./text"),s=t("../../common/util"),a=t("../../common/formUtil"),l=tui.util.defineClass(o,{init:function(){o.apply(this,arguments),this.setOwnProperties({timeoutIdForClick:0,editingCell:{rowKey:null,columnName:""},clicked:{rowKey:null,columnName:null}})},redrawAttributes:["isDisabled","isEditable","value"],eventHandler:{dblclick:"_onDblClick",mousedown:"_onMouseDown","blur input":"_onBlurConvertible","keydown input":"_onKeyDown","focus input":"_onFocus","selectstart input":"_onSelectStart"},contentTemplate:_.template('<span class="input"><input type="<%=type%>" value="<%=value%>" name="<%=name%>" align="center" maxLength="<%=maxLength%>" <% if (isDisabled) print("disabled") %>/></span>'),getEditType:function(){return"text-convertible"},focusIn:function(t){this._startEdit(t)},focusOut:function(){this.grid.focusModel.focusClipboard()},getContentHtml:function(t){var e=this.getColumnModel(t),i=this.grid.dataModel.get(t.rowKey).getHTMLEncodedString(t.columnName);return tui.util.isUndefined(i)&&(i=""),this._isEditingCell(t)?this.contentTemplate({type:this._getInputType(),value:i,name:s.getUniqueKey(),isDisabled:t.isDisabled,maxLength:e.editOption.maxLength}):(tui.util.isFunction(e.formatter)&&(i=e.formatter(i,this.grid.dataModel.get(t.rowKey).attributes,e)),i)},_getContentHtml:function(t){var e;return e=this._isEditingCell(t)?o.prototype:n.prototype,e._getContentHtml.call(this,t)},_isEditingCell:function(t){var e=this.editingCell;return!(e.rowKey!==t.rowKey.toString()||e.columnName!==t.columnName.toString())},setElementAttribute:function(t,e,i){},_onBlurConvertible:function(t){var e=$(t.target),i=e.closest("td"),n=this.grid.focusModel;this._onBlur(t),this._endEdit(i),_.defer(function(){n.refreshState()})},_startEdit:function(t){var e,i,n,o;this._blurEditingCell(),i=this.getRowKey(t),n=this.getColumnName(t),o=this.grid.dataModel.get(i).getCellState(n),o.isEditable&&!o.isDisabled&&(this.editingCell={rowKey:i,columnName:n},this.redraw(this._getCellData(t),t),e=t.find("input"),this.originalText=e.val(),a.setCursorToEnd(e.get(0)),e.select())},_endEdit:function(t){var e=this._getCellData(t);this.editingCell={rowKey:null,columnName:null},this.clicked={rowKey:null,columnName:null},e&&this.redraw(e,t)},_blurEditingCell:function(){var t,e=this.editingCell.rowKey,i=this.editingCell.columnName;tui.util.isNull(e)||tui.util.isNull(i)||(t=this.grid.dataModel.getElement(e,i),t.find("input")[0].blur())},_onDblClick:function(t){var e=$(t.target),i=e.closest("td"),n=this._getCellAddress(i);this._isEditingCell(n)||this._startEdit(i)},_onMouseDown:function(t){$(t.target).is("input")&&t.stopPropagation()}});e.exports=l},{"../../common/formUtil":9,"../../common/util":10,"../cell":26,"./text":35}],34:[function(t,e,i){"use strict";var n=t("./text"),o=tui.util.defineClass(n,{init:function(t,e){n.apply(this,arguments)},_getInputType:function(){return"password"},getEditType:function(){return"text-password"}});e.exports=o},{"./text":35}],35:[function(t,e,i){"use strict";var n=t("../cell"),o=t("../../common/util"),s=t("../../common/formUtil"),a=tui.util.defineClass(n,{init:function(t,e){n.apply(this,arguments),this.setOwnProperties({originalText:""}),this.setKeyDownSwitch({UP_ARROW:function(){},DOWN_ARROW:function(){},PAGE_UP:function(){},PAGE_DOWN:function(){},ENTER:function(t,e){this.focusOut(e.$target.closest("td"))},ESC:function(t,e){this._restore(e.$target),this.focusOut(e.$target.closest("td"))}})},redrawAttributes:["isEditable"],eventHandler:{"blur input":"_onBlur","keydown input":"_onKeyDown","focus input":"_onFocus","selectstart input":"_onSelectStart"},contentTemplate:_.template('<input type="<%=type%>" value="<%=value%>" name="<%=name%>" align="center" maxLength="<%=maxLength%>" <% if (isDisabled) print("disabled"); %>/>'),_getInputType:function(){return"text"},getEditType:function(){return"text"},focusIn:function(t){var e=t.find("input");e.prop("disabled")?this.grid.focusModel.focusClipboard():(s.setCursorToEnd(e.get(0)),e.select())},focusOut:function(){this.grid.focusModel.focusClipboard()},getContentHtml:function(t){var e,i=this.getColumnModel(t),n=i.editOption,s=this.grid.dataModel.get(t.rowKey).getHTMLEncodedString(t.columnName);return tui.util.isUndefined(s)&&(s=""),e=this._getConvertedHtml(s,t),tui.util.isNull(e)&&(e=this.contentTemplate({type:this._getInputType(),value:s,name:o.getUniqueKey(),isDisabled:t.isDisabled,maxLength:n.maxLength})),e},setElementAttribute:function(t,e){var i=-1!==$.inArray("value",t.changed),n=e.find("input");i&&n.val(t.value),n.prop("disabled",t.isDisabled)},_isEdited:function(t){return t.val()!==this.originalText},_restore:function(t){t.val(this.originalText)},_getContentHtml:function(t){var e,i,n=t.columnName,o=this.grid.columnModel.getColumnModel(n),s=o.editOption||{},a="";return tui.util.isExisty(t.value)||(t.value=o.defaultValue),e=this._getExtraContent(s.beforeContent||s.beforeText,t),i=this._getExtraContent(s.afterContent||s.afterText,t),e&&(a+=this._getSpanWrapContent(e,"before",t)),i&&(a+=this._getSpanWrapContent(i,"after",t)),a+=this._getSpanWrapContent(this.getContentHtml(t),"input")},_onBlur:function(t){var e=$(t.target),i=this.getRowKey(e),n=this.getColumnName(e);this._executeInputEventHandler(t,"blur"),this._isEdited(e)&&this.grid.dataModel.setValue(i,n,e.val()),this.grid.selectionModel.enable()},_onFocus:function(t){var e=$(t.target);this.originalText=e.val(),this._executeInputEventHandler(t,"focus"),this.grid.selectionModel.end()},_onKeyDown:function(t){this._executeInputEventHandler(t,"keydown"),n.prototype._onKeyDown.call(this,t)},_getCellInfoFromInput:function(t){var e=t.closest("td"),i=e.closest("tr");return{rowKey:i.attr("key"),columnName:e.attr("columnname")}},_executeInputEventHandler:function(t,e){var i=$(t.target),n=this._getCellInfoFromInput(i),o=this.grid.columnModel.getColumnModel(n.columnName),s=tui.util.pick(o,"editOption","inputEvents",e);return _.isFunction(s)?s(t,n):null},_onSelectStart:function(t){t.stopPropagation()}});e.exports=a},{"../../common/formUtil":9,"../../common/util":10,"../cell":26}],36:[function(t,e,i){"use strict";var n=t("./cell/mainButton"),o=t("./cell/number"),s=t("./cell/normal"),a=t("./cell/button"),l=t("./cell/select"),r=t("./cell/text"),u=t("./cell/text-convertible"),d=t("./cell/text-password"),c=t("./row"),h=tui.util.defineClass({init:function(t){this.modelManager=t.modelManager,this.cellPainters=this._createCellPainters(),this.rowPainter=this._createRowPainter()},_createCellPainters:function(){var t={},e={grid:this.modelManager},i=[new n(e),new o(e),new s(e),new a(e),new l(e),new r(e),new d(e),new u(e)];return _.each(i,function(e){t[e.getEditType()]=e}),t},_createRowPainter:function(){return new c({grid:this.modelManager,painterManager:this})},getCellPainter:function(t){var e=this.cellPainters[t];return e||(e="radio"===t||"checkbox"===t?this.cellPainters.button:this.cellPainters.normal),e},getCellPainters:function(){return this.cellPainters},getRowPainter:function(){return this.rowPainter}});e.exports=h},{"./cell/button":27,"./cell/mainButton":29,"./cell/normal":30,"./cell/number":31,"./cell/select":32,"./cell/text":35,"./cell/text-convertible":33,"./cell/text-password":34,"./row":37}],37:[function(t,e,i){"use strict";var n=t("../base/painter"),o=tui.util.defineClass(n,{init:function(t){n.apply(this,arguments),this.painterManager=t.painterManager},template:_.template('<tr key="<%=key%>" class="<%=className%>" style="height: <%=height%>px;"><%=contents%></tr>'),onModelChange:function(t,e){_.each(t.changed,function(t,i){var n,o;"_extraData"!==i&&(n=this._getEditType(i,t),o=this.painterManager.getCellPainter(n),o.onModelChange(t,e))},this)},_getEditType:function(t,e){var i=this.grid.columnModel.getEditType(t);return e.isEditable||"_number"===t||(i="normal"),i},getHtml:function(t,e){var i="";return tui.util.isUndefined(t.get("rowKey"))?i:(_.each(e,function(e){var n,o,s=e.columnName,a=t.get(s);a&&a.isMainRow&&(n=this._getEditType(s,a),o=this.painterManager.getCellPainter(n),i+=o.getHtml(a))},this),this.template({key:t.get("rowKey"),height:this.grid.dimensionModel.get("rowHeight")+o._extraHeight,contents:i,className:""}))},"static":{_extraHeight:function(){var t=0;return tui.util.browser.msie&&7===tui.util.browser.version&&(t=-2),t}()}});e.exports=o},{"../base/painter":6}],38:[function(t,e,i){"use strict";var n=tui.util.defineClass({init:function(t){this.publicObject=t},_listenAndPass:function(t,e){_.each(e,function(e){this.listenTo(t,e,_.bind(this._triggerOnPublic,this,e))},this)},_listenAndRename:function(t,e,i){this.listenTo(t,e,_.bind(this._triggerOnPublic,this,i))},_triggerOnPublic:function(t,e){this.publicObject.trigger(t,e)},listenToNetAddon:function(t){this._listenAndPass(t,["beforeRequest","response","successResponse","failResponse","errorResponse"])},listenToContainerView:function(t){this._listenAndPass(t,["click","dblclick","mousedown","clickCell","dblclickCell","mouseoverCell","mouseoutCell","rendered"])},listenToFocusModel:function(t){this._listenAndRename(t,"select","selectRow")}});_.extend(n.prototype,Backbone.Events),e.exports=n},{}],39:[function(t,e,i){"use strict";var n=t("../base/view"),o=t("../common/util"),s=t("../common/constMap").keyCode,a=n.extend({initialize:function(t){this.setOwnProperties({focusModel:t.focusModel,selectionModel:t.selectionModel,painterManager:t.painterManager,dimensionModel:t.dimensionModel,dataModel:t.dataModel,columnModel:t.columnModel,renderModel:t.renderModel,timeoutIdForKeyIn:0,isLocked:!1}),this.listenTo(this.focusModel,"focusClipboard",this._onFocus)},tagName:"textarea",className:"clipboard",events:{keydown:"_onKeyDown",blur:"_onBlur"},_onBlur:function(){var t=this.focusModel;_.defer(function(){t.refreshState()})},_onFocus:function(){this.$el.is(":focus")||(this.$el.focus(),this.focusModel.refreshState())},render:function(){return this},_lock:function(){clearTimeout(this.timeoutIdForKeyIn),this.isLocked=!0,this.timeoutIdForKeyIn=setTimeout($.proxy(this._unlock,this),10)},_unlock:function(){this.isLocked=!1},_onKeyDown:function(t){return this.isLocked?(t.preventDefault(),!1):(t.shiftKey&&(t.ctrlKey||t.metaKey)?this._keyInWithShiftAndCtrl(t):t.shiftKey?this._keyInWithShift(t):t.ctrlKey||t.metaKey?this._keyInWithCtrl(t):this._keyIn(t),void this._lock())},_keyIn:function(t){var e=this.focusModel,i=this.selectionModel,n=e.which(),a=n.rowKey,l=n.columnName,r=this.dimensionModel.getDisplayRowCount(),u=!0,d=t.keyCode||t.which;if(!o.isBlank(n.rowKey)){switch(d){case s.UP_ARROW:e.focus(e.prevRowKey(),l,!0);break;case s.DOWN_ARROW:e.focus(e.nextRowKey(),l,!0);break;case s.LEFT_ARROW:e.focus(a,e.prevColumnName(),!0);break;case s.RIGHT_ARROW:e.focus(a,e.nextColumnName(),!0);break;case s.PAGE_UP:e.focus(e.prevRowKey(r-1),l,!0);break;case s.PAGE_DOWN:e.focus(e.nextRowKey(r-1),l,!0);break;case s.HOME:e.focus(a,e.firstColumnName(),!0);break;case s.END:e.focus(a,e.lastColumnName(),!0);break;case s.SPACE:case s.ENTER:this._onEnterSpace(a,l);break;case s.DEL:this._del(a,l);break;case s.TAB:e.focusIn(a,e.nextColumnName(),!0);break;default:u=!1}u&&t.preventDefault(),i.end()}},_onEnterSpace:function(t,e){var i,n=this.columnModel.getEditType(e);"_button"===n?(i=this.cellFactory.getInstance(n),i.toggle(this.dataModel.getElement(t,e))):this.focusModel.focusIn(t,e)},_getIndexBeforeMove:function(){var t,e,i=this.focusModel.indexOf(),n=this.selectionModel.get("range"),o=_.extend({},i);return n&&(t=n.row,e=n.column,o.row=t[0],o.column=e[0],t[1]>i.row&&(o.row=t[1]),e[1]>i.column&&(o.column=e[1])),o},_keyInWithShift:function(t){var e,i,n,o,a=this.focusModel,l=this.dimensionModel,r=this.columnModel.getVisibleColumnModelList(),u=a.which(),d=l.getDisplayRowCount(),c=t.keyCode||t.which,h=this._getIndexBeforeMove(),m=!0,g=!0;switch(c){case s.UP_ARROW:h.row-=1;break;case s.DOWN_ARROW:h.row+=1;break;case s.LEFT_ARROW:h.column-=1;break;case s.RIGHT_ARROW:h.column+=1;break;case s.PAGE_UP:h.row=a.prevRowIndex(d-1);break;case s.PAGE_DOWN:h.row=a.nextRowIndex(d-1);break;case s.HOME:h.column=0;break;case s.END:h.column=r.length-1;break;case s.ENTER:g=!1;break;case s.TAB:g=!1,a.focusIn(u.rowKey,a.prevColumnName(),!0);break;default:g=!1,m=!1}e=r[h.column],n=!(!e||!this.dataModel.getRowData(h.row)),g&&n&&(this._updateSelectionByKeyIn(h.row,h.column),i=l.getScrollPosition(h.row,e.columnName),i&&(o=this.selectionModel.getState(),"column"===o?delete i.scrollTop:"row"===o&&delete i.scrollLeft,this.renderModel.set(i))),m&&t.preventDefault()},_keyInWithCtrl:function(t){var e=this.focusModel,i=t.keyCode||t.which;switch(i){case s.CHAR_A:this.selectionModel.selectAll();break;case s.CHAR_C:this._copyToClipboard();break;case s.HOME:e.focus(e.firstRowKey(),e.firstColumnName(),!0);break;case s.END:e.focus(e.lastRowKey(),e.lastColumnName(),!0);break;case s.CHAR_V:this._paste()}},_paste:function(){this._clearClipBoard(),this.pasting||(this.pasting=!0,this._onKeyupCharV())},_onKeyupCharV:function(){this.$el.on("keyup",$.proxy(this.onKeyupCharV,this))},onKeyupCharV:function(){this._pasteToGrid(),this.pasting=!1},_clearClipBoard:function(){this.$el.val("")},_pasteToGrid:function(){var t,e,i=this.selectionModel,n=this.focusModel,o=this.dataModel;t=i.hasSelection()?i.getStartIndex():n.indexOf(),e=this._getProcessClipBoardData(),this.$el.off("keyup"),o.paste(e,t)},_getProcessClipBoardData:function(){
for(var t=this.$el.val(),e=t.split("\n"),i=0,n=e.length;n>i;i+=1)e[i]=e[i].split("	");return e},_keyInWithShiftAndCtrl:function(t){var e=!0,i=this.columnModel.getVisibleColumnModelList(),n=t.keyCode||t.which;switch(n){case s.HOME:this._updateSelectionByKeyIn(0,0);break;case s.END:this._updateSelectionByKeyIn(this.dataModel.length-1,i.length-1);break;default:e=!1}e&&t.preventDefault()},_del:function(){var t,e,i,n=this.selectionModel,o=this.dataModel,s=this.focusModel.which(),a=this.columnModel.getVisibleColumnModelList(),l=s.rowKey,r=s.columnName;if(n.hasSelection()){for(t=n.get("range"),e=t.row[0];e<t.row[1]+1;e+=1)for(l=o.at(e).get("rowKey"),i=t.column[0];i<t.column[1]+1;i+=1)r=a[i].columnName,o.del(l,r,!0);this.renderModel.refresh(!0)}else o.del(l,r)},_updateSelectionByKeyIn:function(t,e){var i=this.selectionModel;i.update(t,e)},_getClipboardString:function(){var t,e=this.selectionModel,i=this.focusModel.which();return t=e.hasSelection()?this.selectionModel.getValuesToString():this.dataModel.get(i.rowKey).getVisibleText(i.columnName)},_copyToClipboard:function(){var t=this._getClipboardString();window.clipboardData?window.clipboardData.setData("Text",t):this.$el.val(t).select()}});e.exports=a},{"../base/view":7,"../common/constMap":8,"../common/util":10}],40:[function(t,e,i){"use strict";var n=t("../base/view"),o=n.extend({initialize:function(t){n.prototype.initialize.call(this),this.singleClickEdit=t.singleClickEdit,this.dimensionModel=t.dimensionModel,this.focusModel=t.focusModel,this.dataModel=t.dataModel,this.viewFactory=t.viewFactory,this._createChildViews(),this.listenTo(this.dimensionModel,"change:bodyHeight",this._refreshHeight),this.listenTo(this.dimensionModel,"setSize",this._onSetSize),$(window).on("resize.grid",$.proxy(this._onResizeWindow,this)),this.__$el=this.$el.clone()},events:{click:"_onClick",dblclick:"_onDblClick",mousedown:"_onMouseDown",mouseover:"_onMouseOver",mouseout:"_onMouseOut",selectstart:"_preventDrag",dragstart:"_preventDrag"},_createChildViews:function(){var t=this.viewFactory;this._addChildren([t.createFrame("L"),t.createFrame("R"),t.createToolbar(),t.createStateLayer(),t.createClipboard()])},_onResizeWindow:function(){this.dimensionModel.refreshLayout()},_preventDrag:function(){return!1},_onSetSize:function(){this.$el.width(this.dimensionModel.get("width"))},_onClick:function(t){var e,i=this.createEventData(t),n=$(t.target);this.trigger("click",i),i.isStopped()||this._isCellElement(n,!0)&&(e=this._getCellInfoFromElement(n.closest("td")),this.singleClickEdit&&!n.is("input")&&this.focusModel.focusIn(e.rowKey,e.columnName),this._triggerCellMouseEvent("clickCell",i,e))},_onDblClick:function(t){var e=this.createEventData(t),i=$(t.target);this.trigger("dblclick",e),e.isStopped()||this._isCellElement(i,!0)&&this._triggerCellMouseEvent("dblclickCell",e,i.closest("td"))},_onMouseOver:function(t){var e,i=$(t.target);this._isCellElement(i)&&(e=this.createEventData(t),this._triggerCellMouseEvent("mouseoverCell",e,i))},_onMouseOut:function(t){var e,i=$(t.target);this._isCellElement(i)&&(e=this.createEventData(t),this._triggerCellMouseEvent("mouseoutCell",e,i))},_triggerCellMouseEvent:function(t,e,i){var n=i;i instanceof $&&(n=this._getCellInfoFromElement(i)),_.extend(e,n),this.trigger(t,e)},_isCellElement:function(t,e){var i=e?t.closest("td"):t;return!!(i.is("td")&&i.attr("columnname")&&i.parent().attr("key"))},_getCellInfoFromElement:function(t){var e=t.parent().attr("key"),i=t.attr("columnname");return{rowKey:e,columnName:i,rowData:this.dataModel.getRowData(e)}},_onMouseDown:function(t){var e=$(t.target),i=this.createEventData(t);this.trigger("mousedown",i),i.isStopped()||e.is("input, a, button, select")||(t.preventDefault(),this.focusModel.focusClipboard())},_refreshHeight:function(){this.$el.height(this.dimensionModel.getHeight())},render:function(){var t=this._renderChildren().concat([$("<div>").addClass("left_line"),$("<div>").addClass("right_line")]);this.$el.addClass("grid_wrapper uio_grid").attr("instanceId",this.gridId).append(t),this._refreshHeight(),this.trigger("rendered")},destroy:function(){this.stopListening(),$(window).off("resize.grid"),this._destroyChildren(),this.$el.replaceWith(this.__$el),this.$el=this.__$el=null}});e.exports=o},{"../base/view":7}],41:[function(t,e,i){"use strict";var n=t("./container"),o=t("./layout/toolbar"),s=t("./layout/toolbar/controlPanel"),a=t("./layout/toolbar/pagination"),l=t("./layout/toolbar/resizeHandler"),r=t("./stateLayer"),u=t("./clipboard"),d=t("./layout/frame-lside"),c=t("./layout/frame-rside"),h=t("./layout/header"),m=t("./layout/resizeHandler"),g=t("./layout/body"),f=t("./layout/bodyTable"),p=t("./rowList"),M=t("./selectionLayer"),_=tui.util.defineClass({init:function(t){this.modelManager=t.modelManager,this.painterManager=t.painterManager},createContainer:function(t){return new n({el:t.el,singleClickEdit:t.singleClickEdit,dataModel:this.modelManager.dataModel,dimensionModel:this.modelManager.dimensionModel,focusModel:this.modelManager.focusModel,gridId:this.modelManager.gridId,viewFactory:this})},createToolbar:function(){return new o({toolbarModel:this.modelManager.toolbarModel,dimensionModel:this.modelManager.dimensionModel,viewFactory:this})},createToolbarControlPanel:function(){return new s({gridId:this.modelManager.gridId,toolbarModel:this.modelManager.toolbarModel})},createToolbarPagination:function(){return new a({toolbarModel:this.modelManager.toolbarModel})},createToolbarResizeHandler:function(){return new l({dimensionModel:this.modelManager.dimensionModel})},createStateLayer:function(){return new r({dimensionModel:this.modelManager.dimensionModel,renderModel:this.modelManager.renderModel})},createClipboard:function(){return new u({columnModel:this.modelManager.columnModel,dataModel:this.modelManager.dataModel,dimensionModel:this.modelManager.dimensionModel,selectionModel:this.modelManager.selectionModel,focusModel:this.modelManager.focusModel,renderModel:this.modelManager.renderModel,painterManager:this.modelManager.painterManager})},createFrame:function(t){var e="L"===t?d:c;return new e({dimensionModel:this.modelManager.dimensionModel,renderModel:this.modelManager.renderModel,viewFactory:this})},createHeader:function(t){return new h({whichSide:t,renderModel:this.modelManager.renderModel,dimensionModel:this.modelManager.dimensionModel,selectionModel:this.modelManager.selectionModel,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,viewFactory:this})},createHeaderResizeHandler:function(t){return new m({whichSide:t,dimensionModel:this.modelManager.dimensionModel,columnModel:this.modelManager.columnModel})},createBody:function(t){return new g({whichSide:t,renderModel:this.modelManager.renderModel,dimensionModel:this.modelManager.dimensionModel,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,selectionModel:this.modelManager.selectionModel,focusModel:this.modelManager.focusModel,viewFactory:this})},createBodyTable:function(t){return new f({whichSide:t,dimensionModel:this.modelManager.dimensionModel,renderModel:this.modelManager.renderModel,columnModel:this.modelManager.columnModel,painterManager:this.painterManager,viewFactory:this})},createRowList:function(t){return new p({el:t.el,whichSide:t.whichSide,bodyTableView:t.bodyTableView,dataModel:this.modelManager.dataModel,columnModel:this.modelManager.columnModel,dimensionModel:this.modelManager.dimensionModel,renderModel:this.modelManager.renderModel,focusModel:this.modelManager.focusModel,painterManager:this.painterManager})},createSelectionLayer:function(t){return new M({whichSide:t,selectionModel:this.modelManager.selectionModel,dimensionModel:this.modelManager.dimensionModel,columnModel:this.modelManager.columnModel})}});e.exports=_},{"./clipboard":39,"./container":40,"./layout/body":42,"./layout/bodyTable":43,"./layout/frame-lside":44,"./layout/frame-rside":45,"./layout/header":47,"./layout/resizeHandler":48,"./layout/toolbar":49,"./layout/toolbar/controlPanel":50,"./layout/toolbar/pagination":51,"./layout/toolbar/resizeHandler":52,"./rowList":53,"./selectionLayer":54,"./stateLayer":55}],42:[function(t,e,i){"use strict";var n=t("../../base/view"),o='<div class="body_container"></div>',s=n.extend({initialize:function(t){n.prototype.initialize.call(this),this.setOwnProperties({dimensionModel:t.dimensionModel,dataModel:t.dataModel,columnModel:t.columnModel,renderModel:t.renderModel,selectionModel:t.selectionModel,focusModel:t.focusModel,viewFactory:t.viewFactory,$container:null,whichSide:t&&t.whichSide||"R"}),this.listenTo(this.dimensionModel,"change:bodyHeight",this._onBodyHeightChange).listenTo(this.dataModel,"add remove reset",this._resetContainerHeight).listenTo(this.renderModel,"change:scrollTop",this._onScrollTopChange).listenTo(this.renderModel,"change:scrollLeft",this._onScrollLeftChange)},tagName:"div",className:"data",events:{scroll:"_onScroll","mousedown .body_container":"_onMouseDown","blur input, select":"_onBlurInput"},_onBodyHeightChange:function(t,e){this.$el.css("height",e+"px")},_resetContainerHeight:function(){this.$container.css({height:this.dimensionModel.get("totalRowHeight")})},_onScroll:function(t){var e={scrollTop:t.target.scrollTop};"R"===this.whichSide&&(e.scrollLeft=t.target.scrollLeft),this.renderModel.set(e)},_onScrollLeftChange:function(t,e){"R"===this.whichSide&&(this.el.scrollLeft=e)},_onScrollTopChange:function(t,e){this.el.scrollTop=e},_onMouseDown:function(t){var e,i=this.columnModel,n=$(t.target),o=n.is("input"),s=n.closest("td"),a=n.closest("tr"),l=s.attr("columnName"),r=a.attr("key"),u=this.dataModel.indexOfRowKey(r),d={columnName:l,column:i.indexOfColumnName(l,!0),row:u};!l||0>u?(_.extend(d,this.dimensionModel.getIndexFromMousePosition(t.pageX,t.pageY,!0)),e=i.getVisibleColumnModelList(null,!0),l=e[d.column].columnName,d.columnName=l,d.column=i.indexOfColumnName(l,!0)):"radio"===this.columnModel.get("selectType")&&this.dataModel.check(u),this._controlStartAction(t.pageX,t.pageY,t.shiftKey,d,o)},_onBlurInput:function(t){var e=this.focusModel;_.defer(function(){e.refreshState()})},_controlStartAction:function(t,e,i,n,o){var s=this.columnModel,a=this.selectionModel,l=n.columnName,r=n.column,u=n.row;a.isEnabled()&&(o||this._attachDragEvents(t,e),s.isMetaColumn(l)?"_number"===l?i?a.update(u,0,"row"):a.selectRow(u):this._detachDragEvents():(a.setState("cell"),i&&!o?a.update(u,r):(this.focusModel.focusAt(u,r),a.end())))},_attachDragEvents:function(t,e){this.setOwnProperties({mouseDownX:t,mouseDownY:e}),this.dimensionModel.refreshLayout(),$(document).on("mousemove",$.proxy(this._onMouseMove,this)).on("mouseup",$.proxy(this._detachDragEvents,this)).on("selectstart",$.proxy(this._onSelectStart,this))},_detachDragEvents:function(){this.selectionModel.stopAutoScroll(),$(document).off("mousemove",this._onMouseMove).off("mouseup",this._detachDragEvents).off("selectstart",this._onSelectStart)},_onMouseMove:function(t){var e=this.selectionModel,i=t.pageX,n=t.pageY,o=this._getMouseMoveDistance(i,n)>10;(e.hasSelection()||o)&&e.updateByMousePosition(i,n)},_getMouseMoveDistance:function(t,e){var i=Math.abs(this.mouseDownX-t),n=Math.abs(this.mouseDownY-e);return Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(n,2)))},_onSelectStart:function(t){return t.preventDefault(),!1},render:function(){var t=this.whichSide;return this._destroyChildren(),this.dimensionModel.get("scrollX")||this.$el.css("overflow-x","hidden"),this.dimensionModel.get("scrollY")||"R"!==t||this.$el.css("overflow-y","hidden"),this.$el.css("height",this.dimensionModel.get("bodyHeight")),this.$container=$(o),this.$el.append(this.$container),this._addChildren([this.viewFactory.createBodyTable(t),this.viewFactory.createSelectionLayer(t)]),this.$container.append(this._renderChildren()),this._resetContainerHeight(),this}});e.exports=s},{"../../base/view":7}],43:[function(t,e,i){"use strict";var n=t("../../base/view"),o=t("../../common/util"),s=n.extend({initialize:function(t){n.prototype.initialize.call(this),this.setOwnProperties({dimensionModel:t.dimensionModel,renderModel:t.renderModel,columnModel:t.columnModel,viewFactory:t.viewFactory,painterManager:t.painterManager,whichSide:t.whichSide||"R"}),this.listenTo(this.dimensionModel,"columnWidthChanged",this._onColumnWidthChanged),this._attachAllTableEventHandlers()},tagName:"div",className:"table_container",template:_.template('<table width="100%" border="0" cellspacing="1" cellpadding="0" bgcolor="#EFEFEF">   <colgroup><%=colGroup%></colgroup>   <tbody><%=tbody%></tbody></table>'),_onColumnWidthChanged:function(){var t=this.dimensionModel.getColumnWidthList(this.whichSide),e=this.$el.find("col");_.each(t,function(t,i){e.eq(i).css("width",t-s.EXTRA_WIDTH)},this)},resetTablePosition:function(){this.$el.css("top",this.renderModel.get("top"))},render:function(){return this._destroyChildren(),this.$el.html(this.template({colGroup:this._getColGroupMarkup(),tbody:""})),this._addChildren(this.viewFactory.createRowList({bodyTableView:this,el:this.$el.find("tbody"),whichSide:this.whichSide})),this._renderChildren(),this},_attachTableEventHandler:function(t,e){_.each(e,function(e,i){this.$el.on(i,t+" "+e.selector,e.handler)},this)},_attachAllTableEventHandlers:function(){var t=this.painterManager.getRowPainter(),e=this.painterManager.getCellPainters();this._attachTableEventHandler("tr",t.getEventHandlerInfo()),_.each(e,function(t,e){var i="td[edit-type="+e+"]",n=t.getEventHandlerInfo();this._attachTableEventHandler(i,n)},this)},redrawTable:function(t){return this.$el[0].innerHTML=this.template({colGroup:this._getColGroupMarkup(),tbody:t}),this.$el.find("tbody")},_getColGroupMarkup:function(){var t=this.whichSide,e=this.dimensionModel.getColumnWidthList(t),i=this.columnModel.getVisibleColumnModelList(t,!0),n="";return _.each(i,function(t,i){var o=t.columnName,a=e[i]-s.EXTRA_WIDTH;n+='<col columnname="'+o+'" style="width:'+a+'px">'}),n}},{EXTRA_WIDTH:o.isBrowserIE7()?20:0});e.exports=s},{"../../base/view":7,"../../common/util":10}],44:[function(t,e,i){"use strict";var n=t("./frame"),o=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.setOwnProperties({whichSide:"L"})},className:"lside_area",_onColumnWidthChanged:function(){this.$el.css({width:this.dimensionModel.get("lsideWidth")})},beforeRender:function(){this.$el.css({display:"block",width:this.dimensionModel.get("lsideWidth")})}});e.exports=o},{"./frame":46}],45:[function(t,e,i){"use strict";var n=t("./frame"),o=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.setOwnProperties({whichSide:"R",$scrollBorder:null}),this.listenTo(this.dimensionModel,"change:bodyHeight change:headerHeight",this._resetScrollBorderHeight)},className:"rside_area",_onColumnWidthChanged:function(){var t=this.dimensionModel;this.$el.css({width:t.get("rsideWidth"),marginLeft:t.get("lsideWidth")})},_resetScrollBorderHeight:function(){var t=this.dimensionModel,e=t.get("bodyHeight")-t.getScrollXHeight();this.$scrollBorder.height(e)},beforeRender:function(){var t=this.dimensionModel;this.$el.css({display:"block",width:t.get("rsideWidth"),marginLeft:t.get("lsideWidth")})},afterRender:function(){var t,e,i,n,o,s=this.dimensionModel;this.dimensionModel.get("scrollY")&&(n=s.get("headerHeight"),o=s.get("bodyHeight"),t=$("<div />").addClass("header_space"),e=$("<div />").addClass("scrollbar_border"),i=$("<div />").addClass("scrollbar_corner"),t.height(n-2),e.css("top",n+"px"),i.css("bottom",s.get("toolbarHeight")),this.$el.append(t,e,i),this.$scrollBorder=e,this._resetScrollBorderHeight())}});e.exports=o},{"./frame":46}],46:[function(t,e,i){"use strict";var n=t("../../base/view"),o=n.extend({initialize:function(t){n.prototype.initialize.call(this),this.setOwnProperties({viewFactory:t.viewFactory,renderModel:t.renderModel,dimensionModel:t.dimensionModel,whichSide:t.whichSide||"R"}),this.listenTo(this.renderModel,"columnModelChanged",this.render,this).listenTo(this.dimensionModel,"columnWidthChanged",this._onColumnWidthChanged,this)},tagName:"div",className:"lside_area",render:function(){var t=this.viewFactory;return this._destroyChildren(),this.beforeRender(),this._addChildren([t.createHeader(this.whichSide),t.createBody(this.whichSide)]),this.$el.append(this._renderChildren()),this.afterRender(),this},_onColumnWidthChanged:function(){},beforeRender:function(){},afterRender:function(){}});e.exports=o},{"../../base/view":7}],47:[function(t,e,i){"use strict";var n=t("../../base/view"),o=t("../../common/util"),s=n.extend({initialize:function(t){n.prototype.initialize.call(this),this.setOwnProperties({renderModel:t.renderModel,dimensionModel:t.dimensionModel,selectionModel:t.selectionModel,columnModel:t.columnModel,dataModel:t.dataModel,viewFactory:t.viewFactory,timeoutForAllChecked:0,whichSide:t.whichSide||"R"}),this.listenTo(this.renderModel,"change:scrollLeft",this._onScrollLeftChange,this).listenTo(this.dimensionModel,"columnWidthChanged",this._onColumnWidthChanged,this).listenTo(this.dataModel,"change:_button",this._onCheckCountChange,this).listenTo(this.dataModel,"sortChanged",this._updateBtnSortState,this)},tagName:"div",className:"header",events:{click:"_onClick","mousedown th[columnName]":"_onMouseDown"},template:_.template('    <table width="100%" border="0" cellspacing="1" cellpadding="0" bgcolor="#EFEFEF">        <colgroup><%=colGroup%></colgroup>        <tbody><%=tBody%></tbody>    </table>'),templateHeader:_.template('<th columnname="<%=columnName%>" height="<%=height%>" <%if(colspan > 0) {%>colspan=<%=colspan%> <%}%><%if(rowspan > 0) {%>rowspan=<%=rowspan%> <%}%>><%=title%><%=btnSort%></th>'),templateCol:_.template('<col columnname="<%=columnName%>" style="width:<%=width%>px">'),markupBtnSort:'<a class="btn_sorting"></a>',_getColGroupMarkup:function(){var t=this._getColumnData(),e=t.widthList,i=t.modelList,n=[];return _.each(e,function(t,e){n.push(this.templateCol({columnName:i[e].columnName,width:t}))},this),n.join("")},_onMouseDown:function(t){var e,i;this.selectionModel.isEnabled()&&!$(t.target).is("a.btn_sorting")&&(e=$(t.target).closest("th").attr("columnName"),i=this.columnModel.getUnitColumnNamesIfMerged(e),this._hasMetaColumn(i)||this._controlStartAction(i,t.pageX,t.pageY,t.shiftKey))},_controlStartAction:function(t,e,i,n){var o=this.columnModel,s=_.map(t,function(t){return o.indexOfColumnName(t,!0)});n?this._startColumnSelectionWithShiftKey(s,e,i):this._startColumnSelectionWithoutShiftKey(s),this._attachDragEvents()},_startColumnSelectionWithShiftKey:function(t,e,i){var n=this.selectionModel,o=Math.max.apply(null,t);n.update(0,o,"column"),n.extendColumnSelection(t,e,i)},_startColumnSelectionWithoutShiftKey:function(t){var e=this.selectionModel,i=o.getMinMax(t),n=i.min,s=i.max;e.setMinimumColumnRange([n,s]),e.selectColumn(n),e.update(0,s)},_attachDragEvents:function(){$(document).on("mousemove",$.proxy(this._onMouseMove,this)).on("mouseup",$.proxy(this._detachDragEvents,this)).on("selectstart",$.proxy(this._onSelectStart,this))},_detachDragEvents:function(){this.selectionModel.stopAutoScroll(),$(document).off("mousemove",this._onMouseMove).off("mouseup",this._detachDragEvents).off("selectstart",this._onSelectStart)},_onMouseMove:function(t){var e,i,n=this.columnModel,o=!0,s=$(t.target).closest("th").attr("columnName");s?(e=n.getUnitColumnNamesIfMerged(s),i=_.map(e,function(t){return n.indexOfColumnName(t,!0)})):$.contains(this.el,t.target)&&(o=!1),o&&this.selectionModel.extendColumnSelection(i,t.pageX,t.pageY)},_hasMetaColumn:function(t){var e=!1,i=this.columnModel;return tui.util.forEach(t,function(t){return i.isMetaColumn(t)?(e=!0,!1):void 0}),e},_onSelectStart:function(t){return t.preventDefault(),!1},_onCheckCountChange:function(){"checkbox"===this.columnModel.get("selectType")&&(clearTimeout(this.timeoutForAllChecked),this.timeoutForAllChecked=setTimeout($.proxy(this._syncCheckState,this),10))},_getHeaderMainCheckbox:function(){return this.$el.find('th[columnname="_button"] input')},_syncCheckState:function(){var t,e,i;this.columnModel&&"checkbox"===this.columnModel.get("selectType")&&(t=this._getHeaderMainCheckbox(),t.length&&(e=0,i=this.dataModel.getRowList(!0).length,this.dataModel.forEach(function(t){var i=t.getCellState("_button");!i.isDisabled&&i.isEditable&&(e+=1)},this),t.prop("checked",e===i)))},_onColumnWidthChanged:function(){var t=this._getColumnData(),e=t.widthList,i=this.$el.find("col");_.each(e,function(t,e){i.eq(e).css("width",t+"px")})},_onScrollLeftChange:function(t,e){"R"===this.whichSide&&(this.el.scrollLeft=e)},_onClick:function(t){var e=$(t.target),i=e.closest("th").attr("columnname");"_button"===i&&e.is("input")?e.prop("checked")?this.dataModel.checkAll():this.dataModel.uncheckAll():e.is("a.btn_sorting")&&this.dataModel.sortByField(i)},_updateBtnSortState:function(t){this._$currentSortBtn&&this._$currentSortBtn.removeClass("sorting_down sorting_up"),this._$currentSortBtn=this.$el.find("th[columnname="+t.columnName+"] a.btn_sorting"),this._$currentSortBtn.addClass(t.isAscending?"sorting_up":"sorting_down")},render:function(){return this._destroyChildren(),this.dimensionModel.get("scrollX")||this.$el.css("overflow-x","hidden"),this.dimensionModel.get("scrollY")||this.$el.css("overflow-y","hidden"),this.$el.css({height:this.dimensionModel.get("headerHeight")}).html(this.template({colGroup:this._getColGroupMarkup(),tBody:this._getTableBodyMarkup()})),this._addChildren(this.viewFactory.createHeaderResizeHandler(this.whichSide)),this.$el.append(this._renderChildren()),this},_getColumnData:function(){var t=this.columnModel,e=this.dimensionModel,i=e.getColumnWidthList(this.whichSide),n=t.getVisibleColumnModelList(this.whichSide,!0);return{widthList:i,modelList:n}},_getTableBodyMarkup:function(){var t,e,i=this._getColumnHierarchyList(),n=this._getHierarchyMaxRowCount(i),s=this.dimensionModel.get("headerHeight"),a=new Array(n),l=new Array(n),r=[],u=o.getRowHeight(n,s)-1,d=1;return _.each(i,function(e,o){var c=i[o].length,h=0;_.each(e,function(e,i){var o=e.columnName;d=c-1===i&&n-c+1>1?n-c+1:1,t=u*d,i===c-1?t=s-h-2:h+=t+1,l[i]===o?(a[i].pop(),r[i]+=1):r[i]=1,l[i]=o,a[i]=a[i]||[],a[i].push(this.templateHeader({columnName:o,height:t,colspan:r[i],rowspan:d,title:e.title,btnSort:e.isSortable?this.markupBtnSort:""}))},this)},this),e=_.map(a,function(t){return"<tr>"+t.join("")+"</tr>"}),e.join("")},_getHierarchyMaxRowCount:function(t){var e=[0];return _.each(t,function(t){e.push(t.length)},this),Math.max.apply(Math,e)},_getColumnHierarchyList:function(){var t,e=this._getColumnData().modelList;return t=_.map(e,function(t){return this._getColumnHierarchy(t).reverse()},this)},_getColumnHierarchy:function(t,e){var i=this.columnModel.get("columnMerge");return e=e||[],t&&(e.push(t),i&&_.each(i,function(i){-1!==$.inArray(t.columnName,i.columnNameList)&&this._getColumnHierarchy(i,e)},this)),e}});e.exports=s},{"../../base/view":7,"../../common/util":10}],48:[function(t,e,i){"use strict";var n=t("../../base/view"),o=n.extend({initialize:function(t){this.setOwnProperties({dimensionModel:t.dimensionModel,columnModel:t.columnModel,whichSide:t.whichSide||"R",isResizing:!1,$target:null,differenceLeft:0,initialWidth:0,initialOffsetLeft:0,initialLeft:0}),this.listenTo(this.dimensionModel,"change:which columnWidthChanged",this._refreshHandlerPosition)},tagName:"div",className:"resize_handle_container",events:{"mousedown .resize_handle":"_onMouseDown","click .resize_handle":"_onClick"},template:_.template('<div columnindex="<%=columnIndex%>" columnname="<%=columnName%>" class="resize_handle<% if(isLast === true)  print(" resize_handle_last");%>" style="<%=height%>" title="마우스 드래그를 통해 컬럼의 넓이를 변경할 수 있고,더블클릭을 통해 넓이를 초기화할 수 있습니다."></div>'),_getColumnData:function(){var t=this.columnModel,e=this.dimensionModel,i=e.getColumnWidthList(this.whichSide),n=t.getVisibleColumnModelList(this.whichSide,!0);return{widthList:i,modelList:n}},_getResizeHandlerMarkup:function(){var t,e=this._getColumnData(),i=e.modelList,n=this.dimensionModel.get("headerHeight"),o=i.length;return t=_.map(i,function(t,e){return this.template({columnIndex:e,columnName:t.columnName,isLast:e+1===o,height:n})},this),t.join("")},render:function(){var t=this.dimensionModel.get("headerHeight"),e=this._getResizeHandlerMarkup();return this.$el.empty().show().html(e).css({marginTop:-t,height:t}),this._refreshHandlerPosition(),this},_refreshHandlerPosition:function(){var t,e,i,n=this._getColumnData(),o=n.widthList,s=this.$el.find(".resize_handle"),a=this.$el.parent().find("table:first"),l=!1,r=0,u=1;tui.util.forEachArray(s,function(n,d){t=s.eq(d),e=t.attr("columnname"),i=a.find('th[columnname="'+e+'"]').width(),tui.util.isExisty(i)?l=l||i!==o[d]:i=o[d],r+=i+u,t.css("left",r-3+"px")})},_isResizing:function(){return!!this.isResizing},_onMouseDown:function(t){this._startResizing(t)},_onClick:function(t){var e=$(t.target),i=parseInt(e.attr("columnindex"),10),n=e.data("isClicked");n?(this.dimensionModel.restoreColumnWidth(this._getHandlerColumnIndex(i)),this._clearClickedFlag(e),this._refreshHandlerPosition()):this._setClickedFlag(e)},_setClickedFlag:function(t){t.data("isClicked",!0),setTimeout($.proxy(this._clearClickedFlag,this,t),500)},_clearClickedFlag:function(t){t.data("isClicked",!1)},_onMouseUp:function(){this._stopResizing()},_onMouseMove:function(t){var e,i,n;this._isResizing()&&(t.preventDefault(),e=t.pageX-this.initialOffsetLeft,i=this._calculateWidth(t.pageX),n=parseInt(this.$target.attr("columnindex"),10),this.$target.css("left",e+"px"),this.dimensionModel.setColumnWidth(this._getHandlerColumnIndex(n),i),this._refreshHandlerPosition())},_calculateWidth:function(t){var e=t-this.initialOffsetLeft-this.initialLeft;return this.initialWidth+e},_getHandlerColumnIndex:function(t){return"R"===this.whichSide?t+this.columnModel.getVisibleColumnFixCount(!0):t},_startResizing:function(t){var e=this._getColumnData(),i=e.widthList,n=$(t.target);this.isResizing=!0,this.$target=n,this.initialLeft=parseInt(n.css("left").replace("px",""),10),this.initialOffsetLeft=this.$el.offset().left,this.initialWidth=i[n.attr("columnindex")],$("body").css("cursor","col-resize"),$(document).bind("mousemove",$.proxy(this._onMouseMove,this)).bind("mouseup",$.proxy(this._onMouseUp,this)),n[0].setCapture&&n[0].setCapture()},_stopResizing:function(){this.$target&&this.$target[0].releaseCapture&&this.$target[0].releaseCapture(),this.isResizing=!1,this.$target=null,this.initialLeft=0,this.initialOffsetLeft=0,this.initialWidth=0,$("body").css("cursor","default"),$(document).unbind("mousemove",$.proxy(this._onMouseMove,this)).unbind("mouseup",$.proxy(this._onMouseUp,this))},destroy:function(){this.stopListening(),this._stopResizing(),this.remove()}});e.exports=o},{"../../base/view":7}],49:[function(t,e,i){"use strict";var n=t("../../base/view"),o=n.extend({initialize:function(t){n.prototype.initialize.call(this),this.toolbarModel=t.toolbarModel,this.dimensionModel=t.dimensionModel,this.viewFactory=t.viewFactory},tagName:"div",className:"toolbar",render:function(){var t=this.toolbarModel;return this._destroyChildren(),t.get("hasControlPanel")&&this._addChildren(this.viewFactory.createToolbarControlPanel()),t.get("hasResizeHandler")&&this._addChildren(this.viewFactory.createToolbarResizeHandler()),t.get("hasPagination")&&this._addChildren(this.viewFactory.createToolbarPagination()),this.$el.empty().append(this._renderChildren()),this._refreshHeight(),this},_refreshHeight:function(){var t=this.dimensionModel.get("toolbarHeight");this.$el.height(t),this.$el.toggle(!!t)}});e.exports=o},{"../../base/view":7}],50:[function(t,e,i){"use strict";var n=t("../../../base/view"),o=n.extend({initialize:function(t){this.setOwnProperties({gridId:t.gridId,toolbarModel:t.toolbarModel,$btnExcel:null,$btnExcelAll:null}),this.listenTo(this.toolbarModel,"change:isExcelButtonVisible change:isExcelAllButtonVisible",this.render)},events:{"click a.excel_download_button":"_onClickExcel"},tagName:"div",className:"btn_setup",templateExcelBtn:_.template('<a href="#" class="excel_download_button btn_text <%=className%>"><span><em class="excel"></em><%=text%></span></a>'),_onClickExcel:function(t){var e,i=tui.Grid.getInstanceById(this.gridId),n=i.getAddOn("Net");t.preventDefault(),n&&(e=$(t.target).closest("a"),e.hasClass("excel_page")?n.download("excel"):e.hasClass("excel_all")&&n.download("excelAll"))},render:function(){var t=this.toolbarModel;return this.$el.empty(),t.get("isExcelButtonVisible")&&this.$el.append(this.templateExcelBtn({className:"excel_page",text:"엑셀 다운로드"})),t.get("isExcelAllButtonVisible")&&this.$el.append(this.templateExcelBtn({className:"excel_all",text:"전체 엑셀 다운로드"})),this}});e.exports=o},{"../../../base/view":7}],51:[function(t,e,i){"use strict";var n=t("../../../base/view"),o=n.extend({initialize:function(t){this.toolbarModel=t.toolbarModel},tagName:"div",className:"grid_pagination",template:_.template('<a href="#" class="pre_end" title="First page">First</a><a href="#" class="pre" title="Previous page">Prev</a> <a href="#" class="next" title="Next page">Next</a><a href="#" class="next_end" title="Last page">Last</a><span class="pre_end_off">First Off</span><span class="pre_off">Prev Off</span><span class="next_off">Next Off</span><span class="next_end_off">Last Off</span>'),render:function(){return this._destroyChildren(),this.$el.empty().html(this.template()),this._setPaginationInstance(),this},_setPaginationInstance:function(){var t=tui&&tui.component&&tui.component.Pagination,e=this.toolbarModel.get("pagination");!e&&t&&(e=new t({itemCount:1,itemPerPage:1,pagePerPageList:5,isCenterAlign:!0,moveUnit:"page",$preOff:this.$el.find(".pre_off"),$pre_endOff:this.$el.find(".pre_end_off"),$nextOff:this.$el.find(".next_off"),$lastOff:this.$el.find(".next_end_off")},this.$el)),this.toolbarModel.set("pagination",e)}});e.exports=o},{"../../../base/view":7}],52:[function(t,e,i){"use strict";var n=t("../../../base/view"),o=n.extend({initialize:function(t){this.dimensionModel=t.dimensionModel,this.timeoutIdForResize=0},tagName:"div",className:"height_resize_bar",template:_.template('<a href="#" class="height_resize_handle"><span></span></a>'),events:{mousedown:"_onMouseDown"},_attachMouseEvent:function(){$(document).on("mousemove",$.proxy(this._onMouseMove,this)),$(document).on("mouseup",$.proxy(this._onMouseUp,this)),$(document).on("selectstart",$.proxy(this._onSelectStart,this))},_detachMouseEvent:function(){$(document).off("mousemove",$.proxy(this._onMouseMove,this)),$(document).off("mouseup",$.proxy(this._onMouseUp,this)),$(document).off("selectstart",$.proxy(this._onSelectStart,this))},_onMouseDown:function(t){t.preventDefault(),$(document.body).css("cursor","row-resize"),this.dimensionModel.refreshLayout(),this._attachMouseEvent()},_onMouseMove:function(t){var e=this.dimensionModel,i=e.get("offsetTop"),n=e.get("headerHeight"),o=e.get("rowHeight"),s=e.get("toolbarHeight"),a=t.pageY-i-n-s;clearTimeout(this.timeoutIdForResize),a=Math.max(a,o+e.getScrollXHeight()),this.timeoutIdForResize=setTimeout(function(){e.set({bodyHeight:a})},0)},_onMouseUp:function(){$(document.body).css("cursor","default"),this._detachMouseEvent()},_onSelectStart:function(t){return t.preventDefault(),!1},render:function(){return this._destroyChildren(),this.$el.html(this.template()),this},destroy:function(){this.stopListening(),this._onMouseUp(),this._destroyChildren(),this.remove()}});e.exports=o},{"../../../base/view":7}],53:[function(t,e,i){"use strict";var n=t("../base/view"),o=n.extend({initialize:function(t){var e=t.focusModel,i=t.renderModel,n=t.whichSide||"R";this.setOwnProperties({whichSide:n,bodyTableView:t.bodyTableView,focusModel:e,renderModel:i,dataModel:t.dataModel,columnModel:t.columnModel,collection:i.getCollection(n),painterManager:t.painterManager,sortOptions:null,renderedRowKeys:null}),this._focusClipboardDebounced=_.debounce(this._focusClipboard,10),this.listenTo(this.collection,"change",this._onModelChange).listenTo(e,"select",this._onSelect).listenTo(e,"unselect",this._onUnselect).listenTo(e,"focus",this._onFocus).listenTo(e,"blur",this._onBlur).listenTo(e,"focusIn",this._onFocusIn).listenTo(i,"rowListChanged",this.render);
},_getColumnModelList:function(){return this.columnModel.getVisibleColumnModelList(this.whichSide,!0)},_removeOldRows:function(t){var e=_.indexOf(this.renderedRowKeys,t[0]),i=_.indexOf(this.renderedRowKeys,_.last(t)),n=this.$el.children("tr");n.slice(0,e).remove(),n.slice(i+1).remove()},_appendNewRows:function(t,e){var i=this.collection.slice(0,_.indexOf(t,e[0])),n=this.collection.slice(_.indexOf(t,_.last(e))+1);this.$el.prepend(this._getRowsHtml(i)),this.$el.append(this._getRowsHtml(n))},_resetRows:function(){var t,e=this._getRowsHtml(this.collection.models);if(o.isInnerHtmlOfTbodyReadOnly)t=this.bodyTableView.redrawTable(e),this.setElement(t,!1),tui.util.browser.msie&&tui.util.browser.version<=7&&t.width(t.width());else try{this.$el[0].innerHTML=e}catch(i){o.isInnerHtmlOfTbodyReadOnly=!0,this._resetRows()}},_getRowsHtml:function(t){var e=this.painterManager.getRowPainter(),i=this._getColumnModelList();return _.map(t,function(t){return e.getHtml(t,i)}).join("")},_focusClipboard:function(){try{this.focusModel.focusClipboard()}catch(t){}},_getRowElement:function(t){return this.$el.find('tr[key="'+t+'"]')},_onSelect:function(t){this._setCssSelect(t.rowKey,!0)},_onUnselect:function(t){this._setCssSelect(t,!1)},_setCssSelect:function(t,e){var i,n,o,s,a=this._getColumnModelList(),l={};_.each(a,function(a){i=a.columnName,n=this.dataModel.getMainRowKey(t,i),l[n]=l[n]||this._getRowElement(n),o=l[n],s=o.find('td[columnname="'+i+'"]'),s.length&&s.toggleClass("selected",e)},this)},_onBlur:function(t,e){var i=this.dataModel.getElement(t,e);i.length&&i.removeClass("focused")},_onFocus:function(t,e){var i=this.dataModel.getElement(t,e);i.length&&i.addClass("focused")},_onFocusIn:function(t,e){var i,n,o,s=this.columnModel.isLside(e)?"L":"R";s===this.whichSide&&(i=this.dataModel.getElement(t,e),n=this.columnModel.getEditType(e),o=this.painterManager.getCellPainter(n),o.focusIn(i))},render:function(t){var e,i=this.collection.pluck("rowKey");return this.bodyTableView.resetTablePosition(),t?this._resetRows():(e=_.intersection(i,this.renderedRowKeys),_.isEmpty(i)||_.isEmpty(e)||e.length/i.length<.7?this._resetRows():(this._removeOldRows(e),this._appendNewRows(i,e))),this.renderedRowKeys=i,this._focusClipboardDebounced(),this},_onModelChange:function(t){var e=this._getRowElement(t.get("rowKey"));this.painterManager.getRowPainter().onModelChange(t,e)}},{isInnerHtmlOfTbodyReadOnly:tui.util.browser.msie&&tui.util.browser.version<=9});e.exports=o},{"../base/view":7}],54:[function(t,e,i){"use strict";var n=t("../base/view"),o=t("../common/util"),s=1,a=n.extend({initialize:function(t){this.setOwnProperties({whichSide:t.whichSide||"R",dimensionModel:t.dimensionModel,columnModel:t.columnModel,selectionModel:t.selectionModel}),this._updateColumnWidthList(),this.listenTo(this.dimensionModel,"columnWidthChanged",this._onChangeColumnWidth),this.listenTo(this.selectionModel,"change:range",this.render)},tagName:"div",className:"selection_layer",_updateColumnWidthList:function(){this.columnWidthList=this.dimensionModel.getColumnWidthList(this.whichSide)},_onChangeColumnWidth:function(){this._updateColumnWidthList(),this.render()},_getOwnSideColumnRange:function(t){var e=this.columnModel.getVisibleColumnFixCount(),i=null;return"L"===this.whichSide?t[0]<e&&(i=[t[0],Math.min(t[1],e-1)]):t[1]>=e&&(i=[Math.max(t[0],e)-e,t[1]-e]),i},_getVerticalStyles:function(t){var e=this.dimensionModel.get("rowHeight"),i=o.getHeight(t[0],e)-s,n=o.getHeight(t[1]-t[0]+1,e)-2*s;return{top:i+"px",height:n+"px"}},_getHorizontalStyles:function(t){var e=this.columnWidthList,i=this.columnModel.getVisibleMetaColumnCount(),n=t[0],o=t[1],a=0,l=0,r=0;for("L"===this.whichSide&&(n+=i,o+=i),o=Math.min(o,e.length-1);o>=r;r+=1)n>r?a+=e[r]+s:l+=e[r]+s;return l-=s,{left:a+"px",width:l+"px"}},render:function(){var t,e,i=this.selectionModel.get("range");return i&&(e=this._getOwnSideColumnRange(i.column)),e?(t=_.assign({},this._getVerticalStyles(i.row),this._getHorizontalStyles(e)),this.$el.show().css(t)):this.$el.hide(),this}});e.exports=a},{"../base/view":7,"../common/util":10}],55:[function(t,e,i){"use strict";var n=t("../base/view"),o=t("../common/constMap").renderState,s=n.extend({initialize:function(t){this.dimensionModel=t.dimensionModel,this.renderModel=t.renderModel,this.listenTo(this.dimensionModel,"change",this._refreshLayout),this.listenTo(this.renderModel,"change:state",this.render)},className:"state_layer",template:_.template('<div class="layer_content">    <%= text %>    <% if (isLoading) { %>    <div class="loading_img"></div>    <% } %></div>'),render:function(){var t=this.renderModel.get("state");return t===o.DONE?this.$el.hide():(this.$el.html(this.template({text:this._getMessage(t),isLoading:t===o.LOADING})).show(),this._refreshLayout()),this},_getMessage:function(t){switch(t){case o.LOADING:return"요청을 처리 중입니다.";case o.EMPTY:return this.renderModel.get("emptyMessage")||"데이터가 존재하지 않습니다.";default:return null}},_refreshLayout:function(){var t=this.dimensionModel;this.$el.css({marginTop:t.get("headerHeight"),height:t.get("bodyHeight")+t.get("toolbarHeight")})}});e.exports=s},{"../base/view":7,"../common/constMap":8}]},{},[12]);